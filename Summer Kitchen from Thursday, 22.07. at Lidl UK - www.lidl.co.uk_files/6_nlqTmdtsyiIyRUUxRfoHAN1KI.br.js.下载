(function(){var it,k,s;try{var e=window.$MicrosoftMaps8,w=e.Internal,d=w._Helper,g=w._LatLonCrs,p=e.LocationRect,h=e.Location,f=e.MapMath,nt=e.Point,v=e.Pushpin,b=e.PyramidTileId,a=e.Polygon,l=e.Polyline,ut=e.SimpleAreaPrimitive,tt=e.SimpleLinePrimitive,ft=e.SimplePointPrimitive,o=w.TileSystemHelper,r=w._VectorMath;
/**
 * JSTS. See https://github.com/bjornharrtell/jsts
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EDLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_LICENSE_ES6_COLLECTIONS.txt
 * @license
 */
!function(n,t){t(n.jsts=n.jsts||{})}(this,function(n){"use strict";function t(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}function oh(){}function tt(){}function fo(n,t){this.low=0|t;this.high=0|n}function l(){}function or(){}function pc(){}function eo(){}function sr(){}function pi(n){this.name="RuntimeException";this.message=n;this.stack=(new Error).stack;Error.call(this,n)}function v(n,t){n.prototype=Object.create(t.prototype);n.prototype.constructor=n}function cs(){if(0===arguments.length)pi.call(this);else if(1===arguments.length){var n=arguments[0];pi.call(this,n)}}function c(){}function r(){var n,t,i;if(this.x=null,this.y=null,this.z=null,0===arguments.length)r.call(this,0,0);else if(1===arguments.length)n=arguments[0],r.call(this,n.x,n.y,n.z);else if(2===arguments.length)t=arguments[0],i=arguments[1],r.call(this,t,i,r.NULL_ORDINATE);else if(3===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2];this.x=u;this.y=f;this.z=e}}function oo(){if(this._dimensionsToTest=2,0===arguments.length)oo.call(this,2);else if(1===arguments.length){var n=arguments[0];if(2!==n&&3!==n)throw new tt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}}function h(n,t){return n.interfaces_&&-1<n.interfaces_().indexOf(t)}function wc(){}function at(){}function lk(n){this.message=n||""}function li(){}function bc(n){this.message=n||""}function ev(n){this.message=n||""}function u(){this.array_=[];arguments[0]instanceof at&&this.addAll(arguments[0])}function ni(){var n,t,i;(u.apply(this),0===arguments.length)||(1===arguments.length?(n=arguments[0],this.ensureCapacity(n.length),this.add(n,!0)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.ensureCapacity(t.length),this.add(t,i)))}function y(){var n,u,t,i;if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)arguments[0]instanceof r?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof y&&(u=arguments[0],this.init(u));else if(2===arguments.length)t=arguments[0],i=arguments[1],this.init(t.x,i.x,t.y,i.y);else if(4===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3];this.init(f,e,o,s)}}function ov(){}function te(){ov.call(this,"Projective point not representable on the Cartesian plane.")}function so(n){this.str=n}function wu(n){this.value=n}function kc(){}function f(){var n,t,i,r,u;(this._hi=0,(this._lo=0)===arguments.length)?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(n=arguments[0],this.init(n)):arguments[0]instanceof f?(t=arguments[0],this.init(t)):"string"==typeof arguments[0]&&(i=arguments[0],f.call(this,f.parse(i))):2===arguments.length&&(r=arguments[0],u=arguments[1],this.init(r,u))}function ir(){}function p(){}function pt(){}function yr(){var h,c,l,n,t,i,u;if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length)h=arguments[0],this.x=h.x,this.y=h.y,this.w=1;else if(2===arguments.length)"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(c=arguments[0],l=arguments[1],this.x=c,this.y=l,this.w=1):arguments[0]instanceof yr&&arguments[1]instanceof yr?(n=arguments[0],t=arguments[1],this.x=n.y*t.w-t.y*n.w,this.y=t.x*n.w-n.x*t.w,this.w=n.x*t.y-t.x*n.y):arguments[0]instanceof r&&arguments[1]instanceof r&&(i=arguments[0],u=arguments[1],this.x=i.y-u.y,this.y=u.x-i.x,this.w=i.x*u.y-u.x*i.y);else if(3===arguments.length){var k=arguments[0],d=arguments[1],g=arguments[2];this.x=k;this.y=d;this.w=g}else if(4===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],a=f.y-e.y,v=e.x-f.x,y=f.x*e.y-e.x*f.y,p=o.y-s.y,w=s.x-o.x,b=o.x*s.y-s.x*o.y;this.x=v*b-w*y;this.y=p*y-a*b;this.w=a*w-p*v}}function pr(){}function ti(){}function ft(){}function sv(){}function bu(){}function s(){this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;var n=arguments[0];this._factory=n;this._SRID=n.getSRID()}function pe(){}function ai(){}function hv(){}function cv(){}function lv(){}function av(){}function w(){}function sw(){}function hw(){}function ls(){}function ak(){}function cw(){}function wi(){this.array_=[];arguments[0]instanceof at&&this.addAll(arguments[0])}function vk(n){return null==n?sf:n.color}function vt(n){return null==n?null:n.parent}function ie(n,t){null!==n&&(n.color=t)}function lw(n){return null==n?null:n.left}function yk(n){return null==n?null:n.right}function si(){this.root_=null;this.size_=0}function gc(){}function pk(){}function hr(){this.array_=[];arguments[0]instanceof at&&this.addAll(arguments[0])}function re(){}function e(){}function ue(){}function ho(){}function g(){this._geometries=null;var n=arguments[0],t=arguments[1];if(s.call(this,t),null===n&&(n=[]),s.hasNullElements(n))throw new tt("geometries must not contain null elements");this._geometries=n}function rr(){var n=arguments[0],t=arguments[1];g.call(this,n,t)}function we(){var t,n,i;(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length)?(t=arguments[0],we.call(this,t,ai.MOD2_BOUNDARY_RULE)):2===arguments.length&&(n=arguments[0],i=arguments[1],this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i)}function aw(){this.count=null}function vv(){}function sg(){}function hg(){}function cg(){}function lg(){}function ag(){}function ru(){}function co(n){this.str=n}function ui(){}function k(){this._points=null;var n=arguments[0],t=arguments[1];s.call(this,t);this.init(n)}function yv(){}function dt(){this._coordinates=null;var n=arguments[0],t=arguments[1];s.call(this,t);this.init(n)}function lo(){}function fe(){}function st(){this._shell=null;this._holes=null;var t=arguments[0],n=arguments[1],i=arguments[2];if(s.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===n&&(n=[]),s.hasNullElements(n))throw new tt("holes must not contain null elements");if(t.isEmpty()&&s.hasNonEmptyElements(n))throw new tt("shell is empty but holes are not");this._shell=t;this._holes=n}function wr(){var n=arguments[0],t=arguments[1];g.call(this,n,t)}function ii(){var t,n,i,r;arguments[0]instanceof Array&&arguments[1]instanceof nt?(t=arguments[0],n=arguments[1],ii.call(this,n.getCoordinateSequenceFactory().create(t),n)):h(arguments[0],ft)&&arguments[1]instanceof nt&&(i=arguments[0],r=arguments[1],k.call(this,i,r),this.validateConstruction())}function vi(){var n=arguments[0],t=arguments[1];g.call(this,n,t)}function br(){if((this._factory=null,this._isUserDataCopied=!1,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this._factory=n}}function pv(){}function vw(){}function yw(){}function pw(){}function cu(){var e,i,n,t,u,o,f,s;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)e=arguments[0],cu.call(this,e,3);else if(Number.isInteger(arguments[0]))for(i=arguments[0],this._coordinates=new Array(i).fill(null),n=0;n<i;n++)this._coordinates[n]=new r;else if(h(arguments[0],ft)){if(t=arguments[0],null===t)return this._coordinates=new Array(0).fill(null),null;for(this._dimension=t.getDimension(),this._coordinates=new Array(t.size()).fill(null),n=0;n<this._coordinates.length;n++)this._coordinates[n]=t.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1]))u=arguments[0],o=arguments[1],this._coordinates=u,this._dimension=o,null===u&&(this._coordinates=new Array(0).fill(null));else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1]))for(f=arguments[0],s=arguments[1],this._coordinates=new Array(f).fill(null),this._dimension=s,n=0;n<f;n++)this._coordinates[n]=new r}function be(){}function ww(n,t,i){var r=[0],u=!1;return n.push(r),{next:function(){var e,f=r[0];return!u&&f<t.length?(e=i?[t[f],i[f]]:t[f],r[0]++):(u=!0,n.splice(n.indexOf(r),1)),{done:u,value:e}}}}function vg(){return this._values.length}function ke(){this.map_=new kk}function ht(){var t,i,n;(this._modelType=null,this._scale=null,0===arguments.length)?this._modelType=ht.FLOATING:1===arguments.length&&(arguments[0]instanceof cf?(t=arguments[0],(this._modelType=t)===ht.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(i=arguments[0],this._modelType=ht.FIXED,this.setScale(i)):arguments[0]instanceof ht&&(n=arguments[0],this._modelType=n._modelType,this._scale=n._scale))}function cf(){this._name=null;var n=arguments[0];this._name=n;cf.nameToTypeMap.put(n,this)}function nt(){var n,t,i,r;if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)nt.call(this,new ht,0);else if(1===arguments.length)h(arguments[0],sv)?(n=arguments[0],nt.call(this,new ht,0,n)):arguments[0]instanceof ht&&(t=arguments[0],nt.call(this,t,0,nt.getDefaultCoordinateSequenceFactory()));else if(2===arguments.length)i=arguments[0],r=arguments[1],nt.call(this,i,r,nt.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2];this._precisionModel=u;this._coordinateSequenceFactory=e;this._SRID=f}}function bw(n){this.geometryFactory=n||new nt;this.precisionModel=this.geometryFactory.getPrecisionModel()}function bi(n){this.parser=new bw(n)}function ct(){this._result=null;this._inputLines=Array(2).fill().map(function(){return Array(2)});this._intPt=new Array(2).fill(null);this._intLineIndex=null;this._isProper=null;this._pa=null;this._pb=null;this._precisionModel=null;this._intPt[0]=new r;this._intPt[1]=new r;this._pa=this._intPt[0];this._pb=this._intPt[1];this._result=0}function fi(){ct.apply(this)}function b(){var n,t,i;if(this.p0=null,this.p1=null,0===arguments.length)b.call(this,new r,new r);else if(1===arguments.length)n=arguments[0],b.call(this,n.p0,n.p1);else if(2===arguments.length)t=arguments[0],i=arguments[1],this.p0=t,this.p1=i;else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];b.call(this,new r(u,f),new r(e,o))}}function i(){}function et(){var t,n;(this._matrix=null,0===arguments.length)?(this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(e.FALSE)):1===arguments.length&&("string"==typeof arguments[0]?(t=arguments[0],et.call(this),this.set(t)):arguments[0]instanceof et&&(n=arguments[0],et.call(this),this._matrix[i.INTERIOR][i.INTERIOR]=n._matrix[i.INTERIOR][i.INTERIOR],this._matrix[i.INTERIOR][i.BOUNDARY]=n._matrix[i.INTERIOR][i.BOUNDARY],this._matrix[i.INTERIOR][i.EXTERIOR]=n._matrix[i.INTERIOR][i.EXTERIOR],this._matrix[i.BOUNDARY][i.INTERIOR]=n._matrix[i.BOUNDARY][i.INTERIOR],this._matrix[i.BOUNDARY][i.BOUNDARY]=n._matrix[i.BOUNDARY][i.BOUNDARY],this._matrix[i.BOUNDARY][i.EXTERIOR]=n._matrix[i.BOUNDARY][i.EXTERIOR],this._matrix[i.EXTERIOR][i.INTERIOR]=n._matrix[i.EXTERIOR][i.INTERIOR],this._matrix[i.EXTERIOR][i.BOUNDARY]=n._matrix[i.EXTERIOR][i.BOUNDARY],this._matrix[i.EXTERIOR][i.EXTERIOR]=n._matrix[i.EXTERIOR][i.EXTERIOR]))}function d(){}function lt(){this.p0=null;this.p1=null;this.p2=null;var n=arguments[0],t=arguments[1],i=arguments[2];this.p0=n;this.p1=t;this.p2=i}function ku(){this._pt=[new r,new r];this._distance=l.NaN;this._isNull=!0}function du(){}function de(){this._g0=null;this._g1=null;this._ptDist=new ku;var n=arguments[this._densifyFrac=0],t=arguments[1];this._g0=n;this._g1=t}function wv(){this._maxPtDist=new ku;this._minPtDist=new ku;this._euclideanDist=new du;this._geom=null;var n=arguments[0];this._geom=n}function bv(){this._maxPtDist=new ku;this._minPtDist=new ku;this._geom=null;var n=arguments[this._numSubSegs=0],t=arguments[1];this._geom=n;this._numSubSegs=Math.trunc(Math.round(1/t))}function as(){}function tl(){}function ao(){this._min=l.POSITIVE_INFINITY;this._max=l.NEGATIVE_INFINITY}function kw(){}function kv(){ao.apply(this);this._item=null;var n=arguments[0],t=arguments[1],i=arguments[2];this._min=n;this._max=t;this._item=i}function dv(){ao.apply(this);this._node1=null;this._node2=null;var n=arguments[0],t=arguments[1];this._node1=n;this._node2=t;this.buildExtent(this._node1,this._node2)}function dw(){this._leaves=new u;this._root=null;this._level=0}function gi(){var n,t,i;(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)?(n=arguments[0],this._lines=n):2===arguments.length&&(t=arguments[0],i=arguments[1],this._lines=t,this._isForcedToLineString=i)}function gv(){this._items=new u}function vo(){this._p=null;this._crossingCount=0;this._isPointOnSegment=!1;var n=arguments[0];this._p=n}function vs(){this._index=null;var n=arguments[0];if(!(h(n,fe)||n instanceof ii))throw new tt("Argument must be Polygonal or LinearRing");this._index=new ty(n)}function ny(){this._counter=null;var n=arguments[0];this._counter=n}function ty(){this._index=new dw;var n=arguments[0];this.init(n)}function ur(){}function ys(){this._parent=null;this._atStart=null;this._max=null;this._index=null;this._subcollectionIterator=null;var n=arguments[0];this._parent=n;this._atStart=!0;this._index=0;this._max=n.getNumGeometries()}function fr(){this._geom=null;var n=arguments[0];this._geom=n}function il(){}function gw(){}function ps(){}function iy(){}function oe(){this._areaBasePt=null;this._triangleCent3=new r;this._areasum2=0;this._cg3=new r;this._lineCentSum=new r;this._totalLength=0;this._ptCount=0;this._ptCentSum=new r;var n=arguments[0];this._areaBasePt=null;this.add(n)}function wt(){}function nb(n){this.message=n||""}function cr(){this.array_=[]}function ch(){this.treeSet=new hr;this.list=new u}function se(){var n,t,i;(this._geomFactory=null,this._inputPts=null,1===arguments.length)?(n=arguments[0],se.call(this,se.extractCoordinates(n),n.getFactory())):2===arguments.length&&(t=arguments[0],i=arguments[1],this._inputPts=ch.filterCoordinates(t),this._geomFactory=i)}function lh(){this._origin=null;var n=arguments[0];this._origin=n}function nf(){this._factory=null;this._interiorPoint=null;var n=arguments[this._maxWidth=0];this._factory=n.getFactory();this.add(n)}function ah(){this._poly=null;this._centreY=null;this._hiY=l.MAX_VALUE;this._loY=-l.MAX_VALUE;var n=arguments[0];this._poly=n;this._hiY=n.getEnvelopeInternal().getMaxY();this._loY=n.getEnvelopeInternal().getMinY();this._centreY=nf.avg(this._loY,this._hiY)}function ry(){this._centroid=null;this._minDistance=l.MAX_VALUE;this._interiorPoint=null;var n=arguments[0];this._centroid=n.getCentroid().getCoordinate();this.addInterior(n);null===this._interiorPoint&&this.addEndpoints(n)}function uy(){this._centroid=null;this._minDistance=l.MAX_VALUE;this._interiorPoint=null;var n=arguments[0];this._centroid=n.getCentroid().getCoordinate();this.add(n)}function yo(){this.selectedSegment=new b}function vf(){this._items=new u;this._subnode=new Array(2).fill(null)}function he(){var n,t,i;(this.min=null,this.max=null,0===arguments.length)?(this.min=0,this.max=0):1===arguments.length?(n=arguments[0],this.init(n.min,n.max)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.init(t,i))}function ws(){}function rl(){this._pt=0;this._level=0;this._interval=null;var n=arguments[0];this.computeKey(n)}function ge(){vf.apply(this);this._interval=null;this._centre=null;this._level=null;var n=arguments[0],t=arguments[1];this._interval=n;this._level=t;this._centre=(n.getMin()+n.getMax())/2}function po(){}function vh(){vf.apply(this)}function yh(){this._root=null;this._minExtent=1;this._root=new vh}function fy(){this._pts=null;this._start=null;this._end=null;this._env=null;this._context=null;this._id=null;var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];this._pts=n;this._start=t;this._end=i;this._context=r}function rt(){}function tf(){}function ph(){}function tb(){}function ey(){this._ring=null;this._tree=null;this._crossings=0;this._interval=new he;var n=arguments[0];this._ring=n;this.buildIndex()}function ul(){yo.apply(this);this.mcp=null;this.p=null;var n=arguments[0],t=arguments[1];this.mcp=n;this.p=t}function no(){this._input=null;this._extremalPts=null;this._centre=null;var n=arguments[this._radius=0];this._input=n}function nr(){var n,t,i;(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new b,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length)?(n=arguments[0],nr.call(this,n,!1)):2===arguments.length&&(t=arguments[0],i=arguments[1],this._inputGeom=t,this._isConvex=i)}function lr(){this._inputGeom=null;this._factory=null;this._pruneEmptyGeometry=!0;this._preserveGeometryCollectionType=!0;this._preserveCollections=!1;this._preserveType=!1}function wo(){this._inputGeom=null;this._distanceTolerance=null;var n=arguments[0];this._inputGeom=n}function fl(){lr.apply(this);this.distanceTolerance=null;var n=arguments[0];this.distanceTolerance=n}function ce(){this._orig=null;this._sym=null;this._next=null;var n=arguments[0];this._orig=n}function kr(){this._isMarked=!1;var n=arguments[0];ce.call(this,n)}function wh(){this._vertexMap=new ke}function oy(){this._isStart=!1;var n=arguments[0];kr.call(this,n)}function sy(){wh.apply(this)}function el(){this._result=null;this._factory=null;this._graph=null;this._lines=new u;this._nodeEdgeStack=new cr;this._ringStartEdge=null;this._graph=new sy}function bs(){if((this._boundaryRule=ai.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];if(null===n)throw new tt("Rule must be non-null");this._boundaryRule=n}}function o(){}function ib(){this.mce=null;this.chainIndex=null;var n=arguments[0],t=arguments[1];this.mce=n;this.chainIndex=t}function le(){var n,t;if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length)n=arguments[0],t=arguments[1],this._eventType=le.DELETE,this._xValue=n,this._insertEvent=t;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._eventType=le.INSERT;this._label=i;this._xValue=r;this._obj=u}}function hy(){}function bo(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._properIntersectionPoint=null;this._li=null;this._includeProper=null;this._recordIsolated=null;this._isSelfIntersection=null;this._numIntersections=0;this.numTests=0;this._bdyNodes=null;this._isDone=!1;this._isDoneWhenProperInt=!1;var n=arguments[0],t=arguments[1],i=arguments[2];this._li=n;this._includeProper=t;this._recordIsolated=i}function cy(){hy.apply(this);this.events=new u;this.nOverlaps=null}function dr(){var i,r,t,n;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)i=arguments[0],this.init(i.length);else if(Number.isInteger(arguments[0]))r=arguments[0],this.init(1),this.location[o.ON]=r;else if(arguments[0]instanceof dr&&(t=arguments[0],this.init(t.location.length),null!==t))for(n=0;n<this.location.length;n++)this.location[n]=t.location[n]}else if(3===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2];this.init(3);this.location[o.ON]=u;this.location[o.LEFT]=f;this.location[o.RIGHT]=e}}function ri(){var n,t,r,u;if(this.elt=new Array(2).fill(null),1===arguments.length)Number.isInteger(arguments[0])?(n=arguments[0],this.elt[0]=new dr(n),this.elt[1]=new dr(n)):arguments[0]instanceof ri&&(t=arguments[0],this.elt[0]=new dr(t.elt[0]),this.elt[1]=new dr(t.elt[1]));else if(2===arguments.length)r=arguments[0],u=arguments[1],this.elt[0]=new dr(i.NONE),this.elt[1]=new dr(i.NONE),this.elt[r].setLocation(u);else if(3===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2];this.elt[0]=new dr(f,e,o);this.elt[1]=new dr(f,e,o)}else if(4===arguments.length){var s=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];this.elt[0]=new dr(i.NONE,i.NONE,i.NONE);this.elt[1]=new dr(i.NONE,i.NONE,i.NONE);this.elt[s].setLocations(h,c,l)}}function rb(){this.coord=null;this.segmentIndex=null;this.dist=null;var n=arguments[0],t=arguments[1],i=arguments[2];this.coord=new r(n);this.segmentIndex=t;this.dist=i}function ub(){this._nodeMap=new si;this.edge=null;var n=arguments[0];this.edge=n}function sl(){}function fb(){var n,t;this.e=null;this.pts=null;this.startIndex=null;n=arguments[0];this.e=n;this.pts=n.getCoordinates();t=new sl;this.startIndex=t.getChainStartIndices(this.pts)}function rf(){var n,t;for(this._depth=Array(2).fill().map(function(){return Array(3)}),n=0;n<2;n++)for(t=0;t<3;t++)this._depth[n][t]=rf.NULL_VALUE}function ko(){if((this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this._label=n}}function lu(){var n,t,i;(ko.apply(this),this.pts=null,this._env=null,this.eiList=new ub(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rf,this._depthDelta=0,1===arguments.length)?(n=arguments[0],lu.call(this,n,null)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.pts=t,this._label=i)}function ae(){ko.apply(this);this._coord=null;this._edges=null;var n=arguments[0],t=arguments[1];this._coord=n;this._edges=t;this._label=new ri(0,i.NONE)}function bh(){this.nodeMap=new si;this.nodeFact=null;var n=arguments[0];this.nodeFact=n}function yf(){var n;if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)n=arguments[0],this._edge=n;else if(3===arguments.length){var t=arguments[0],i=arguments[1],r=arguments[2];yf.call(this,t,i,r,null)}else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];yf.call(this,u);this.init(f,e);this._label=o}}function gr(){var t,i,n;(this.pt=null,1===arguments.length)?(t=arguments[0],pi.call(this,t)):2===arguments.length&&(i=arguments[0],n=arguments[1],pi.call(this,gr.msgWithCoord(i,n)),this.name="TopologyException",this.pt=new r(n))}function ks(){var n,i,t;this._isForward=null;this._isInResult=!1;this._isVisited=!1;this._sym=null;this._next=null;this._nextMin=null;this._edgeRing=null;this._minEdgeRing=null;this._depth=[0,-999,-999];n=arguments[0];i=arguments[1];(yf.call(this,n),this._isForward=i)?this.init(n.getCoordinate(0),n.getCoordinate(1)):(t=n.getNumPoints()-1,this.init(n.getCoordinate(t),n.getCoordinate(t-1)));this.computeDirectedLabel()}function ds(){}function pf(){if(this._edges=new u,this._nodes=null,this._edgeEndList=new u,0===arguments.length)this._nodes=new bh(new ds);else if(1===arguments.length){var n=arguments[0];this._nodes=new bh(n)}}function ar(){var t,i;if(pf.apply(this),this._parentGeom=null,this._lineEdgeMap=new ke,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new bs,2===arguments.length)t=arguments[0],i=arguments[1],ar.call(this,t,i,ai.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){var r=arguments[0],n=arguments[1],u=arguments[2];this._argIndex=r;this._parentGeom=n;this._boundaryNodeRule=u;null!==n&&this.add(n)}}function hl(){}function ly(){var n,t;if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length)n=arguments[0],t=arguments[1],this._p=new r(n),this._left=null,this._right=null,this._count=1,this._data=t;else if(3===arguments.length){var i=arguments[0],u=arguments[1],f=arguments[2];this._p=new r(i,u);this._left=null;this._right=null;this._count=1;this._data=f}}function go(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)go.call(this,0);else if(1===arguments.length){var n=arguments[0];this._tolerance=n}}function ay(){this._tolerance=null;this._matchNode=null;this._matchDist=0;this._p=null;var n=arguments[0],t=arguments[1];this._p=n;this._tolerance=t}function wf(){this._items=new u;this._subnode=new Array(4).fill(null)}function cl(){this._pt=new r;this._level=0;this._env=null;var n=arguments[0];this.computeKey(n)}function to(){wf.apply(this);this._env=null;this._centrex=null;this._centrey=null;this._level=null;var n=arguments[0],t=arguments[1];this._env=n;this._level=t;this._centrex=(n.getMinX()+n.getMaxX())/2;this._centrey=(n.getMinY()+n.getMaxY())/2}function gs(){wf.apply(this)}function vy(){}function ns(){this._root=null;this._minExtent=1;this._root=new gs}function yy(){}function bf(){this._bounds=null;this._item=null;var n=arguments[0],t=arguments[1];this._bounds=n;this._item=t}function ll(){this._size=null;this._items=null;this._size=0;this._items=new u;this._items.add(null)}function nu(){if((this._childBoundables=new u,this._bounds=null,this._level=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this._level=n}}function ki(){this._boundable1=null;this._boundable2=null;this._distance=null;this._itemDistance=null;var n=arguments[0],t=arguments[1],i=arguments[2];this._boundable1=n;this._boundable2=t;this._itemDistance=i;this._distance=this.distance()}function ei(){if(this._root=null,this._built=!1,this._itemBoundables=new u,this._nodeCapacity=null,0===arguments.length)ei.call(this,ei.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var n=arguments[0];c.isTrue(1<n,"Node capacity must be greater than 1");this._nodeCapacity=n}}function al(){}function bt(){if(0===arguments.length)bt.call(this,bt.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var n=arguments[0];ei.call(this,n)}}function vl(){var n=arguments[0];nu.call(this,n)}function eb(n){this.geometryFactory=n||new nt}function sd(n){this.parser=new eb(n||new nt)}function hd(){this.parser=new eb(this.geometryFactory)}function cd(n){this.parser=new bw(n||new nt)}function yl(n){return[n.x,n.y]}function ld(n,t){this.geometryFactory=n||new nt;this.ol=t||"undefined"!=typeof ol&&ol}function vr(){}function ob(){this._segString=null;this.coord=null;this.segmentIndex=null;this._segmentOctant=null;this._isInterior=null;var n=arguments[0],t=arguments[1],i=arguments[2],u=arguments[3];this._segString=n;this.coord=new r(t);this.segmentIndex=i;this._segmentOctant=u;this._isInterior=!t.equals2D(n.getCoordinate(i))}function sb(){this._nodeMap=new si;this._edge=null;var n=arguments[0];this._edge=n}function vd(){this._nodeList=null;this._edge=null;this._nodeIt=null;this._currNode=null;this._nextNode=null;var n=arguments[this._currSegIndex=0];this._nodeList=n;this._edge=n.getEdge();this._nodeIt=n.iterator();this.readNextNode()}function kh(){}function pl(){}function hb(){}function df(){this._nodeList=new sb(this);this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t}function wl(){this._overlapSeg1=new b;this._overlapSeg2=new b}function bl(){}function py(){if((this._segInt=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this.setSegmentIntersector(n)}}function ts(){if((this._monoChains=new u,this._index=new bt,this._idCounter=0,this._nodedSegStrings=null,(this._nOverlaps=0)!==arguments.length)&&1===arguments.length){var n=arguments[0];py.call(this,n)}}function kl(){wl.apply(this);this._si=null;var n=arguments[0];this._si=n}function dl(){var n,t,i,r;(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length)?(n=arguments[0],t=arguments[1],dl.call(this,n,t,0,0)):4===arguments.length&&(i=arguments[0],r=arguments[1],this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision())}function is(){var n,t,i;(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length)?(n=arguments[0],this._inputGeom=n):2===arguments.length&&(t=arguments[0],i=arguments[1],this._inputGeom=t,this._isClosedEndpointsInInterior=!i.isInBoundary(2))}function wy(){this.pt=null;this.isClosed=null;this.degree=null;var n=arguments[0];this.pt=n;this.isClosed=!1;this.degree=0}function ut(){var n,t,i;if(this._quadrantSegments=ut.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=ut.CAP_ROUND,this._joinStyle=ut.JOIN_ROUND,this._mitreLimit=ut.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=ut.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)n=arguments[0],this.setQuadrantSegments(n);else if(2===arguments.length)t=arguments[0],i=arguments[1],this.setQuadrantSegments(t),this.setEndCapStyle(i);else if(4===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3];this.setQuadrantSegments(r);this.setEndCapStyle(u);this.setJoinStyle(f);this.setMitreLimit(e)}}function cb(){this._minIndex=-1;this._minCoord=null;this._minDe=null;this._orientedDe=null}function by(){this.array_=[]}function lb(){this._finder=null;this._dirEdgeList=new u;this._nodes=new u;this._rightMostCoord=null;this._env=null;this._finder=new cb}function dh(){this._startDe=null;this._maxNodeDegree=-1;this._edges=new u;this._pts=new u;this._label=new ri(i.NONE);this._ring=null;this._isHole=null;this._shell=null;this._holes=new u;this._geometryFactory=null;var n=arguments[0],t=arguments[1];this._geometryFactory=t;this.computePoints(n);this.computeRing()}function ky(){var n=arguments[0],t=arguments[1];dh.call(this,n,t)}function gl(){var n=arguments[0],t=arguments[1];dh.call(this,n,t)}function dy(){this._geometryFactory=null;this._shellList=new u;var n=arguments[0];this._geometryFactory=n}function di(){this._inputLine=null;this._distanceTol=null;this._isDeleted=null;this._angleOrientation=p.COUNTERCLOCKWISE;var n=arguments[0];this._inputLine=n}function na(){this._ptList=null;this._precisionModel=null;this._minimimVertexDistance=0;this._ptList=new u}function gf(){this._maxCurveSegmentError=0;this._filletAngleQuantum=null;this._closingSegLengthFactor=1;this._segList=null;this._distance=0;this._precisionModel=null;this._bufParams=null;this._li=null;this._s0=null;this._s1=null;this._s2=null;this._seg0=new b;this._seg1=new b;this._offset0=new b;this._offset1=new b;this._side=0;this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t;this._bufParams=n;this._li=new fi;this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments();8<=n.getQuadrantSegments()&&n.getJoinStyle()===ut.JOIN_ROUND&&(this._closingSegLengthFactor=gf.MAX_CLOSING_SEG_LEN_FACTOR);this.init(i)}function ta(){this._distance=0;this._precisionModel=null;this._bufParams=null;var n=arguments[0],t=arguments[1];this._precisionModel=n;this._bufParams=t}function gy(){this._subgraphs=null;this._seg=new b;var n=arguments[0];this._subgraphs=n}function np(){this._upwardSeg=null;this._leftDepth=null;var n=arguments[0],t=arguments[1];this._upwardSeg=new b(n);this._leftDepth=t}function ab(){this._inputGeom=null;this._distance=null;this._curveBuilder=null;this._curveList=new u;var n=arguments[0],t=arguments[1],i=arguments[2];this._inputGeom=n;this._distance=t;this._curveBuilder=i}function nh(){this._edgeMap=new si;this._edgeList=null;this._ptInAreaLocation=[i.NONE,i.NONE]}function tp(){nh.apply(this);this._resultAreaEdgeList=null;this._label=null;this._SCANNING_FOR_INCOMING=1;this._LINKING_TO_OUTGOING=2}function gh(){ds.apply(this)}function rs(){this._pts=null;this._orientation=null;var n=arguments[0];this._pts=n;this._orientation=rs.orientation(n)}function ip(){this._edges=new u;this._ocaMap=new si}function ia(){}function ra(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._hasInterior=!1;this._properIntersectionPoint=null;this._li=null;this._isSelfIntersection=null;this.numIntersections=0;this.numInteriorIntersections=0;this.numProperIntersections=0;var n=arguments[this.numTests=0];this._li=n}function us(){this._bufParams=null;this._workingPrecisionModel=null;this._workingNoder=null;this._geomFact=null;this._graph=null;this._edgeList=new ip;var n=arguments[0];this._bufParams=n}function ua(){this._li=new fi;this._segStrings=null;var n=arguments[0];this._segStrings=n}function nc(){this._li=null;this._pt=null;this._originalPt=null;this._ptScaled=null;this._p0Scaled=null;this._p1Scaled=null;this._scaleFactor=null;this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;this._corner=new Array(4).fill(null);this._safeEnv=null;var n=arguments[0],t=arguments[1],i=arguments[2];if(this._originalPt=n,this._pt=n,this._scaleFactor=t,this._li=i,t<=0)throw new tt("Scale factor must be non-zero");1!==t&&(this._pt=new r(this.scale(n.x),this.scale(n.y)),this._p0Scaled=new r,this._p1Scaled=new r);this.initCorners(this._pt)}function rp(){this._index=null;var n=arguments[0];this._index=n}function fa(){yo.apply(this);this._hotPixel=null;this._parentEdge=null;this._hotPixelVertexIndex=null;this._isNodeAdded=!1;var n=arguments[0],t=arguments[1],i=arguments[2];this._hotPixel=n;this._parentEdge=t;this._hotPixelVertexIndex=i}function vb(){this._li=null;this._interiorIntersections=null;var n=arguments[0];this._li=n;this._interiorIntersections=new u}function yb(){this._pm=null;this._li=null;this._scaleFactor=null;this._noder=null;this._pointSnapper=null;this._nodedSegStrings=null;var n=arguments[0];this._pm=n;this._li=new fi;this._li.setPrecisionModel(n);this._scaleFactor=n.getScale()}function yi(){var n,t,i;(this._argGeom=null,this._distance=null,this._bufParams=new ut,this._resultGeometry=null,this._saveException=null,1===arguments.length)?(n=arguments[0],this._argGeom=n):2===arguments.length&&(t=arguments[0],i=arguments[1],this._argGeom=t,this._bufParams=i)}function th(){this._comps=null;var n=arguments[0];this._comps=n}function tu(){var n,t;if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)n=arguments[0],t=arguments[1],tu.call(this,n,tu.INSIDE_AREA,t);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._component=i;this._segIndex=r;this._pt=u}}function ih(){this._pts=null;var n=arguments[0];this._pts=n}function ea(){this._locations=null;var n=arguments[0];this._locations=n}function uf(){var n,t;if(this._geom=null,this._terminateDistance=0,this._ptLocator=new bs,this._minDistanceLocation=null,this._minDistance=l.MAX_VALUE,2===arguments.length)n=arguments[0],t=arguments[1],uf.call(this,n,t,0);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._geom=new Array(2).fill(null);this._geom[0]=i;this._geom[1]=r;this._terminateDistance=u}}function pb(){this._factory=null;this._directedEdges=new u;this._coordinates=null;var n=arguments[0];this._factory=n}function vu(){this._isMarked=!1;this._isVisited=!1;this._data=null}function uu(){var n,t;vu.apply(this);this._parentEdge=null;this._from=null;this._to=null;this._p0=null;this._p1=null;this._sym=null;this._edgeDirection=null;this._quadrant=null;this._angle=null;var i=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];this._from=i;this._to=r;this._edgeDirection=f;this._p0=i.getCoordinate();this._p1=u;n=this._p1.x-this._p0.x;t=this._p1.y-this._p0.y;this._quadrant=rt.quadrant(n,t);this._angle=Math.atan2(t,n)}function oa(){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];uu.call(this,n,t,i,r)}function ne(){if((vu.apply(this),this._dirEdge=null,0!==arguments.length)&&2===arguments.length){var n=arguments[0],t=arguments[1];this.setDirectedEdges(n,t)}}function wb(){this._outEdges=new u;this._sorted=!1}function ve(){var n,t,i;(vu.apply(this),this._pt=null,this._deStar=null,1===arguments.length)?(n=arguments[0],ve.call(this,n,new wb)):2===arguments.length&&(t=arguments[0],i=arguments[1],this._pt=t,this._deStar=i)}function up(){ne.apply(this);this._line=null;var n=arguments[0];this._line=n}function bb(){this._nodeMap=new si}function tc(){this._edges=new wi;this._dirEdges=new wi;this._nodeMap=new bb}function fp(){tc.apply(this)}function kb(){this._graph=new fp;this._mergedLineStrings=null;this._factory=null;this._edgeStrings=null}function db(){this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t}function io(){this._findAllIntersections=!1;this._isCheckEndSegmentsOnly=!1;this._li=null;this._interiorIntersection=null;this._intSegments=null;this._intersections=new u;this._intersectionCount=0;this._keepIntersections=!0;var n=arguments[0];this._li=n;this._interiorIntersection=null}function sa(){this._li=new fi;this._segStrings=null;this._findAllIntersections=!1;this._segInt=null;this._isValid=!0;var n=arguments[0];this._segStrings=n}function rh(){this._nv=null;var n=arguments[0];this._nv=new sa(rh.toSegmentStrings(n))}function ic(){this._mapOp=null;var n=arguments[0];this._mapOp=n}function gb(){this._op=null;this._geometryFactory=null;this._ptLocator=null;this._lineEdgesList=new u;this._resultLineList=new u;var n=arguments[0],t=arguments[1],i=arguments[2];this._op=n;this._geometryFactory=t;this._ptLocator=i}function nk(){this._op=null;this._geometryFactory=null;this._resultPointList=new u;var n=arguments[0],t=arguments[1];this._op=n;this._geometryFactory=t}function rc(){var t,i,n,r;(this._snapTolerance=0,this._srcPts=null,this._seg=new b,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof k&&"number"==typeof arguments[1])?(t=arguments[0],i=arguments[1],rc.call(this,t.getCoordinates(),i)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(n=arguments[0],r=arguments[1],this._srcPts=n,this._isClosed=rc.isClosed(n),this._snapTolerance=r)}function er(){this._srcGeom=null;var n=arguments[0];this._srcGeom=n}function ha(){var n,t;if(lr.apply(this),this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length)n=arguments[0],t=arguments[1],this._snapTolerance=n,this._snapPts=t;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._snapTolerance=i;this._snapPts=r;this._isSelfSnap=u}}function fu(){this._isFirst=!0;this._commonMantissaBitsCount=53;this._commonBits=new fo;this._commonSignExp=null}function ca(){this._commonCoord=null;this._ccFilter=new ep}function ep(){this._commonBitsX=new fu;this._commonBitsY=new fu}function la(){this.trans=null;var n=arguments[0];this.trans=n}function yu(){this._geom=new Array(2).fill(null);this._snapTolerance=null;this._cbr=null;var n=arguments[0],t=arguments[1];this._geom[0]=n;this._geom[1]=t;this.computeSnapTolerance()}function hi(){this._geom=new Array(2).fill(null);var n=arguments[0],t=arguments[1];this._geom[0]=n;this._geom[1]=t}function fs(){var n,r,u;if(this._li=new fi,this._resultPrecisionModel=null,this._arg=null,1===arguments.length)n=arguments[0],this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ar(0,n);else if(2===arguments.length)r=arguments[0],u=arguments[1],fs.call(this,r,u,ai.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){var t=arguments[0],i=arguments[1],f=arguments[2];0<=t.getPrecisionModel().compareTo(i.getPrecisionModel())?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new ar(0,t,f);this._arg[1]=new ar(1,i,f)}}function a(){this._ptLocator=new bs;this._geomFact=null;this._resultGeom=null;this._graph=null;this._edgeList=new ip;this._resultPolyList=new u;this._resultLineList=new u;this._resultPointList=new u;var n=arguments[0],t=arguments[1];fs.call(this,n,t);this._graph=new pf(new gh);this._geomFact=n.getFactory()}function aa(){this._edgeRing=null;this._next=null;this._label=-1;var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];uu.call(this,n,t,i,r)}function op(){ne.apply(this);this._line=null;var n=arguments[0];this._line=n}function ff(){this._factory=null;this._deList=new u;this._lowestEdge=null;this._ring=null;this._ringPts=null;this._holes=null;this._shell=null;this._isHole=null;this._isProcessed=!1;this._isIncludedSet=!1;this._isIncluded=!1;var n=arguments[0];this._factory=n}function tk(){}function oi(){tc.apply(this);this._factory=null;var n=arguments[0];this._factory=n}function iu(){if(this._lineStringAdder=new sp(this),this._graph=null,this._dangles=new u,this._cutEdges=new u,this._invalidRingLines=new u,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)iu.call(this,!1);else if(1===arguments.length){var n=arguments[0];this._extractOnlyPolygonal=n}}function sp(){this.p=null;var n=arguments[0];this.p=n}function hp(){}function va(){var t,n;(this._edgeEnds=new u,1===arguments.length)?(t=arguments[0],va.call(this,null,t)):2===arguments.length&&(n=arguments[1],yf.call(this,n.getEdge(),n.getCoordinate(),n.getDirectedCoordinate(),new ri(n.getLabel())),this.insert(n))}function cp(){nh.apply(this)}function lp(){var n=arguments[0],t=arguments[1];ae.call(this,n,t)}function ya(){ds.apply(this)}function ap(){this._li=new fi;this._ptLocator=new bs;this._arg=null;this._nodes=new bh(new ya);this._im=null;this._isolatedEdges=new u;this._invalidPoint=null;var n=arguments[0];this._arg=n}function pa(){this._rectEnv=null;var n=arguments[0];this._rectEnv=n.getEnvelopeInternal()}function ik(){this._li=new fi;this._rectEnv=null;this._diagUp0=null;this._diagUp1=null;this._diagDown0=null;this._diagDown1=null;var n=arguments[0];this._rectEnv=n;this._diagUp0=new r(n.getMinX(),n.getMinY());this._diagUp1=new r(n.getMaxX(),n.getMaxY());this._diagDown0=new r(n.getMinX(),n.getMaxY());this._diagDown1=new r(n.getMaxX(),n.getMinY())}function es(){this._isDone=!1}function uc(){this._rectangle=null;this._rectEnv=null;var n=arguments[0];this._rectangle=n;this._rectEnv=n.getEnvelopeInternal()}function vp(){es.apply(this);this._rectEnv=null;this._intersects=!1;var n=arguments[0];this._rectEnv=n}function yp(){es.apply(this);this._rectSeq=null;this._rectEnv=null;this._containsPoint=!1;var n=arguments[0];this._rectSeq=n.getExteriorRing().getCoordinateSequence();this._rectEnv=n.getEnvelopeInternal()}function pp(){es.apply(this);this._rectEnv=null;this._rectIntersector=null;this._hasIntersection=!1;this._p0=new r;this._p1=new r;var n=arguments[0];this._rectEnv=n.getEnvelopeInternal();this._rectIntersector=new ik(this._rectEnv)}function yt(){var n,t;if(this._relate=null,2===arguments.length)n=arguments[0],t=arguments[1],fs.call(this,n,t),this._relate=new ap(this._arg);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];fs.call(this,i,r,u);this._relate=new ap(this._arg)}}function eu(){this._geomFactory=null;this._skipEmpty=!1;this._inputGeoms=null;var n=arguments[0];this._geomFactory=eu.extractFactory(n);this._inputGeoms=n}function wa(){this._pointGeom=null;this._otherGeom=null;this._geomFact=null;var t=arguments[0],n=arguments[1];this._pointGeom=t;this._otherGeom=n;this._geomFact=n.getFactory()}function ef(){this._geometryType=null;this._comps=null;var n=arguments[0],t=arguments[1];this._geometryType=n;this._comps=t}function pu(){this._inputPolys=null;this._geomFactory=null;var n=arguments[0];this._inputPolys=n;null===this._inputPolys&&(this._inputPolys=new u)}function os(){var n,t,i,r;(this._polygons=new u,this._lines=new u,this._points=new u,this._geomFact=null,1===arguments.length)?h(arguments[0],at)?(n=arguments[0],this.extract(n)):arguments[0]instanceof s&&(t=arguments[0],this.extract(t)):2===arguments.length&&(i=arguments[0],r=arguments[1],this._geomFact=r,this.extract(i))}function ba(){this._geometryFactory=new nt;this._geomGraph=null;this._disconnectedRingcoord=null;var n=arguments[0];this._geomGraph=n}function rk(){this._nodes=new bh(new ya)}function wp(){this._li=new fi;this._geomGraph=null;this._nodeGraph=new rk;this._invalidPoint=null;var n=arguments[0];this._geomGraph=n}function uk(){this._graph=null;this._rings=new u;this._totalEnv=new y;this._index=null;this._nestedPt=null;var n=arguments[0];this._graph=n}function it(){var t,i,n;(this._errorType=null,this._pt=null,1===arguments.length)?(t=arguments[0],it.call(this,t,null)):2===arguments.length&&(i=arguments[0],n=arguments[1],this._errorType=i,null!==n&&(this._pt=n.copy()))}function ou(){this._parentGeometry=null;this._isSelfTouchingRingFormingHoleValid=!1;this._validErr=null;var n=arguments[0];this._parentGeometry=n}function bp(){br.CoordinateOperation.apply(this);this._targetPM=null;this._removeCollapsed=!0;var n=arguments[0],t=arguments[1];this._targetPM=n;this._removeCollapsed=t}function uh(){this._targetPM=null;this._removeCollapsed=!0;this._changePrecisionModel=!1;this._isPointwise=!1;var n=arguments[0];this._targetPM=n}function ka(){this._pts=null;this._usePt=null;this._distanceTolerance=null;this._seg=new b;var n=arguments[0];this._pts=n}function fc(){this._inputGeom=null;this._distanceTolerance=null;this._isEnsureValidTopology=!0;var n=arguments[0];this._inputGeom=n}function da(){lr.apply(this);this._isEnsureValidTopology=!0;this._distanceTolerance=null;var n=arguments[0],t=arguments[1];this._isEnsureValidTopology=n;this._distanceTolerance=t}function ga(){var n,t;if(this._parent=null,this._index=null,2===arguments.length)n=arguments[0],t=arguments[1],ga.call(this,n,t,null,-1);else if(4===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];b.call(this,i,r);this._parent=u;this._index=f}}function ro(){var n,t,i;(this._parentLine=null,this._segs=null,this._resultSegs=new u,this._minimumSize=null,1===arguments.length)?(n=arguments[0],ro.call(this,n,2)):2===arguments.length&&(t=arguments[0],i=arguments[1],this._parentLine=t,this._minimumSize=i,this.init())}function ec(){this._index=new ns}function fk(){this._querySeg=null;this._items=new u;var n=arguments[0];this._querySeg=n}function nv(){this._li=new fi;this._inputIndex=new ec;this._outputIndex=new ec;this._line=null;this._linePts=null;var n=arguments[this._distanceTolerance=0],t=arguments[1];this._inputIndex=n;this._outputIndex=t}function ek(){this._inputIndex=new ec;this._outputIndex=new ec;this._distanceTolerance=0}function fh(){this._inputGeom=null;this._lineSimplifier=new ek;this._linestringMap=null;var n=arguments[0];this._inputGeom=n}function tv(){lr.apply(this);this._linestringMap=null;var n=arguments[0];this._linestringMap=n}function kp(){this.tps=null;var n=arguments[0];this.tps=n}function oc(){this._seg=null;this._segLen=null;this._splitPt=null;var n=arguments[this._minimumLen=0];this._seg=n;this._segLen=n.getLength()}function ok(){}function iv(){}function kt(){}function ot(){var n,t,i;if(this._p=null,1===arguments.length)n=arguments[0],this._p=new r(n);else if(2===arguments.length)t=arguments[0],i=arguments[1],this._p=new r(t,i);else if(3===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2];this._p=new r(u,f,e)}}function ss(){this._isOnConstraint=null;this._constraint=null;var n=arguments[0];ot.call(this,n)}function gt(){this._rot=null;this._vertex=null;this._next=null;this._data=null}function rv(){this._subdiv=null;this._isUsingTolerance=!1;var n=arguments[0];this._subdiv=n;this._isUsingTolerance=0<n.getTolerance()}function sk(){}function dp(){this._subdiv=null;this._lastEdge=null;var n=arguments[0];this._subdiv=n;this.init()}function sc(){var i,n,r,t;(this._seg=null,1===arguments.length)?"string"==typeof arguments[0]?(i=arguments[0],pi.call(this,i)):arguments[0]instanceof b&&(n=arguments[0],pi.call(this,"Locate failed to converge (at edge: "+n+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new b(n)):2===arguments.length&&(r=arguments[0],t=arguments[1],pi.call(this,sc.msgWithSpatial(r,t)),this._seg=new b(t))}function hc(){}function su(){this._visitedKey=0;this._quadEdges=new u;this._startingEdge=null;this._tolerance=null;this._edgeCoincidenceTolerance=null;this._frameVertex=new Array(3).fill(null);this._frameEnv=null;this._locator=null;this._seg=new b;this._triEdges=new Array(3).fill(null);var t=arguments[0],n=arguments[1];this._tolerance=n;this._edgeCoincidenceTolerance=n/su.EDGE_COINCIDENCE_TOL_FACTOR;this.createFrame(t);this._startingEdge=this.initSubdiv();this._locator=new dp(this)}function gp(){}function nw(){this._triList=new u}function tw(){this._triList=new u}function iw(){this._coordList=new ni;this._triCoords=new u}function eh(){var n,t;if(this._ls=null,this._data=null,2===arguments.length)n=arguments[0],t=arguments[1],this._ls=new b(n,t);else if(3===arguments.length){var i=arguments[0],u=arguments[1],f=arguments[2];this._ls=new b(i,u);this._data=f}else if(6===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2],h=arguments[3],c=arguments[4],l=arguments[5];eh.call(this,new r(e,o,s),new r(h,c,l))}else if(7===arguments.length){var a=arguments[0],v=arguments[1],y=arguments[2],p=arguments[3],w=arguments[4],k=arguments[5],d=arguments[6];eh.call(this,new r(a,v,y),new r(p,w,k),d)}}function hs(){this._initialVertices=null;this._segVertices=null;this._segments=new u;this._subdiv=null;this._incDel=null;this._convexHull=null;this._splitFinder=new iv;this._kdt=null;this._vertexFactory=null;this._computeAreaEnv=null;this._splitPt=null;this._tolerance=null;var t=arguments[0],n=arguments[1];this._initialVertices=new u(t);this._tolerance=n;this._kdt=new go(n)}function tr(){this._siteCoords=null;this._tolerance=0;this._subdiv=null}function cc(){this._siteCoords=null;this._constraintLines=null;this._tolerance=0;this._subdiv=null;this._constraintVertexMap=new si}function uv(){this._siteCoords=null;this._tolerance=0;this._subdiv=null;this._clipEnv=null;this._diagramEnv=null}function ci(){var n,t,i;if(this._componentIndex=0,this._segmentIndex=0,(this._segmentFraction=0)!==arguments.length)if(1===arguments.length)n=arguments[0],this._componentIndex=n._componentIndex,this._segmentIndex=n._segmentIndex,this._segmentFraction=n._segmentFraction;else if(2===arguments.length)t=arguments[0],i=arguments[1],ci.call(this,0,t,i);else if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];this._componentIndex=r;this._segmentIndex=u;this._segmentFraction=f;this.normalize()}else if(4===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2],h=arguments[3];this._componentIndex=e;this._segmentIndex=o;this._segmentFraction=s;h&&this.normalize()}}function of(){var i,r,n;if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length)i=arguments[0],of.call(this,i,0,0);else if(2===arguments.length)r=arguments[0],n=arguments[1],of.call(this,r,n.getComponentIndex(),of.segmentEndVertexIndex(n));else if(3===arguments.length){var t=arguments[0],u=arguments[1],f=arguments[2];if(!h(t,gc))throw new tt("Lineal geometry is required");this._linearGeom=t;this._numLines=t.getNumGeometries();this._componentIndex=u;this._vertexIndex=f;this.loadCurrentLine()}}function ye(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n}function lc(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n}function rw(){this._geomFact=null;this._lines=new u;this._coordList=null;this._ignoreInvalidLines=!1;this._fixInvalidLines=!1;this._lastPt=null;var n=arguments[0];this._geomFact=n}function ac(){this._line=null;var n=arguments[0];this._line=n}function uw(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n;this.checkGeometryType()}function uo(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n}function hu(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n}function hk(){this._linearGeom=null;var n=arguments[0];this._linearGeom=n}function fw(){}var ew,vc,sh,ck,ow,fv,yc,hh,dc,sf,hf,nl,wk,bk,kk,lf,af,ee,dk,gk,gu,nd,td,id,rd,ud,fd,ed,od,au,kf,ad,yd,pd,wd,bd,kd,dd,gd,ng,tg,ig,rg,ug,fg,eg,og;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(n){var r;if(null==this)throw new TypeError(this+" is not an object");var u=Object(this),i=Math.max(Math.min(u.length,9007199254740991),0)||0,t=1 in arguments&&parseInt(Number(arguments[1]),10)||0;for(t=t<0?Math.max(i+t,0):Math.min(t,i),r=(2 in arguments)&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i,r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);t<r;)u[t]=n,++t;return u},writable:!0});Number.isFinite=Number.isFinite||function(n){return"number"==typeof n&&isFinite(n)};Number.isInteger=Number.isInteger||function(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(n){return n!=n};Math.trunc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};Math.log2=Math.log2||function(n){return Math.log(n)*Math.LOG2E};t(oh.prototype,{interfaces_:function(){return[]},getClass:function(){return oh}});oh.equalsWithTolerance=function(n,t,i){return Math.abs(n-t)<=i};fo.toBinaryString=function(n){for(var i="",t=2147483648;0<t;t>>>=1)i+=(n.high&t)===t?"1":"0";for(t=2147483648;0<t;t>>>=1)i+=(n.low&t)===t?"1":"0";return i};l.isNaN=function(n){return Number.isNaN(n)};l.isInfinite=function(n){return!Number.isFinite(n)};l.MAX_VALUE=Number.MAX_VALUE;"function"==typeof Float64Array&&"function"==typeof Int32Array?(ow=2146435072,fv=new Float64Array(1),yc=new Int32Array(fv.buffer),l.doubleToLongBits=function(n){fv[0]=n;var i=0|yc[0],t=0|yc[1];return(t&ow)===ow&&0!=(1048575&t)&&0!==i&&(i=0,t=2146959360),new fo(t,i)},l.longBitsToDouble=function(n){return yc[0]=n.low,yc[1]=n.high,fv[0]}):(ew=Math.log2,vc=Math.floor,sh=Math.pow,ck=function(){for(var t,n=53;0<n;n--)if(t=sh(2,n)-1,vc(ew(t))+1===n)return t;return 0}(),l.doubleToLongBits=function(n){var r,e,i,t,o,s,h,u,f;if(n<0||1/n===Number.NEGATIVE_INFINITY?(s=-2147483648,n=-n):s=0,0===n)return new fo(u=s,f=0);if(n===1/0)return new fo(u=2146435072|s,f=0);if(n!=n)return new fo(u=2146959360,f=0);if(f=t=0,1<(r=vc(n)))if(r<=ck)(t=vc(ew(r)))<=20?(f=0,u=r<<20-t&1048575):(f=r%(e=sh(2,i=t-20))<<32-i,u=r/e&1048575);else for(i=r,f=0;0!==(i=vc(e=i/2));)t++,f>>>=1,f|=(1&u)<<31,u>>>=1,e!==i&&(u|=524288);if(h=t+1023,o=0===r,r=n-r,t<52&&0!==r)for(i=0;;){if(1<=(e=2*r)?(r=e-1,o?(h--,o=!1):(i<<=1,i|=1,t++)):(r=e,o?0==--h&&(t++,o=!1):(i<<=1,t++)),20===t)u|=i,i=0;else if(52===t){f|=i;break}if(1===e){t<20?u|=i<<20-t:t<52&&(f|=i<<52-t);break}}return u|=h<<20,new fo(u|=s,f)},l.longBitsToDouble=function(n){var r,f,u,i,e=n.high,o=n.low,t;for(f=e&-2147483648?-1:1,u=((2146435072&e)>>20)-1023,i=0,r=524288,t=1;t<=20;t++)e&r&&(i+=sh(2,-t)),r>>>=1;for(r=-2147483648,t=21;t<=52;t++)o&r&&(i+=sh(2,-t)),r>>>=1;if(-1023===u){if(0===i)return 0*f;u=-1022}else{if(1024===u)return 0===i?f/0:NaN;i+=1}return f*i*sh(2,u)});(pi.prototype=Object.create(Error.prototype)).constructor=Error;v(cs,pi);t(cs.prototype,{interfaces_:function(){return[]},getClass:function(){return cs}});t(c.prototype,{interfaces_:function(){return[]},getClass:function(){return c}});c.shouldNeverReachHere=function(){if(0===arguments.length)c.shouldNeverReachHere(null);else if(1===arguments.length){var n=arguments[0];throw new cs("Should never reach here"+(null!==n?": "+n:""));}};c.isTrue=function(){var t,i,n;if(1===arguments.length)t=arguments[0],c.isTrue(t,null);else if(2===arguments.length&&(i=arguments[0],n=arguments[1],!i))throw null===n?new cs:new cs(n);};c.equals=function(){var n,t;if(2===arguments.length)n=arguments[0],t=arguments[1],c.equals(n,t,null);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];if(!r.equals(i))throw new cs("Expected "+i+" but encountered "+r+(null!==u?": "+u:""));}};t(r.prototype,{setOrdinate:function(n,t){switch(n){case r.X:this.x=t;break;case r.Y:this.y=t;break;case r.Z:this.z=t;break;default:throw new tt("Invalid ordinate index: "+n);}},equals2D:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this.x===n.x&&this.y===n.y):2===arguments.length?(t=arguments[0],i=arguments[1],!!oh.equalsWithTolerance(this.x,t.x,i)&&!!oh.equalsWithTolerance(this.y,t.y,i)):void 0},getOrdinate:function(n){switch(n){case r.X:return this.x;case r.Y:return this.y;case r.Z:return this.z}throw new tt("Invalid ordinate index: "+n);},equals3D:function(n){return this.x===n.x&&this.y===n.y&&(this.z===n.z||l.isNaN(this.z)&&l.isNaN(n.z))},equals:function(n){return n instanceof r&&this.equals2D(n)},equalInZ:function(n,t){return oh.equalsWithTolerance(this.z,n.z,t)},compareTo:function(n){var t=n;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},clone:function(){try{return null}catch(n){if(n instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw n;}},copy:function(){return new r(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(n){var t=this.x-n.x,i=this.y-n.y,r=this.z-n.z;return Math.sqrt(t*t+i*i+r*r)},distance:function(n){var t=this.x-n.x,i=this.y-n.y;return Math.sqrt(t*t+i*i)},hashCode:function(){var n=17;return 37*(n=37*n+r.hashCode(this.x))+r.hashCode(this.y)},setCoordinate:function(n){this.x=n.x;this.y=n.y;this.z=n.z},interfaces_:function(){return[or,pc,sr]},getClass:function(){return r}});r.hashCode=function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=arguments[0],n=l.doubleToLongBits(t);return Math.trunc(n^n>>>32)}};t(oo.prototype,{compare:function(n,t){var i=n,r=t,f=oo.compare(i.x,r.x),u;return 0!==f?f:(u=oo.compare(i.y,r.y),0!==u?u:this._dimensionsToTest<=2?0:oo.compare(i.z,r.z))},interfaces_:function(){return[eo]},getClass:function(){return oo}});oo.compare=function(n,t){return n<t?-1:t<n?1:l.isNaN(n)?l.isNaN(t)?0:-1:l.isNaN(t)?1:0};r.DimensionalComparator=oo;r.serialVersionUID=0x5cbf2c235c7e5800;r.NULL_ORDINATE=l.NaN;r.X=0;r.Y=1;r.Z=2;wc.prototype.hasNext=function(){};wc.prototype.next=function(){};wc.prototype.remove=function(){};at.prototype.add=function(){};at.prototype.addAll=function(){};at.prototype.isEmpty=function(){};at.prototype.iterator=function(){};at.prototype.size=function(){};at.prototype.toArray=function(){};at.prototype.remove=function(){};(lk.prototype=new Error).name="IndexOutOfBoundsException";((li.prototype=Object.create(at.prototype)).constructor=li).prototype.get=function(){};li.prototype.set=function(){};li.prototype.isEmpty=function(){};(bc.prototype=new Error).name="NoSuchElementException";(ev.prototype=new Error).name="OperationNotSupported";((u.prototype=Object.create(li.prototype)).constructor=u).prototype.ensureCapacity=function(){};u.prototype.interfaces_=function(){return[li,at]};u.prototype.add=function(n){return 1===arguments.length?this.array_.push(n):this.array_.splice(n,0,arguments[1]),!0};u.prototype.clear=function(){this.array_=[]};u.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0};u.prototype.set=function(n,t){var i=this.array_[n];return this.array_[n]=t,i};u.prototype.iterator=function(){return new hh(this)};u.prototype.get=function(n){if(n<0||n>=this.size())throw new lk;return this.array_[n]};u.prototype.isEmpty=function(){return 0===this.array_.length};u.prototype.size=function(){return this.array_.length};u.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};u.prototype.remove=function(n){for(var i=!1,t=0,r=this.array_.length;t<r;t++)if(this.array_[t]===n){this.array_.splice(t,1);i=!0;break}return i};hh=function(n){this.arrayList_=n;this.position_=0};hh.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new bc;return this.arrayList_.get(this.position_++)};hh.prototype.hasNext=function(){return this.position_<this.arrayList_.size()};hh.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)};hh.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};v(ni,u);t(ni.prototype,{getCoordinate:function(n){return this.get(n)},addAll:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&h(arguments[0],at)){for(var i=arguments[0],r=arguments[1],n=!1,t=i.iterator();t.hasNext();)this.add(t.next(),r),n=!0;return n}return u.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=u.prototype.clone.call(this),n=0;n<this.size();n++)t.add(n,this.get(n).clone());return t},toCoordinateArray:function(){return this.toArray(ni.coordArrayType)},add:function(){var h,c,l,e,a,v,i,o,n,t,f,s;if(1===arguments.length)h=arguments[0],u.prototype.add.call(this,h);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return c=arguments[0],l=arguments[1],this.add(c,l,!0),!0;if(arguments[0]instanceof r&&"boolean"==typeof arguments[1]){if(e=arguments[0],!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(e))return null;u.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return a=arguments[0],v=arguments[1],this.add(a,v),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){if(i=arguments[0],o=arguments[1],arguments[2])for(n=0;n<i.length;n++)this.add(i[n],o);else for(n=i.length-1;0<=n;n--)this.add(i[n],o);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof r){if(t=arguments[0],f=arguments[1],!arguments[2]&&(s=this.size(),0<s&&(0<t&&this.get(t-1).equals2D(f)||t<s&&this.get(t).equals2D(f))))return null;u.prototype.add.call(this,t,f)}}else if(4===arguments.length){var b=arguments[0],k=arguments[1],y=arguments[2],p=arguments[3],w=1;for(p<y&&(w=-1),n=y;n!==p;n+=w)this.add(b[n],k);return!0}},closeRing:function(){0<this.size()&&this.add(new r(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return ni}});ni.coordArrayType=new Array(0).fill(null);t(y.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(n){if(!(n instanceof y))return!1;var t=n;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},intersection:function(n){if(this.isNull()||n.isNull()||!this.intersects(n))return new y;var t=this._minx>n._minx?this._minx:n._minx,i=this._miny>n._miny?this._miny:n._miny;return new y(t,this._maxx<n._maxx?this._maxx:n._maxx,i,this._maxy<n._maxy?this._maxy:n._maxy)},isNull:function(){return this._maxx<this._minx},getMaxX:function(){return this._maxx},covers:function(){var t,n,i,u;if(1===arguments.length){if(arguments[0]instanceof r)return t=arguments[0],this.covers(t.x,t.y);if(arguments[0]instanceof y)return n=arguments[0],!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}else if(2===arguments.length)return i=arguments[0],u=arguments[1],!this.isNull()&&i>=this._minx&&i<=this._maxx&&u>=this._miny&&u<=this._maxy},intersects:function(){var i,u,n,t,f,e;if(1===arguments.length){if(arguments[0]instanceof y)return i=arguments[0],!this.isNull()&&!i.isNull()&&!(i._minx>this._maxx||i._maxx<this._minx||i._miny>this._maxy||i._maxy<this._miny);if(arguments[0]instanceof r)return u=arguments[0],this.intersects(u.x,u.y)}else if(2===arguments.length){if(arguments[0]instanceof r&&arguments[1]instanceof r)return n=arguments[0],t=arguments[1],!this.isNull()&&!((n.x<t.x?n.x:t.x)>this._maxx)&&!((n.x>t.x?n.x:t.x)<this._minx)&&!((n.y<t.y?n.y:t.y)>this._maxy)&&!((n.y>t.y?n.y:t.y)<this._miny);if("number"==typeof arguments[0]&&"number"==typeof arguments[1])return f=arguments[0],e=arguments[1],!this.isNull()&&!(f>this._maxx||f<this._minx||e>this._maxy||e<this._miny)}},getMinY:function(){return this._miny},getMinX:function(){return this._minx},expandToInclude:function(){var u,n,t,i;if(1===arguments.length){if(arguments[0]instanceof r)u=arguments[0],this.expandToInclude(u.x,u.y);else if(arguments[0]instanceof y){if(n=arguments[0],n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else 2===arguments.length&&(t=arguments[0],i=arguments[1],this.isNull()?(this._minx=t,this._maxx=t,this._miny=i,this._maxy=i):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i)))},minExtent:function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return n<t?n:t},getWidth:function(){return this.isNull()?0:this._maxx-this._minx},compareTo:function(n){var t=n;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},translate:function(n,t){if(this.isNull())return null;this.init(this.getMinX()+n,this.getMaxX()+n,this.getMinY()+t,this.getMaxY()+t)},toString:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},setToNull:function(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1},getHeight:function(){return this.isNull()?0:this._maxy-this._miny},maxExtent:function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return t<n?n:t},expandBy:function(){var n,t,i;if(1===arguments.length)n=arguments[0],this.expandBy(n,n);else if(2===arguments.length){if(t=arguments[0],i=arguments[1],this.isNull())return null;this._minx-=t;this._maxx+=t;this._miny-=i;this._maxy+=i;(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},contains:function(){var n,t,i,u;if(1===arguments.length){if(arguments[0]instanceof y)return n=arguments[0],this.covers(n);if(arguments[0]instanceof r)return t=arguments[0],this.covers(t)}else if(2===arguments.length)return i=arguments[0],u=arguments[1],this.covers(i,u)},centre:function(){return this.isNull()?null:new r((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){var n,t,i,u;if(0===arguments.length)this.setToNull();else if(1===arguments.length)arguments[0]instanceof r?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof y&&(t=arguments[0],this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy);else if(2===arguments.length)i=arguments[0],u=arguments[1],this.init(i.x,u.x,i.y,u.y);else if(4===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3];f<e?(this._minx=f,this._maxx=e):(this._minx=e,this._maxx=f);o<s?(this._miny=o,this._maxy=s):(this._miny=s,this._maxy=o)}},getMaxY:function(){return this._maxy},distance:function(n){var t,i;return this.intersects(n)?0:(t=0,this._maxx<n._minx?t=n._minx-this._maxx:this._minx>n._maxx&&(t=this._minx-n._maxx),i=0,this._maxy<n._miny?i=n._miny-this._maxy:this._miny>n._maxy&&(i=this._miny-n._maxy),0===t?i:0===i?t:Math.sqrt(t*t+i*i))},hashCode:function(){var n=17;return 37*(n=37*(n=37*(n=37*n+r.hashCode(this._minx))+r.hashCode(this._maxx))+r.hashCode(this._miny))+r.hashCode(this._maxy)},interfaces_:function(){return[or,sr]},getClass:function(){return y}});y.intersects=function(){if(3===arguments.length){var n=arguments[0],t=arguments[1],i=arguments[2];return i.x>=(n.x<t.x?n.x:t.x)&&i.x<=(n.x>t.x?n.x:t.x)&&i.y>=(n.y<t.y?n.y:t.y)&&i.y<=(n.y>t.y?n.y:t.y)}if(4===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3],o=Math.min(f.x,e.x),s=Math.max(f.x,e.x),h=Math.min(r.x,u.x),c=Math.max(r.x,u.x);return!(s<h)&&!(c<o)&&(o=Math.min(f.y,e.y),s=Math.max(f.y,e.y),h=Math.min(r.y,u.y),c=Math.max(r.y,u.y),!(s<h)&&!(c<o))}};y.serialVersionUID=0x51845cd552189800;v(te,ov);t(te.prototype,{interfaces_:function(){return[]},getClass:function(){return te}});so.prototype.append=function(n){this.str+=n};so.prototype.setCharAt=function(n,t){this.str=this.str.substr(0,n)+t+this.str.substr(n+1)};so.prototype.toString=function(){return this.str};wu.prototype.intValue=function(){return this.value};wu.prototype.compareTo=function(n){return this.value<n?-1:this.value>n?1:0};wu.isNaN=function(n){return Number.isNaN(n)};kc.isWhitespace=function(n){return n<=32&&0<=n||127==n};kc.toUpperCase=function(n){return n.toUpperCase()};t(f.prototype,{le:function(n){return this._hi<n._hi||this._hi===n._hi&&this._lo<=n._lo},extractSignificantDigits:function(n,t){var i=this.abs(),r=f.magnitude(i._hi),v=f.TEN.pow(r),u,h,o,c,l;(i=i.divide(v)).gt(f.TEN)?(i=i.divide(f.TEN),r+=1):i.lt(f.ONE)&&(i=i.multiply(f.TEN),r-=1);for(var y=r+1,s=new so,a=f.MAX_PRINT_DIGITS-1,e=0;e<=a;e++){if(n&&e===y&&s.append("."),u=Math.trunc(i._hi),u<0)break;if(h=!1,o=0,9<u?(h=!0,o="9"):o="0"+u,s.append(o),i=i.subtract(f.valueOf(u)).multiply(f.TEN),h&&i.selfAdd(f.TEN),c=!0,l=f.magnitude(i._hi),l<0&&Math.abs(l)>=a-e&&(c=!1),!c)break}return t[0]=r,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this._hi+this._lo},subtract:function(){var n,t;return arguments[0]instanceof f?(n=arguments[0],this.add(n.negate())):"number"==typeof arguments[0]?(t=arguments[0],this.add(-t)):void 0},equals:function(){if(1===arguments.length&&arguments[0]instanceof f){var n=arguments[0];return this._hi===n._hi&&this._lo===n._lo}},isZero:function(){return 0===this._hi&&0===this._lo},selfSubtract:function(){var n,t;return arguments[0]instanceof f?(n=arguments[0],this.isNaN()?this:this.selfAdd(-n._hi,-n._lo)):"number"==typeof arguments[0]?(t=arguments[0],this.isNaN()?this:this.selfAdd(-t,0)):void 0},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(n){return this.le(n)?this:n},selfDivide:function(){var o,s;if(1===arguments.length){if(arguments[0]instanceof f)return o=arguments[0],this.selfDivide(o._hi,o._lo);if("number"==typeof arguments[0])return s=arguments[0],this.selfDivide(s,0)}else if(2===arguments.length){var h,c,n,l,i=arguments[0],a=arguments[1],r=null,u=null,e=null,t=null;return n=this._hi/i,t=(r=(e=f.SPLIT*n)-(r=e-n))*(u=(t=f.SPLIT*i)-(u=t-i))-(l=n*i)+r*(c=i-u)+(h=n-r)*u+h*c,t=n+(e=(this._hi-l-t+this._lo-n*a)/i),this._hi=t,this._lo=n-t+e,this}},dump:function(){return"DD<"+this._hi+", "+this._lo+">"},divide:function(){var s;if(arguments[0]instanceof f){var o,h,n,c,t=arguments[0],r=null,u=null,e=null,i=null;return o=(n=this._hi/t._hi)-(r=(e=f.SPLIT*n)-(r=e-n)),i=r*(u=(i=f.SPLIT*t._hi)-(u=i-t._hi))-(c=n*t._hi)+r*(h=t._hi-u)+o*u+o*h,new f(i=n+(e=(this._hi-c-i+this._lo-n*t._lo)/t._hi),n-i+e)}if("number"==typeof arguments[0])return s=arguments[0],l.isNaN(s)?f.createNaN():f.copy(this).selfDivide(s,0)},ge:function(n){return this._hi>n._hi||this._hi===n._hi&&this._lo>=n._lo},pow:function(n){if(0===n)return f.valueOf(1);var t=new f(this),i=f.valueOf(1),r=Math.abs(n);if(1<r)for(;0<r;)r%2==1&&i.selfMultiply(t),0<(r/=2)&&(t=t.sqr());else i=t;return n<0?i.reciprocal():i},ceil:function(){if(this.isNaN())return f.NaN;var n=Math.ceil(this._hi),t=0;return n===this._hi&&(t=Math.ceil(this._lo)),new f(n,t)},compareTo:function(n){var t=n;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){var n,t;return arguments[0]instanceof f?(n=arguments[0],this.init(n),this):"number"==typeof arguments[0]?(t=arguments[0],this.init(t),this):void 0},max:function(n){return this.ge(n)?this:n},sqrt:function(){if(this.isZero())return f.valueOf(0);if(this.isNegative())return f.NaN;var n=1/Math.sqrt(this._hi),i=this._hi*n,t=f.valueOf(i),r=this.subtract(t.sqr())._hi*.5*n;return t.add(r)},selfAdd:function(){var s,c,y;if(1===arguments.length){if(arguments[0]instanceof f)return s=arguments[0],this.selfAdd(s._hi,s._lo);if("number"==typeof arguments[0]){var l=arguments[0],i=null,u=null,n=null,r=null,t=null,e=null;return r=(n=this._hi+l)-(t=n-this._hi),u=(e=(r=l-t+(this._hi-r))+this._lo)+(n-(i=n+e)),this._hi=i+u,this._lo=u+(i-this._hi),this}}else if(2===arguments.length){var o,a=arguments[0],v=arguments[1],h=(i=null,u=null,null);return n=null,r=null,t=null,e=null,n=this._hi+a,o=this._lo+v,r=n-(t=n-this._hi),h=o-(e=o-this._lo),c=(i=n+(t=(r=a-t+(this._hi-r))+o))+(t=(h=v-e+(this._lo-h))+(u=t+(n-i))),y=t+(i-c),this._hi=c,this._lo=y,this}},selfMultiply:function(){var e,h,s,l;if(1===arguments.length){if(arguments[0]instanceof f)return e=arguments[0],this.selfMultiply(e._hi,e._lo);if("number"==typeof arguments[0])return h=arguments[0],this.selfMultiply(h,0)}else if(2===arguments.length){var o,c,t=arguments[0],a=arguments[1],n=null,i=null,r=null,u=null;return n=(r=f.SPLIT*this._hi)-this._hi,u=f.SPLIT*t,n=r-n,o=this._hi-n,i=u-t,s=(r=this._hi*t)+(u=n*(i=u-i)-r+n*(c=t-i)+o*i+o*c+(this._hi*a+this._lo*t)),l=u+(n=r-s),this._hi=s,this._lo=l,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return f.NaN;var n=Math.floor(this._hi),t=0;return n===this._hi&&(t=Math.floor(this._lo)),new f(n,t)},negate:function(){return this.isNaN()?this:new f(-this._hi,-this._lo)},clone:function(){try{return null}catch(n){if(n instanceof CloneNotSupportedException)return null;throw n;}},multiply:function(){var n,t;return arguments[0]instanceof f?(n=arguments[0],n.isNaN()?f.createNaN():f.copy(this).selfMultiply(n)):"number"==typeof arguments[0]?(t=arguments[0],l.isNaN(t)?f.createNaN():f.copy(this).selfMultiply(t,0)):void 0},isNaN:function(){return l.isNaN(this._hi)},intValue:function(){return Math.trunc(this._hi)},toString:function(){var n=f.magnitude(this._hi);return-3<=n&&n<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var r=this.getSpecialNumberString(),e;if(null!==r)return r;var u=new Array(1).fill(null),n=this.extractSignificantDigits(!0,u),i=u[0]+1,t=n;return"."===n.charAt(0)?t="0"+n:i<0?t="0."+f.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(e=i-n.length,t=n+f.stringOfChar("0",e)+".0"),this.isNegative()?"-"+t:t},reciprocal:function(){var u,s,n,h,i=null,t=null,r=null,e=null,o;return u=(n=1/this._hi)-(i=(r=f.SPLIT*n)-(i=r-n)),t=(e=f.SPLIT*this._hi)-this._hi,o=n+(r=(1-(h=n*this._hi)-(e=i*(t=e-t)-h+i*(s=this._hi-t)+u*t+u*s)-n*this._lo)/this._hi),new f(o,n-o+r)},toSciNotation:function(){var t,i,r;if(this.isZero())return f.SCI_NOT_ZERO;if(t=this.getSpecialNumberString(),null!==t)return t;var u=new Array(1).fill(null),n=this.extractSignificantDigits(!1,u),e=f.SCI_NOT_EXPONENT_CHAR+u[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);return i="",1<n.length&&(i=n.substring(1)),r=n.charAt(0)+"."+i,this.isNegative()?"-"+r+e:r+e},abs:function(){return this.isNaN()?f.NaN:this.isNegative()?this.negate():new f(this)},isPositive:function(){return 0<this._hi||0===this._hi&&0<this._lo},lt:function(n){return this._hi<n._hi||this._hi===n._hi&&this._lo<n._lo},add:function(){var n,t;return arguments[0]instanceof f?(n=arguments[0],f.copy(this).selfAdd(n)):"number"==typeof arguments[0]?(t=arguments[0],f.copy(this).selfAdd(t)):void 0},init:function(){var t,n,i,r;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof f&&(n=arguments[0],this._hi=n._hi,this._lo=n._lo):2===arguments.length&&(i=arguments[0],r=arguments[1],this._hi=i,this._lo=r)},gt:function(n){return this._hi>n._hi||this._hi===n._hi&&this._lo>n._lo},isNegative:function(){return this._hi<0||0===this._hi&&this._lo<0},trunc:function(){return this.isNaN()?f.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},interfaces_:function(){return[sr,or,pc]},getClass:function(){return f}});f.sqr=function(n){return f.valueOf(n).selfMultiply(n)};f.valueOf=function(){if("string"==typeof arguments[0]){var n=arguments[0];return f.parse(n)}if("number"==typeof arguments[0])return new f(arguments[0])};f.sqrt=function(n){return f.valueOf(n).sqrt()};f.parse=function(n){for(var c,o,i,p,a,u,e,s,t=0,h=n.length;kc.isWhitespace(n.charAt(t));)t++;c=!1;t<h&&(o=n.charAt(t),"-"!==o&&"+"!==o||(t++,"-"===o&&(c=!0)));for(var r=new f,l=0,v=0,y=0;!(h<=t);)if(i=n.charAt(t),t++,kc.isDigit(i))p=i-"0",r.selfMultiply(f.TEN),r.selfAdd(p),l++;else{if("."!==i){if("e"===i||"E"===i){a=n.substring(t);try{y=wu.parseInt(a)}catch(t){throw t instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+a+" in string "+n):t;}break}throw new NumberFormatException("Unexpected character '"+i+"' at position "+t+" in string "+n);}v=l}return u=r,e=l-v-y,0===e?u=r:0<e?(s=f.TEN.pow(e),u=r.divide(s)):e<0&&(s=f.TEN.pow(-e),u=r.multiply(s)),c?u.negate():u};f.createNaN=function(){return new f(l.NaN,l.NaN)};f.copy=function(n){return new f(n)};f.magnitude=function(n){var i=Math.abs(n),r=Math.log(i)/Math.log(10),t=Math.trunc(Math.floor(r));return 10*Math.pow(10,t)<=i&&(t+=1),t};f.stringOfChar=function(n,t){for(var i=new so,r=0;r<t;r++)i.append(n);return i.toString()};f.PI=new f(3.141592653589793,12246467991473532e-32);f.TWO_PI=new f(6.283185307179586,24492935982947064e-32);f.PI_2=new f(1.5707963267948966,6123233995736766e-32);f.E=new f(2.718281828459045,14456468917292502e-32);f.NaN=new f(l.NaN,l.NaN);f.EPS=123259516440783e-46;f.SPLIT=134217729;f.MAX_PRINT_DIGITS=32;f.TEN=f.valueOf(10);f.ONE=f.valueOf(1);f.SCI_NOT_EXPONENT_CHAR="E";f.SCI_NOT_ZERO="0.0E0";t(ir.prototype,{interfaces_:function(){return[]},getClass:function(){return ir}});ir.orientationIndex=function(n,t,i){var r=ir.orientationIndexFilter(n,t,i);if(r<=1)return r;var u=f.valueOf(t.x).selfAdd(-n.x),e=f.valueOf(t.y).selfAdd(-n.y),o=f.valueOf(i.x).selfAdd(-t.x),s=f.valueOf(i.y).selfAdd(-t.y);return u.selfMultiply(s).selfSubtract(e.selfMultiply(o)).signum()};ir.signOfDet2x2=function(){if(arguments[0]instanceof f){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];return n.multiply(r).selfSubtract(t.multiply(i)).signum()}if("number"==typeof arguments[0]){var u=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],h=f.valueOf(u),c=f.valueOf(e),l=f.valueOf(o),a=f.valueOf(s);return h.multiply(a).selfSubtract(c.multiply(l)).signum()}};ir.intersection=function(n,t,i,u){var o=f.valueOf(u.y).selfSubtract(i.y).selfMultiply(f.valueOf(t.x).selfSubtract(n.x)),s=f.valueOf(u.x).selfSubtract(i.x).selfMultiply(f.valueOf(t.y).selfSubtract(n.y)),e=o.subtract(s),h=f.valueOf(u.x).selfSubtract(i.x).selfMultiply(f.valueOf(n.y).selfSubtract(i.y)),c=f.valueOf(u.y).selfSubtract(i.y).selfMultiply(f.valueOf(n.x).selfSubtract(i.x)),l=h.subtract(c).selfDivide(e).doubleValue(),a=f.valueOf(n.x).selfAdd(f.valueOf(t.x).selfSubtract(n.x).selfMultiply(l)).doubleValue(),v=f.valueOf(t.x).selfSubtract(n.x).selfMultiply(f.valueOf(n.y).selfSubtract(i.y)),y=f.valueOf(t.y).selfSubtract(n.y).selfMultiply(f.valueOf(n.x).selfSubtract(i.x)),p=v.subtract(y).selfDivide(e).doubleValue();return new r(a,f.valueOf(i.y).selfAdd(f.valueOf(u.y).selfSubtract(i.y).selfMultiply(p)).doubleValue())};ir.orientationIndexFilter=function(n,t,i){var e=null,r=(n.x-i.x)*(t.y-i.y),u=(n.y-i.y)*(t.x-i.x),f=r-u,o;if(0<r){if(u<=0)return ir.signum(f);e=r+u}else{if(!(r<0)||0<=u)return ir.signum(f);e=-r-u}return o=ir.DP_SAFE_EPSILON*e,o<=f||o<=-f?ir.signum(f):2};ir.signum=function(n){return 0<n?1:n<0?-1:0};ir.DP_SAFE_EPSILON=1e-15;t(p.prototype,{interfaces_:function(){return[]},getClass:function(){return p}});p.index=function(n,t,i){return ir.orientationIndex(n,t,i)};p.isCCW=function(n){var o=n.length-1,h,i,u,f,e,c;if(o<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var t=n[0],r=0,s=1;s<=o;s++)h=n[s],h.y>t.y&&(t=h,r=s);for(i=r;(i-=1)<0&&(i=o),n[i].equals2D(t)&&i!==r;);for(u=r;n[u=(u+1)%o].equals2D(t)&&u!==r;);return(f=n[i],e=n[u],f.equals2D(t)||e.equals2D(t)||f.equals2D(e))?!1:(c=p.index(f,t,e),0===c?f.x>e.x:0<c)};p.RIGHT=p.CLOCKWISE=-1;p.LEFT=p.COUNTERCLOCKWISE=1;p.STRAIGHT=p.COLLINEAR=0;pt.arraycopy=function(n,t,i,r,u){for(var e=0,f=t;f<t+u;f++)i[r+e]=n[f],e++};pt.getProperty=function(n){return{"line.separator":"\n"}[n]};t(yr.prototype,{getY:function(){var n=this.y/this.w;if(l.isNaN(n)||l.isInfinite(n))throw new te;return n},getX:function(){var n=this.x/this.w;if(l.isNaN(n)||l.isInfinite(n))throw new te;return n},getCoordinate:function(){var n=new r;return n.x=this.getX(),n.y=this.getY(),n},interfaces_:function(){return[]},getClass:function(){return yr}});yr.intersection=function(n,t,i,u){var o=n.y-t.y,s=t.x-n.x,h=n.x*t.y-t.x*n.y,c=i.y-u.y,a=u.x-i.x,v=i.x*u.y-u.x*i.y,y=o*a-c*s,f=(s*v-a*h)/y,e=(c*h-o*v)/y;if(l.isNaN(f)||l.isInfinite(f)||l.isNaN(e)||l.isInfinite(e))throw new te;return new r(f,e)};t(pr.prototype,{interfaces_:function(){return[]},getClass:function(){return pr}});pr.log10=function(n){var t=Math.log(n);return l.isInfinite(t)?t:l.isNaN(t)?t:t/pr.LOG_10};pr.min=function(n,t,i,r){var u=n;return t<u&&(u=t),i<u&&(u=i),r<u&&(u=r),u};pr.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return n<i?i:r<n?r:n}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var t=arguments[0],u=arguments[1],f=arguments[2];return t<u?u:f<t?f:t}};pr.wrap=function(n,t){return n<0?t- -n%t:n%t};pr.max=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],i=arguments[2];return(n=e)<t&&(n=t),n<i&&(n=i),n}if(4===arguments.length){var n,o=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];return(n=o)<r&&(n=r),n<u&&(n=u),n<f&&(n=f),n}};pr.average=function(n,t){return(n+t)/2};pr.LOG_10=Math.log(10);t(ti.prototype,{interfaces_:function(){return[]},getClass:function(){return ti}});ti.segmentToSegment=function(n,t,i,r){var u,f;if(n.equals(t))return ti.pointToSegment(n,i,r);if(i.equals(r))return ti.pointToSegment(r,n,t);if(u=!1,y.intersects(n,t,i,r))if(f=(t.x-n.x)*(r.y-i.y)-(t.y-n.y)*(r.x-i.x),0===f)u=!0;else{var s=(n.y-i.y)*(r.x-i.x)-(n.x-i.x)*(r.y-i.y),e=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/f,o=s/f;(o<0||1<o||e<0||1<e)&&(u=!0)}else u=!0;return u?pr.min(ti.pointToSegment(n,i,r),ti.pointToSegment(t,i,r),ti.pointToSegment(i,n,t),ti.pointToSegment(r,n,t)):0};ti.pointToSegment=function(n,t,i){var r,u,f;return t.x===i.x&&t.y===i.y?n.distance(t):(r=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),u=((n.x-t.x)*(i.x-t.x)+(n.y-t.y)*(i.y-t.y))/r,u<=0)?n.distance(t):1<=u?n.distance(i):(f=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/r,Math.abs(f)*Math.sqrt(r))};ti.pointToLinePerpendicular=function(n,t,i){var r=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),u=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/r;return Math.abs(u)*Math.sqrt(r)};ti.pointToSegmentString=function(n,t){var r,i,u;if(0===t.length)throw new tt("Line array must contain at least one vertex");for(r=n.distance(t[0]),i=0;i<t.length-1;i++)u=ti.pointToSegment(n,t[i],t[i+1]),u<r&&(r=u);return r};t(ft.prototype,{setOrdinate:function(){},size:function(){},getOrdinate:function(){},getCoordinate:function(){},getCoordinateCopy:function(){},getDimension:function(){},getX:function(){},expandEnvelope:function(){},copy:function(){},getY:function(){},toCoordinateArray:function(){},interfaces_:function(){return[pc]},getClass:function(){return ft}});ft.X=0;ft.Y=1;ft.Z=2;ft.M=3;t(sv.prototype,{create:function(){1===arguments.length&&(arguments[0]instanceof Array||h(arguments[0],ft))},interfaces_:function(){return[]},getClass:function(){return sv}});t(bu.prototype,{filter:function(){},interfaces_:function(){return[]},getClass:function(){return bu}});t(s.prototype,{isGeometryCollection:function(){return this.getTypeCode()===s.TYPECODE_GEOMETRYCOLLECTION},getFactory:function(){return this._factory},getGeometryN:function(){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){var n,t,i;return arguments[0]instanceof s?(n=arguments[0],null!==n&&this.equalsTopo(n)):arguments[0]instanceof Object?(t=arguments[0],!(t instanceof s))?!1:(i=t,this.equalsExact(i)):void 0},equalsExact:function(n){return this===n||this.equalsExact(n,0)},geometryChanged:function(){this.apply(s.geometryChangedFilter)},geometryChangedAction:function(){this._envelope=null},equalsNorm:function(n){return null!==n&&this.norm().equalsExact(n.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){var t,n,i,r;return 1===arguments.length?(t=arguments[0],n=t,this.getTypeCode()!==n.getTypeCode()?this.getTypeCode()-n.getTypeCode():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)):2===arguments.length?(i=arguments[0],r=arguments[1],n=i,this.getTypeCode()!==n.getTypeCode()?this.getTypeCode()-n.getTypeCode():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(i,r)):void 0},getUserData:function(){return this._userData},getSRID:function(){return this._SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(n){if(n.getTypeCode()===s.TYPECODE_GEOMETRYCOLLECTION)throw new tt("This method does not support GeometryCollection arguments");},equal:function(n,t,i){return 0===i?n.equals(t):n.distance(t)<=i},norm:function(){var n=this.copy();return n.normalize(),n},getPrecisionModel:function(){return this._factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new y(this._envelope)},setSRID:function(n){this._SRID=n},setUserData:function(n){this._userData=n},compare:function(n,t){for(var i=n.iterator(),r=t.iterator();i.hasNext()&&r.hasNext();){var f=i.next(),e=r.next(),u=f.compareTo(e);if(0!==u)return u}return i.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getTypeCode()===s.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===s.TYPECODE_MULTIPOINT||this.getTypeCode()===s.TYPECODE_MULTILINESTRING||this.getTypeCode()===s.TYPECODE_MULTIPOLYGON},interfaces_:function(){return[pc,or,sr]},getClass:function(){return s}});s.hasNonEmptyElements=function(n){for(var t=0;t<n.length;t++)if(!n[t].isEmpty())return!0;return!1};s.hasNullElements=function(n){for(var t=0;t<n.length;t++)if(null===n[t])return!0;return!1};s.serialVersionUID=0x799ea46522854c00;s.TYPECODE_POINT=0;s.TYPECODE_MULTIPOINT=1;s.TYPECODE_LINESTRING=2;s.TYPECODE_LINEARRING=3;s.TYPECODE_MULTILINESTRING=4;s.TYPECODE_POLYGON=5;s.TYPECODE_MULTIPOLYGON=6;s.TYPECODE_GEOMETRYCOLLECTION=7;s.TYPENAME_POINT="Point";s.TYPENAME_MULTIPOINT="MultiPoint";s.TYPENAME_LINESTRING="LineString";s.TYPENAME_LINEARRING="LinearRing";s.TYPENAME_MULTILINESTRING="MultiLineString";s.TYPENAME_POLYGON="Polygon";s.TYPENAME_MULTIPOLYGON="MultiPolygon";s.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection";s.geometryChangedFilter={interfaces_:function(){return[bu]},filter:function(n){n.geometryChangedAction()}};t(pe.prototype,{filter:function(){},interfaces_:function(){return[]},getClass:function(){return pe}});t(ai.prototype,{isInBoundary:function(){},interfaces_:function(){return[]},getClass:function(){return ai}});t(hv.prototype,{isInBoundary:function(n){return n%2==1},interfaces_:function(){return[ai]},getClass:function(){return hv}});t(cv.prototype,{isInBoundary:function(n){return 0<n},interfaces_:function(){return[ai]},getClass:function(){return cv}});t(lv.prototype,{isInBoundary:function(n){return 1<n},interfaces_:function(){return[ai]},getClass:function(){return lv}});t(av.prototype,{isInBoundary:function(n){return 1===n},interfaces_:function(){return[ai]},getClass:function(){return av}});ai.Mod2BoundaryNodeRule=hv;ai.EndPointBoundaryNodeRule=cv;ai.MultiValentEndPointBoundaryNodeRule=lv;ai.MonoValentEndPointBoundaryNodeRule=av;ai.MOD2_BOUNDARY_RULE=new hv;ai.ENDPOINT_BOUNDARY_RULE=new cv;ai.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new lv;ai.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new av;ai.OGC_SFS_BOUNDARY_RULE=ai.MOD2_BOUNDARY_RULE;t(w.prototype,{interfaces_:function(){return[]},getClass:function(){return w}});w.isRing=function(n){return!(n.length<4)&&!!n[0].equals2D(n[n.length-1])};w.ptNotInList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],w.indexOf(r,t)<0)return r;return null};w.scroll=function(n,t){var i=w.indexOf(t,n),r;if(i<0)return null;r=new Array(n.length).fill(null);pt.arraycopy(n,i,r,0,n.length-i);pt.arraycopy(n,0,r,n.length-i,i);pt.arraycopy(r,0,n,0,n.length)};w.equals=function(){var t,i,n;if(2===arguments.length){if(t=arguments[0],i=arguments[1],t===i)return!0;if(null===t||null===i||t.length!==i.length)return!1;for(n=0;n<t.length;n++)if(!t[n].equals(i[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];if(r===u)return!0;if(null===r||null===u||r.length!==u.length)return!1;for(n=0;n<r.length;n++)if(0!==f.compare(r[n],u[n]))return!1;return!0}};w.intersection=function(n,t){for(var r=new ni,i=0;i<n.length;i++)t.intersects(n[i])&&r.add(n[i],!0);return r.toCoordinateArray()};w.hasRepeatedPoints=function(n){for(var t=1;t<n.length;t++)if(n[t-1].equals(n[t]))return!0;return!1};w.removeRepeatedPoints=function(n){return w.hasRepeatedPoints(n)?new ni(n,!1).toCoordinateArray():n};w.reverse=function(n){for(var r,i=n.length-1,u=Math.trunc(i/2),t=0;t<=u;t++)r=n[t],n[t]=n[i-t],n[i-t]=r};w.removeNull=function(n){for(var r,u,i=0,t=0;t<n.length;t++)null!==n[t]&&i++;if(r=new Array(i).fill(null),0===i)return r;for(u=0,t=0;t<n.length;t++)null!==n[t]&&(r[u++]=n[t]);return r};w.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],i=new Array(t.length).fill(null),n=0;n<t.length;n++)i[n]=new r(t[n]);return i}if(5===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3],s=arguments[4];for(n=0;n<s;n++)e[o+n]=new r(u[f+n])}};w.isEqualReversed=function(n,t){for(var r,u,i=0;i<n.length;i++)if(r=n[i],u=t[n.length-i-1],0!==r.compareTo(u))return!1;return!0};w.envelope=function(n){for(var i=new y,t=0;t<n.length;t++)i.expandToInclude(n[t]);return i};w.toCoordinateArray=function(n){return n.toArray(w.coordArrayType)};w.atLeastNCoordinatesOrNothing=function(n,t){return t.length>=n?t:[]};w.indexOf=function(n,t){for(var i=0;i<t.length;i++)if(n.equals(t[i]))return i;return-1};w.increasingDirection=function(n){for(var r,i,t=0;t<Math.trunc(n.length/2);t++)if(r=n.length-1-t,i=n[t].compareTo(n[r]),0!==i)return i;return 1};w.compare=function(n,t){for(var r,i=0;i<n.length&&i<t.length;){if(r=n[i].compareTo(t[i]),0!==r)return r;i++}return i<t.length?-1:i<n.length?1:0};w.minCoordinate=function(n){for(var t=null,i=0;i<n.length;i++)(null===t||0<t.compareTo(n[i]))&&(t=n[i]);return t};w.extract=function(n,t,i){var r,u,e,f;if(t=pr.clamp(t,0,n.length),r=(i=pr.clamp(i,-1,n.length))-t+1,i<0&&(r=0),t>=n.length&&(r=0),i<t&&(r=0),u=new Array(r).fill(null),0===r)return u;for(e=0,f=t;f<=i;f++)u[e++]=n[f];return u};t(sw.prototype,{compare:function(n,t){return w.compare(n,t)},interfaces_:function(){return[eo]},getClass:function(){return sw}});t(hw.prototype,{compare:function(n,t){var i=n,r=t,u;return i.length<r.length?-1:i.length>r.length?1:0===i.length?0:(u=w.compare(i,r),w.isEqualReversed(i,r)?0:u)},OLDcompare:function(n,t){var i=n,r=t,u;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(0===i.length)return 0;for(var f=w.increasingDirection(i),e=w.increasingDirection(r),o=0<f?0:i.length-1,s=0<e?0:i.length-1,h=0;h<i.length;h++){if(u=i[o].compareTo(r[s]),0!==u)return u;o+=f;s+=e}return 0},interfaces_:function(){return[eo]},getClass:function(){return hw}});w.ForwardComparator=sw;w.BidirectionalComparator=hw;w.coordArrayType=new Array(0).fill(null);ls.prototype.get=function(){};ls.prototype.put=function(){};ls.prototype.size=function(){};ls.prototype.values=function(){};ls.prototype.entrySet=function(){};ak.prototype=new ls;(cw.prototype=new at).contains=function(){};(wi.prototype=new cw).contains=function(n){for(var t=0,i=this.array_.length;t<i;t++)if(this.array_[t]===n)return!0;return!1};wi.prototype.add=function(n){return!this.contains(n)&&(this.array_.push(n),!0)};wi.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0};wi.prototype.remove=function(){throw new javascript.util.OperationNotSupported;};wi.prototype.size=function(){return this.array_.length};wi.prototype.isEmpty=function(){return 0===this.array_.length};wi.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};wi.prototype.iterator=function(){return new dc(this)};dc=function(n){this.hashSet_=n;this.position_=0};dc.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new bc;return this.hashSet_.array_[this.position_++]};dc.prototype.hasNext=function(){return this.position_<this.hashSet_.size()};dc.prototype.remove=function(){throw new ev;};sf=0;(si.prototype=new ak).get=function(n){for(var i,t=this.root_;null!==t;)if(i=n.compareTo(t.key),i<0)t=t.left;else{if(!(0<i))return t.value;t=t.right}return null};si.prototype.put=function(n,t){var r,f,i,e,u;if(null===this.root_)return this.root_={key:n,value:t,left:null,right:null,parent:null,color:sf,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;i=this.root_;do if(r=i,(f=n.compareTo(i.key))<0)i=i.left;else{if(!(0<f))return e=i.value,i.value=t,e;i=i.right}while(null!==i);return u={key:n,left:null,right:null,value:t,parent:r,color:sf,getValue:function(){return this.value},getKey:function(){return this.key}},f<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};si.prototype.fixAfterInsertion=function(n){for(n.color=1;null!=n&&n!=this.root_&&1==n.parent.color;){var t;vt(n)==lw(vt(vt(n)))?1==vk(t=yk(vt(vt(n))))?(ie(vt(n),sf),ie(t,sf),ie(vt(vt(n)),1),n=vt(vt(n))):(n==yk(vt(n))&&(n=vt(n),this.rotateLeft(n)),ie(vt(n),sf),ie(vt(vt(n)),1),this.rotateRight(vt(vt(n)))):1==vk(t=lw(vt(vt(n))))?(ie(vt(n),sf),ie(t,sf),ie(vt(vt(n)),1),n=vt(vt(n))):(n==lw(vt(n))&&(n=vt(n),this.rotateRight(n)),ie(vt(n),sf),ie(vt(vt(n)),1),this.rotateLeft(vt(vt(n))))}this.root_.color=sf};si.prototype.values=function(){var t=new u,n=this.getFirstEntry();if(null!==n)for(t.add(n.value);null!==(n=si.successor(n));)t.add(n.value);return t};si.prototype.entrySet=function(){var t=new wi,n=this.getFirstEntry();if(null!==n)for(t.add(n);null!==(n=si.successor(n));)t.add(n);return t};si.prototype.rotateLeft=function(n){if(null!=n){var t=n.right;n.right=t.left;null!=t.left&&(t.left.parent=n);t.parent=n.parent;null==n.parent?this.root_=t:n.parent.left==n?n.parent.left=t:n.parent.right=t;(t.left=n).parent=t}};si.prototype.rotateRight=function(n){if(null!=n){var t=n.left;n.left=t.right;null!=t.right&&(t.right.parent=n);t.parent=n.parent;null==n.parent?this.root_=t:n.parent.right==n?n.parent.right=t:n.parent.left=t;(t.right=n).parent=t}};si.prototype.getFirstEntry=function(){var n=this.root_;if(null!=n)for(;null!=n.left;)n=n.left;return n};si.successor=function(n){var t,i;if(null===n)return null;if(null!==n.right){for(t=n.right;null!==t.left;)t=t.left;return t}for(t=n.parent,i=n;null!==t&&i===t.right;)t=(i=t).parent;return t};si.prototype.size=function(){return this.size_};t(gc.prototype,{interfaces_:function(){return[]},getClass:function(){return gc}});pk.prototype=new cw;(hr.prototype=new pk).contains=function(n){for(var t=0,i=this.array_.length;t<i;t++)if(0===this.array_[t].compareTo(n))return!0;return!1};hr.prototype.add=function(n){if(this.contains(n))return!1;for(var t=0,i=this.array_.length;t<i;t++)if(1===this.array_[t].compareTo(n))return this.array_.splice(t,0,n),!0;return this.array_.push(n),!0};hr.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0};hr.prototype.remove=function(){throw new ev;};hr.prototype.size=function(){return this.array_.length};hr.prototype.isEmpty=function(){return 0===this.array_.length};hr.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};hr.prototype.iterator=function(){return new nl(this)};nl=function(n){this.treeSet_=n;this.position_=0};nl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new bc;return this.treeSet_.array_[this.position_++]};nl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};nl.prototype.remove=function(){throw new ev;};re.sort=function(){var t,u,f,i,n=arguments[0],r;if(1===arguments.length)return i=function(n,t){return n.compareTo(t)},void n.sort(i);if(2===arguments.length)f=arguments[1],i=function(n,t){return f.compare(n,t)},n.sort(i);else{if(3===arguments.length){for((u=n.slice(arguments[1],arguments[2])).sort(),r=n.slice(0,arguments[1]).concat(u,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<r.length;t++)n.push(r[t]);return}if(4===arguments.length){for(u=n.slice(arguments[1],arguments[2]),f=arguments[3],i=function(n,t){return f.compare(n,t)},u.sort(i),r=n.slice(0,arguments[1]).concat(u,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<r.length;t++)n.push(r[t]);return}}};re.asList=function(n){for(var i=new u,t=0,r=n.length;t<r;t++)i.add(n[t]);return i};t(e.prototype,{interfaces_:function(){return[]},getClass:function(){return e}});e.toDimensionSymbol=function(n){switch(n){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new tt("Unknown dimension value: "+n);};e.toDimensionValue=function(n){switch(kc.toUpperCase(n)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new tt("Unknown dimension symbol: "+n);};e.P=0;e.L=1;e.A=2;e.FALSE=-1;e.TRUE=-2;e.DONTCARE=-3;e.SYM_FALSE="F";e.SYM_TRUE="T";e.SYM_DONTCARE="*";e.SYM_P="0";e.SYM_L="1";e.SYM_A="2";t(ue.prototype,{filter:function(){},interfaces_:function(){return[]},getClass:function(){return ue}});t(ho.prototype,{filter:function(){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ho}});v(g,s);t(g.prototype,{computeEnvelopeInternal:function(){for(var t=new y,n=0;n<this._geometries.length;n++)t.expandToInclude(this._geometries[n].getEnvelopeInternal());return t},getGeometryN:function(n){return this._geometries[n]},getCoordinates:function(){for(var i,n,r=new Array(this.getNumPoints()).fill(null),u=-1,t=0;t<this._geometries.length;t++)for(i=this._geometries[t].getCoordinates(),n=0;n<i.length;n++)r[++u]=i[n];return r},getArea:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getArea();return t},equalsExact:function(){var t,r,i,n;if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){if((t=arguments[0],r=arguments[1],!this.isEquivalentClass(t))||(i=t,this._geometries.length!==i._geometries.length))return!1;for(n=0;n<this._geometries.length;n++)if(!this._geometries[n].equalsExact(i._geometries[n],r))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var n=0;n<this._geometries.length;n++)this._geometries[n].normalize();re.sort(this._geometries)},getCoordinate:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var n=e.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,this._geometries[t].getBoundaryDimension());return n},getTypeCode:function(){return s.TYPECODE_GEOMETRYCOLLECTION},getDimension:function(){for(var n=e.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,this._geometries[t].getDimension());return n},getLength:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getLength();return t},getNumPoints:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getNumPoints();return t},getNumGeometries:function(){return this._geometries.length},reverse:function(){for(var i=this._geometries.length,t=new Array(i).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},compareToSameClass:function(){if(1===arguments.length){var f=arguments[0],e=new hr(re.asList(this._geometries)),o=new hr(re.asList(f._geometries));return this.compare(e,o)}if(2===arguments.length){for(var s=arguments[0],h=arguments[1],t=s,i=this.getNumGeometries(),r=t.getNumGeometries(),n=0;n<i&&n<r;){var c=this.getGeometryN(n),l=t.getGeometryN(n),u=c.compareToSameClass(l,h);if(0!==u)return u;n++}return n<i?1:n<r?-1:0}},apply:function(){var u,n,t,i,r;if(h(arguments[0],pe))for(u=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(u);else if(h(arguments[0],ho)){if(t=arguments[0],0===this._geometries.length)return null;for(n=0;n<this._geometries.length&&(this._geometries[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(h(arguments[0],ue))for(i=arguments[0],i.filter(this),n=0;n<this._geometries.length;n++)this._geometries[n].apply(i);else if(h(arguments[0],bu))for(r=arguments[0],r.filter(this),n=0;n<this._geometries.length;n++)this._geometries[n].apply(r)},getBoundary:function(){return this.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null},getGeometryType:function(){return s.TYPENAME_GEOMETRYCOLLECTION},copy:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new g(t,this._factory)},isEmpty:function(){for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return g}});g.serialVersionUID=-0x4f07bcb1f857d800;v(rr,g);t(rr.prototype,{equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){var n=arguments[0],t=arguments[1];return!!this.isEquivalentClass(n)&&g.prototype.equalsExact.call(this,n,t)}return g.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?e.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isClosed())return!1;return!0},getTypeCode:function(){return s.TYPECODE_MULTILINESTRING},getDimension:function(){return 1},reverse:function(){for(var t=this._geometries.length,i=new Array(t).fill(null),n=0;n<this._geometries.length;n++)i[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(i)},getBoundary:function(){return new we(this).getBoundary()},getGeometryType:function(){return s.TYPENAME_MULTILINESTRING},copy:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new rr(t,this._factory)},interfaces_:function(){return[gc]},getClass:function(){return rr}});rr.serialVersionUID=0x7155d2ab4afa8000;t(we.prototype,{boundaryMultiLineString:function(n){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(n);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},getBoundary:function(){return this._geom instanceof k?this.boundaryLineString(this._geom):this._geom instanceof rr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},boundaryLineString:function(n){return this._geom.isEmpty()?this.getEmptyMultiPoint():n.isClosed()?this._bnRule.isInBoundary(2)?n.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([n.getStartPoint(),n.getEndPoint()])},getEmptyMultiPoint:function(){return this._geomFact.createMultiPoint()},computeBoundaryCoordinates:function(n){var e=new u,i,t,r,f,o;for(this._endpointMap=new si,i=0;i<n.getNumGeometries();i++)t=n.getGeometryN(i),0!==t.getNumPoints()&&(this.addEndpoint(t.getCoordinateN(0)),this.addEndpoint(t.getCoordinateN(t.getNumPoints()-1)));for(r=this._endpointMap.entrySet().iterator();r.hasNext();)f=r.next(),o=f.getValue().count,this._bnRule.isInBoundary(o)&&e.add(f.getKey());return w.toCoordinateArray(e)},addEndpoint:function(n){var t=this._endpointMap.get(n);null===t&&(t=new aw,this._endpointMap.put(n,t));t.count++},interfaces_:function(){return[]},getClass:function(){return we}});we.getBoundary=function(){return 1===arguments.length?new we(arguments[0]).getBoundary():2===arguments.length?new we(arguments[0],arguments[1]).getBoundary():void 0};t(aw.prototype,{interfaces_:function(){return[]},getClass:function(){return aw}});t(vv.prototype,{interfaces_:function(){return[]},getClass:function(){return vv}});vv.ofLine=function(n){var f=n.size(),i,t;if(f<=1)return 0;i=0;t=new r;n.getCoordinate(0,t);for(var e=t.x,o=t.y,u=1;u<f;u++){n.getCoordinate(u,t);var s=t.x,h=t.y,c=s-e,l=h-o;i+=Math.sqrt(c*c+l*l);e=s;o=h}return i};t(ru.prototype,{interfaces_:function(){return[]},getClass:function(){return ru}});ru.chars=function(n,t){for(var r=new Array(t).fill(null),i=0;i<t;i++)r[i]=n;return new String(r)};ru.getStackTrace=function(){if(1===arguments.length){var n=arguments[0],t=new cg,u=new sg(t);return n.printStackTrace(u),t.toString()}if(2===arguments.length){for(var f=arguments[0],e=arguments[1],i="",o=new ag(new hg(ru.getStackTrace(f))),r=0;r<e;r++)try{i+=o.readLine()+ru.NEWLINE}catch(n){if(!(n instanceof lg))throw n;c.shouldNeverReachHere()}return i}};ru.split=function(n,t){for(var s,o,r,h=t.length,f=new u,i=""+n,e=i.indexOf(t);0<=e;)s=i.substring(0,e),f.add(s),e=(i=i.substring(e+h)).indexOf(t);for(0<i.length&&f.add(i),o=new Array(f.size()).fill(null),r=0;r<o.length;r++)o[r]=f.get(r);return o};ru.toString=function(){if(1===arguments.length&&"number"==typeof arguments[0]){var n=arguments[0];return ru.SIMPLE_ORDINATE_FORMAT.format(n)}};ru.spaces=function(n){return ru.chars(" ",n)};ru.NEWLINE=pt.getProperty("line.separator");ru.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#");co.prototype.append=function(n){this.str+=n};co.prototype.setCharAt=function(n,t){this.str=this.str.substr(0,n)+t+this.str.substr(n+1)};co.prototype.toString=function(){return this.str};t(ui.prototype,{interfaces_:function(){return[]},getClass:function(){return ui}});ui.copyCoord=function(n,t,i,r){for(var f=Math.min(n.getDimension(),i.getDimension()),u=0;u<f;u++)i.setOrdinate(r,u,n.getOrdinate(t,u))};ui.isRing=function(n){var t=n.size();return 0===t||!(t<=3)&&n.getOrdinate(0,ft.X)===n.getOrdinate(t-1,ft.X)&&n.getOrdinate(0,ft.Y)===n.getOrdinate(t-1,ft.Y)};ui.isEqual=function(n,t){var u=n.size(),f,i,r,e,o;if(u!==t.size())return!1;for(f=Math.min(n.getDimension(),t.getDimension()),i=0;i<u;i++)for(r=0;r<f;r++)if(e=n.getOrdinate(i,r),o=t.getOrdinate(i,r),n.getOrdinate(i,r)!==t.getOrdinate(i,r)&&(!l.isNaN(e)||!l.isNaN(o)))return!1;return!0};ui.extend=function(n,t,i){var f=n.create(i,t.getDimension()),r=t.size(),u;if(ui.copy(t,0,f,0,r),0<r)for(u=r;u<i;u++)ui.copy(t,r-1,f,u,1);return f};ui.reverse=function(n){for(var i=n.size()-1,r=Math.trunc(i/2),t=0;t<=r;t++)ui.swap(n,t,i-t)};ui.swap=function(n,t,i){var r,u;if(t===i)return null;for(r=0;r<n.getDimension();r++)u=n.getOrdinate(t,r),n.setOrdinate(t,r,n.getOrdinate(i,r)),n.setOrdinate(i,r,u)};ui.copy=function(n,t,i,r,u){for(var f=0;f<u;f++)ui.copyCoord(n,t+f,i,r+f)};ui.toString=function(){var r,u,f,n,t,i;if(1===arguments.length&&h(arguments[0],ft)){if(r=arguments[0],u=r.size(),0===u)return"()";for(f=r.getDimension(),n=new co,n.append("("),t=0;t<u;t++)for(0<t&&n.append(" "),i=0;i<f;i++)0<i&&n.append(","),n.append(ru.toString(r.getOrdinate(t,i)));return n.append(")"),n.toString()}};ui.ensureValidRing=function(n,t){var i=t.size();return 0===i?t:i<=3?ui.createClosedRing(n,t,4):t.getOrdinate(0,ft.X)===t.getOrdinate(i-1,ft.X)&&t.getOrdinate(0,ft.Y)===t.getOrdinate(i-1,ft.Y)?t:ui.createClosedRing(n,t,i+1)};ui.createClosedRing=function(n,t,i){var u=n.create(i,t.getDimension()),f=t.size(),r;for(ui.copy(t,0,u,0,f),r=f;r<i;r++)ui.copy(t,0,u,r,1);return u};v(k,s);t(k.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new y:this._points.expandEnvelope(new y)},isRing:function(){return this.isClosed()&&this.isSimple()},getCoordinates:function(){return this._points.toCoordinateArray()},equalsExact:function(){var t,r,i,n;if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){if((t=arguments[0],r=arguments[1],!this.isEquivalentClass(t))||(i=t,this._points.size()!==i._points.size()))return!1;for(n=0;n<this._points.size();n++)if(!this.equal(this._points.getCoordinate(n),i._points.getCoordinate(n),r))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t,i,n=0;n<Math.trunc(this._points.size()/2);n++)if(t=this._points.size()-1-n,!this._points.getCoordinate(n).equals(this._points.getCoordinate(t)))return 0<this._points.getCoordinate(n).compareTo(this._points.getCoordinate(t))&&(i=this._points.copy(),ui.reverse(i),this._points=i),null},getCoordinate:function(){return this.isEmpty()?null:this._points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?e.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getTypeCode:function(){return s.TYPECODE_LINESTRING},getDimension:function(){return 1},getLength:function(){return vv.ofLine(this._points)},getNumPoints:function(){return this._points.size()},reverse:function(){var n=this._points.copy();return ui.reverse(n),this.getFactory().createLineString(n)},compareToSameClass:function(){var r;if(1===arguments.length){for(var n=arguments[0],t=0,i=0;t<this._points.size()&&i<n._points.size();){if(r=this._points.getCoordinate(t).compareTo(n._points.getCoordinate(i)),0!==r)return r;t++;i++}return t<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length)return n=arguments[0],arguments[1].compare(this._points,n._points)},apply:function(){var i,n,t;if(h(arguments[0],pe))for(i=arguments[0],n=0;n<this._points.size();n++)i.filter(this._points.getCoordinate(n));else if(h(arguments[0],ho)){if(t=arguments[0],0===this._points.size())return null;for(n=0;n<this._points.size()&&(t.filter(this._points,n),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else h(arguments[0],ue)?arguments[0].filter(this):h(arguments[0],bu)&&arguments[0].filter(this)},getBoundary:function(){return new we(this).getBoundary()},isEquivalentClass:function(n){return n instanceof k},getCoordinateN:function(n){return this._points.getCoordinate(n)},getGeometryType:function(){return s.TYPENAME_LINESTRING},copy:function(){return new k(this._points.copy(),this._factory)},getCoordinateSequence:function(){return this._points},isEmpty:function(){return 0===this._points.size()},init:function(n){if(null===n&&(n=this.getFactory().getCoordinateSequenceFactory().create([])),1===n.size())throw new tt("Invalid number of points in LineString (found "+n.size()+" - must be 0 or >= 2)");this._points=n},isCoordinate:function(n){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(n))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(n){return this.getFactory().createPoint(this._points.getCoordinate(n))},interfaces_:function(){return[gc]},getClass:function(){return k}});k.serialVersionUID=0x2b2b51ba435c8e00;t(yv.prototype,{interfaces_:function(){return[]},getClass:function(){return yv}});v(dt,s);t(dt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new y;var n=new y;return n.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),n},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){var n=arguments[0],t=arguments[1];return!!this.isEquivalentClass(n)&&(!(!this.isEmpty()||!n.isEmpty())||this.isEmpty()===n.isEmpty()&&this.equal(n.getCoordinate(),this.getCoordinate(),t))}return s.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return e.FALSE},getTypeCode:function(){return s.TYPECODE_POINT},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var n=arguments[0];return this.getCoordinate().compareTo(n.getCoordinate())}if(2===arguments.length)return n=arguments[0],arguments[1].compare(this._coordinates,n._coordinates)},apply:function(){var t,n;if(h(arguments[0],pe)){if(t=arguments[0],this.isEmpty())return null;t.filter(this.getCoordinate())}else if(h(arguments[0],ho)){if(n=arguments[0],this.isEmpty())return null;n.filter(this._coordinates,0);n.isGeometryChanged()&&this.geometryChanged()}else h(arguments[0],ue)?arguments[0].filter(this):h(arguments[0],bu)&&arguments[0].filter(this)},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return s.TYPENAME_POINT},copy:function(){return new dt(this._coordinates.copy(),this._factory)},getCoordinateSequence:function(){return this._coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this._coordinates.size()},init:function(n){null===n&&(n=this.getFactory().getCoordinateSequenceFactory().create([]));c.isTrue(n.size()<=1);this._coordinates=n},isSimple:function(){return!0},interfaces_:function(){return[yv]},getClass:function(){return dt}});dt.serialVersionUID=0x44077bad161cbc00;t(lo.prototype,{interfaces_:function(){return[]},getClass:function(){return lo}});lo.ofRing=function(){var n,t;return arguments[0]instanceof Array?(n=arguments[0],Math.abs(lo.ofRingSigned(n))):h(arguments[0],ft)?(t=arguments[0],Math.abs(lo.ofRingSigned(t))):void 0};lo.ofRingSigned=function(){var t,c,l,e,s;if(arguments[0]instanceof Array){if(t=arguments[0],t.length<3)return 0;for(var f=0,o=t[0].x,n=1;n<t.length-1;n++)c=t[n].x-o,l=t[n+1].y,f+=c*(t[n-1].y-l);return f/2}if(h(arguments[0],ft)){if(e=arguments[0],s=e.size(),s<3)return 0;var a=new r,u=new r,i=new r;for(e.getCoordinate(0,u),e.getCoordinate(1,i),o=u.x,i.x-=o,f=0,n=1;n<s-1;n++)a.y=u.y,u.x=i.x,u.y=i.y,e.getCoordinate(n+1,i),i.x-=o,f+=u.x*(a.y-i.y);return f/2}};t(fe.prototype,{interfaces_:function(){return[]},getClass:function(){return fe}});v(st,s);t(st.prototype,{computeEnvelopeInternal:function(){return this._shell.getEnvelopeInternal()},getCoordinates:function(){var n,u,t;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),f=-1,e=this._shell.getCoordinates(),r=0;r<e.length;r++)i[++f]=e[r];for(n=0;n<this._holes.length;n++)for(u=this._holes[n].getCoordinates(),t=0;t<u.length;t++)i[++f]=u[t];return i},getArea:function(){var t=0,n;for(t+=lo.ofRing(this._shell.getCoordinateSequence()),n=0;n<this._holes.length;n++)t-=lo.ofRing(this._holes[n].getCoordinateSequence());return t},isRectangle:function(){var f,e,r,u;if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),n=0;n<5;n++)if((r=t.getX(n))!==i.getMinX()&&r!==i.getMaxX()||(u=t.getY(n))!==i.getMinY()&&u!==i.getMaxY())return!1;for(f=t.getX(0),e=t.getY(0),n=1;n<=4;n++){if((r=t.getX(n))!==f==((u=t.getY(n))!==e))return!1;f=r;e=u}return!0},equalsExact:function(){var t,i,n;if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){if(t=arguments[0],i=arguments[1],!this.isEquivalentClass(t))return!1;var r=t,u=this._shell,f=r._shell;if(!u.equalsExact(f,i)||this._holes.length!==r._holes.length)return!1;for(n=0;n<this._holes.length;n++)if(!this._holes[n].equalsExact(r._holes[n],i))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},normalize:function(){var i,n,r,t,u;if(0===arguments.length){for(this.normalize(this._shell,!0),i=0;i<this._holes.length;i++)this.normalize(this._holes[i],!1);re.sort(this._holes)}else if(2===arguments.length){if(n=arguments[0],r=arguments[1],n.isEmpty())return null;t=new Array(n.getCoordinates().length-1).fill(null);pt.arraycopy(n.getCoordinates(),0,t,0,t.length);u=w.minCoordinate(n.getCoordinates());w.scroll(t,u);pt.arraycopy(t,0,n.getCoordinates(),0,t.length);n.getCoordinates()[t.length]=t[0];p.isCCW(n.getCoordinates())===r&&w.reverse(n.getCoordinates())}},getCoordinate:function(){return this._shell.getCoordinate()},getNumInteriorRing:function(){return this._holes.length},getBoundaryDimension:function(){return 1},getTypeCode:function(){return s.TYPECODE_POLYGON},getDimension:function(){return 2},getLength:function(){var t=0,n;for(t+=this._shell.getLength(),n=0;n<this._holes.length;n++)t+=this._holes[n].getLength();return t},getNumPoints:function(){for(var t=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)t+=this._holes[n].getNumPoints();return t},reverse:function(){var t=this.copy(),n;for(t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t._holes[n]=this._holes[n].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var h=arguments[0],t=this._shell,i=h._shell;return t.compareToSameClass(i)}if(2===arguments.length){var c=arguments[0],u=arguments[1],r=c,f=(t=this._shell,i=r._shell,t.compareToSameClass(i,u));if(0!==f)return f;for(var e=this.getNumInteriorRing(),o=r.getNumInteriorRing(),n=0;n<e&&n<o;){var l=this.getInteriorRingN(n),a=r.getInteriorRingN(n),s=l.compareToSameClass(a,u);if(0!==s)return s;n++}return n<e?1:n<o?-1:0}},apply:function(){var r,n,t,i;if(h(arguments[0],pe))for(r=arguments[0],this._shell.apply(r),n=0;n<this._holes.length;n++)this._holes[n].apply(r);else if(h(arguments[0],ho)){if(t=arguments[0],this._shell.apply(t),!t.isDone())for(n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(h(arguments[0],ue))arguments[0].filter(this);else if(h(arguments[0],bu))for(i=arguments[0],i.filter(this),this._shell.apply(i),n=0;n<this._holes.length;n++)this._holes[n].apply(i)},getBoundary:function(){var n,t;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new Array(this._holes.length+1).fill(null),n[0]=this._shell,t=0;t<this._holes.length;t++)n[t+1]=this._holes[t];return n.length<=1?this.getFactory().createLinearRing(n[0].getCoordinateSequence()):this.getFactory().createMultiLineString(n)},getGeometryType:function(){return s.TYPENAME_POLYGON},copy:function(){for(var i=this._shell.copy(),t=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t[n]=this._holes[n].copy();return new st(i,t,this._factory)},getExteriorRing:function(){return this._shell},isEmpty:function(){return this._shell.isEmpty()},getInteriorRingN:function(n){return this._holes[n]},interfaces_:function(){return[fe]},getClass:function(){return st}});st.serialVersionUID=-0x307ffefd8dc97200;v(wr,g);t(wr.prototype,{isValid:function(){return!0},equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){var n=arguments[0],t=arguments[1];return!!this.isEquivalentClass(n)&&g.prototype.equalsExact.call(this,n,t)}return g.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var n=arguments[0];return this._geometries[n].getCoordinate()}return g.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return e.FALSE},getTypeCode:function(){return s.TYPECODE_MULTIPOINT},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return s.TYPENAME_MULTIPOINT},copy:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new wr(t,this._factory)},interfaces_:function(){return[yv]},getClass:function(){return wr}});wr.serialVersionUID=-0x6fb1ed4162e0fc00;v(ii,k);t(ii.prototype,{getBoundaryDimension:function(){return e.FALSE},isClosed:function(){return!!this.isEmpty()||k.prototype.isClosed.call(this)},getTypeCode:function(){return s.TYPECODE_LINEARRING},reverse:function(){var n=this._points.copy();return ui.reverse(n),this.getFactory().createLinearRing(n)},validateConstruction:function(){if(!this.isEmpty()&&!k.prototype.isClosed.call(this))throw new tt("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<ii.MINIMUM_VALID_SIZE)throw new tt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)");},getGeometryType:function(){return s.TYPENAME_LINEARRING},copy:function(){return new ii(this._points.copy(),this._factory)},interfaces_:function(){return[]},getClass:function(){return ii}});ii.MINIMUM_VALID_SIZE=4;ii.serialVersionUID=-0x3b229e262367a600;v(vi,g);t(vi.prototype,{equalsExact:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof s){var n=arguments[0],t=arguments[1];return!!this.isEquivalentClass(n)&&g.prototype.equalsExact.call(this,n,t)}return g.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getTypeCode:function(){return s.TYPECODE_MULTIPOLYGON},getDimension:function(){return 2},reverse:function(){for(var i=this._geometries.length,t=new Array(i).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},getBoundary:function(){var n,t,r,i,f;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new u,t=0;t<this._geometries.length;t++)for(r=this._geometries[t].getBoundary(),i=0;i<r.getNumGeometries();i++)n.add(r.getGeometryN(i));return f=new Array(n.size()).fill(null),this.getFactory().createMultiLineString(n.toArray(f))},getGeometryType:function(){return s.TYPENAME_MULTIPOLYGON},copy:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new vi(t,this._factory)},interfaces_:function(){return[fe]},getClass:function(){return vi}});vi.serialVersionUID=-0x7a5aa1369171980;t(br.prototype,{setCopyUserData:function(n){this._isUserDataCopied=n},edit:function(n,t){if(null===n)return null;var i=this.editInternal(n,t);return this._isUserDataCopied&&i.setUserData(n.getUserData()),i},editInternal:function(n,t){return null===this._factory&&(this._factory=n.getFactory()),n instanceof g?this.editGeometryCollection(n,t):n instanceof st?this.editPolygon(n,t):n instanceof dt?t.edit(n,this._factory):n instanceof k?t.edit(n,this._factory):(c.shouldNeverReachHere("Unsupported Geometry class: "+n.getClass().getName()),null)},editGeometryCollection:function(n,t){for(var f,i=t.edit(n,this._factory),r=new u,e=0;e<i.getNumGeometries();e++)f=this.edit(i.getGeometryN(e),t),null===f||f.isEmpty()||r.add(f);return i.getClass()===wr?this._factory.createMultiPoint(r.toArray([])):i.getClass()===rr?this._factory.createMultiLineString(r.toArray([])):i.getClass()===vi?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},editPolygon:function(n,t){var i=t.edit(n,this._factory),r,o,f,e;if(null===i&&(i=this._factory.createPolygon()),i.isEmpty())return i;if(r=this.edit(i.getExteriorRing(),t),null===r||r.isEmpty())return this._factory.createPolygon();for(o=new u,f=0;f<i.getNumInteriorRing();f++)e=this.edit(i.getInteriorRingN(f),t),null===e||e.isEmpty()||o.add(e);return this._factory.createPolygon(r,o.toArray([]))},interfaces_:function(){return[]},getClass:function(){return br}});br.GeometryEditorOperation=pv;t(vw.prototype,{edit:function(n){return n},interfaces_:function(){return[pv]},getClass:function(){return vw}});t(yw.prototype,{edit:function(n,t){var i=this.edit(n.getCoordinates(),n);return n instanceof ii?null===i?t.createLinearRing():t.createLinearRing(i):n instanceof k?null===i?t.createLineString():t.createLineString(i):n instanceof dt?null===i||0===i.length?t.createPoint():t.createPoint(i[0]):n},interfaces_:function(){return[pv]},getClass:function(){return yw}});t(pw.prototype,{edit:function(n,t){return n instanceof ii?t.createLinearRing(this.edit(n.getCoordinateSequence(),n)):n instanceof k?t.createLineString(this.edit(n.getCoordinateSequence(),n)):n instanceof dt?t.createPoint(this.edit(n.getCoordinateSequence(),n)):n},interfaces_:function(){return[pv]},getClass:function(){return pw}});br.NoOpGeometryOperation=vw;br.CoordinateOperation=yw;br.CoordinateSequenceOperation=pw;t(cu.prototype,{setOrdinate:function(n,t,i){switch(t){case ft.X:this._coordinates[n].x=i;break;case ft.Y:this._coordinates[n].y=i;break;case ft.Z:this._coordinates[n].z=i;break;default:throw new tt("invalid ordinateIndex");}},size:function(){return this._coordinates.length},getOrdinate:function(n,t){switch(t){case ft.X:return this._coordinates[n].x;case ft.Y:return this._coordinates[n].y;case ft.Z:return this._coordinates[n].z}return l.NaN},getCoordinate:function(){var i,n,t;if(1===arguments.length)return i=arguments[0],this._coordinates[i];2===arguments.length&&(n=arguments[0],t=arguments[1],t.x=this._coordinates[n].x,t.y=this._coordinates[n].y,t.z=this._coordinates[n].z)},getCoordinateCopy:function(n){return new r(this._coordinates[n])},getDimension:function(){return this._dimension},getX:function(n){return this._coordinates[n].x},expandEnvelope:function(n){for(var t=0;t<this._coordinates.length;t++)n.expandToInclude(this._coordinates[t]);return n},copy:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=this._coordinates[n].copy();return new cu(t,this._dimension)},toString:function(){var n,t;if(0<this._coordinates.length){for(n=new co(17*this._coordinates.length),n.append("("),n.append(this._coordinates[0]),t=1;t<this._coordinates.length;t++)n.append(", "),n.append(this._coordinates[t]);return n.append(")"),n.toString()}return"()"},getY:function(n){return this._coordinates[n].y},toCoordinateArray:function(){return this._coordinates},interfaces_:function(){return[ft,sr]},getClass:function(){return cu}});cu.serialVersionUID=-0xcb44a778db18e00;t(be.prototype,{readResolve:function(){return be.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array||h(arguments[0],ft))return new cu(arguments[0])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];return 3<n&&(n=3),n<2?new cu(t):new cu(t,n)}},interfaces_:function(){return[sv,sr]},getClass:function(){return be}});be.instance=function(){return be.instanceObject};be.serialVersionUID=-0x38e49fa6cf6f2e00;be.instanceObject=new be;wk=Object.defineProperty;bk=function(n,t){function i(n){if(!this||this.constructor!==i)return new i(n);this._keys=[];this._values=[];this._itp=[];this.objectOnly=t;n&&function(n){this.add?n.forEach(this.add,this):n.forEach(function(n){this.set(n[0],n[1])},this)}.call(this,n)}return t||wk(n,"size",{get:vg}),(n.constructor=i).prototype=n,i}({"delete":function(n){return this.has(n)&&(this._keys.splice(hf,1),this._values.splice(hf,1),this._itp.forEach(function(n){hf<n[0]&&n[0]--})),-1<hf},has:function(n){return function(n,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(hf=n.length;hf--&&(i=n[hf],r=t,i!==r&&(i==i||r==r)););else hf=n.indexOf(t);var i,r;return-1<hf}.call(this,this._keys,n)},get:function(n){if(this.has(n))return this._values[hf]},set:function(n,t){return this.has(n)?this._values[hf]=t:this._values[this._keys.push(n)-1]=t,this},keys:function(){return ww(this._itp,this._keys)},values:function(){return ww(this._itp,this._values)},entries:function(){return ww(this._itp,this._keys,this._values)},forEach:function(n,t){for(var i,r=this.entries();;){if(i=r.next(),i.done)break;n.call(t,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});kk="undefined"!=typeof Map&&Map.prototype.values?Map:bk;(ke.prototype=new ls).get=function(n){return this.map_.get(n)||null};ke.prototype.put=function(n,t){return this.map_.set(n,t),t};ke.prototype.values=function(){for(var t=new u,i=this.map_.values(),n=i.next();!n.done;)t.add(n.value),n=i.next();return t};ke.prototype.entrySet=function(){var n=new wi;return this.map_.entries().forEach(function(t){return n.add(t)}),n};ke.prototype.size=function(){return this.map_.size()};t(ht.prototype,{equals:function(n){if(!(n instanceof ht))return!1;var t=n;return this._modelType===t._modelType&&this._scale===t._scale},compareTo:function(n){var t=n,i=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new wu(i).compareTo(new wu(r))},getScale:function(){return this._scale},isFloating:function(){return this._modelType===ht.FLOATING||this._modelType===ht.FLOATING_SINGLE},getType:function(){return this._modelType},toString:function(){var n="UNKNOWN";return this._modelType===ht.FLOATING?n="Floating":this._modelType===ht.FLOATING_SINGLE?n="Floating-Single":this._modelType===ht.FIXED&&(n="Fixed (Scale="+this.getScale()+")"),n},makePrecise:function(){var n,t;if("number"==typeof arguments[0])return n=arguments[0],l.isNaN(n)?n:this._modelType===ht.FLOATING_SINGLE?n:this._modelType===ht.FIXED?Math.round(n*this._scale)/this._scale:n;if(arguments[0]instanceof r){if(t=arguments[0],this._modelType===ht.FLOATING)return null;t.x=this.makePrecise(t.x);t.y=this.makePrecise(t.y)}},getMaximumSignificantDigits:function(){var n=16;return this._modelType===ht.FLOATING?n=16:this._modelType===ht.FLOATING_SINGLE?n=6:this._modelType===ht.FIXED&&(n=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),n},setScale:function(n){this._scale=Math.abs(n)},interfaces_:function(){return[sr,or]},getClass:function(){return ht}});ht.mostPrecise=function(n,t){return 0<=n.compareTo(t)?n:t};t(cf.prototype,{readResolve:function(){return cf.nameToTypeMap.get(this._name)},toString:function(){return this._name},interfaces_:function(){return[sr]},getClass:function(){return cf}});cf.serialVersionUID=-552860263173159e4;cf.nameToTypeMap=new ke;ht.Type=cf;ht.serialVersionUID=0x6bee6404e9a25c00;ht.FIXED=new cf("FIXED");ht.FLOATING=new cf("FLOATING");ht.FLOATING_SINGLE=new cf("FLOATING SINGLE");ht.maximumPreciseValue=9007199254740992;t(nt.prototype,{toGeometry:function(n){return n.isNull()?this.createPoint():n.getMinX()===n.getMaxX()&&n.getMinY()===n.getMaxY()?this.createPoint(new r(n.getMinX(),n.getMinY())):n.getMinX()===n.getMaxX()||n.getMinY()===n.getMaxY()?this.createLineString([new r(n.getMinX(),n.getMinY()),new r(n.getMaxX(),n.getMaxY())]):this.createPolygon(this.createLinearRing([new r(n.getMinX(),n.getMinY()),new r(n.getMinX(),n.getMaxY()),new r(n.getMaxX(),n.getMaxY()),new r(n.getMaxX(),n.getMinY()),new r(n.getMinX(),n.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];return this.createLineString(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(h(arguments[0],ft))return new k(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new rr(null,this):1===arguments.length?new rr(arguments[0],this):void 0},buildGeometry:function(n){for(var r,u,t,i=null,f=!1,e=!1,o=n.iterator();o.hasNext();)r=o.next(),u=r.getClass(),null===i&&(i=u),u!==i&&(f=!0),r instanceof g&&(e=!0);if(null===i)return this.createGeometryCollection();if(f||e)return this.createGeometryCollection(nt.toGeometryArray(n));if(t=n.iterator().next(),1<n.size()){if(t instanceof st)return this.createMultiPolygon(nt.toPolygonArray(n));if(t instanceof k)return this.createMultiLineString(nt.toLineStringArray(n));if(t instanceof dt)return this.createMultiPoint(nt.toPointArray(n));c.shouldNeverReachHere("Unhandled class: "+t.getClass().getName())}return t},createMultiPointFromCoords:function(n){return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof r){var n=arguments[0];return this.createPoint(null!==n?this.getCoordinateSequenceFactory().create([n]):null)}if(h(arguments[0],ft))return new dt(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this._coordinateSequenceFactory},createPolygon:function(){var n,t,i;if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(h(arguments[0],ft))return n=arguments[0],this.createPolygon(this.createLinearRing(n));if(arguments[0]instanceof Array)return t=arguments[0],this.createPolygon(this.createLinearRing(t));if(arguments[0]instanceof ii)return i=arguments[0],this.createPolygon(i,null)}else if(2===arguments.length)return new st(arguments[0],arguments[1],this)},getSRID:function(){return this._SRID},createGeometryCollection:function(){return 0===arguments.length?new g(null,this):1===arguments.length?new g(arguments[0],this):void 0},createGeometry:function(n){return new br(this).edit(n,{edit:function(){if(2===arguments.length&&arguments[1]instanceof s&&h(arguments[0],ft)){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this._precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];return this.createLinearRing(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(h(arguments[0],ft))return new ii(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new vi(null,this):1===arguments.length?new vi(arguments[0],this):void 0},createMultiPoint:function(){var n,i,t,r;if(0===arguments.length)return new wr(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new wr(arguments[0],this);if(h(arguments[0],ft)){if(n=arguments[0],null===n)return this.createMultiPoint(new Array(0).fill(null));for(i=new Array(n.size()).fill(null),t=0;t<n.size();t++)r=this.getCoordinateSequenceFactory().create(1,n.getDimension()),ui.copy(n,t,r,0,1),i[t]=this.createPoint(r);return this.createMultiPoint(i)}}},interfaces_:function(){return[sr]},getClass:function(){return nt}});nt.toMultiPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toGeometryArray=function(n){if(null===n)return null;var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.getDefaultCoordinateSequenceFactory=function(){return be.instance()};nt.toMultiLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toMultiPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toLinearRingArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.toPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};nt.createPointFromInternalCoord=function(n,t){return t.getPrecisionModel().makePrecise(n),t.getFactory().createPoint(n)};nt.serialVersionUID=-0x5ea75f2051eeb400;lf={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};t(bw.prototype,{read:function(n){var i,r,u,t;if(n=n.replace(/[\n\r]/g," "),t=lf.typeStr.exec(n),-1!==n.search("EMPTY")&&((t=lf.emptyTypeStr.exec(n))[2]=void 0),t&&(r=t[1].toLowerCase(),u=t[2],ee[r]&&(i=ee[r].call(this,u))),void 0===i)throw new Error("Could not parse WKT "+n);return i},write:function(n){return this.extractGeometry(n)},extractGeometry:function(n){var t=n.getGeometryType().toLowerCase(),i;return af[t]?(i=t.toUpperCase(),n.isEmpty()?i+" EMPTY":i+"("+af[t].call(this,n)+")"):null}});af={coordinate:function(n){return n.x+" "+n.y},point:function(n){return af.coordinate.call(this,n._coordinates._coordinates[0])},multipoint:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+af.point.call(this,n._geometries[t])+")");return i.join(",")},linestring:function(n){for(var i=[],t=0,r=n._points._coordinates.length;t<r;++t)i.push(af.coordinate.call(this,n._points._coordinates[t]));return i.join(",")},linearring:function(n){for(var i=[],t=0,r=n._points._coordinates.length;t<r;++t)i.push(af.coordinate.call(this,n._points._coordinates[t]));return i.join(",")},multilinestring:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+af.linestring.call(this,n._geometries[t])+")");return i.join(",")},polygon:function(n){var i=[],t,r;for(i.push("("+af.linestring.call(this,n._shell)+")"),t=0,r=n._holes.length;t<r;++t)i.push("("+af.linestring.call(this,n._holes[t])+")");return i.join(",")},multipolygon:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+af.polygon.call(this,n._geometries[t])+")");return i.join(",")},geometrycollection:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push(this.extractGeometry(n._geometries[t]));return i.join(",")}};ee={coord:function(n){var t=n.trim().split(lf.spaces),i=new r(Number.parseFloat(t[0]),Number.parseFloat(t[1]));return this.precisionModel.makePrecise(i),i},point:function(n){return void 0===n?this.geometryFactory.createPoint():this.geometryFactory.createPoint(ee.coord.call(this,n))},multipoint:function(n){if(void 0===n)return this.geometryFactory.createMultiPoint();for(var i,r=n.trim().split(","),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(lf.trimParens,"$1"),u.push(ee.point.call(this,i));return this.geometryFactory.createMultiPoint(u)},linestring:function(n){if(void 0===n)return this.geometryFactory.createLineString();for(var i=n.trim().split(","),r=[],t=0,u=i.length;t<u;++t)r.push(ee.coord.call(this,i[t]));return this.geometryFactory.createLineString(r)},linearring:function(n){if(void 0===n)return this.geometryFactory.createLinearRing();for(var i=n.trim().split(","),r=[],t=0,u=i.length;t<u;++t)r.push(ee.coord.call(this,i[t]));return this.geometryFactory.createLinearRing(r)},multilinestring:function(n){if(void 0===n)return this.geometryFactory.createMultiLineString();for(var i,r=n.trim().split(lf.parenComma),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(lf.trimParens,"$1"),u.push(ee.linestring.call(this,i));return this.geometryFactory.createMultiLineString(u)},polygon:function(n){if(void 0===n)return this.geometryFactory.createPolygon();for(var r,u,i,f,e=n.trim().split(lf.parenComma),o=[],t=0,s=e.length;t<s;++t)r=e[t].replace(lf.trimParens,"$1"),u=ee.linestring.call(this,r),i=this.geometryFactory.createLinearRing(u._points),0===t?f=i:o.push(i);return this.geometryFactory.createPolygon(f,o)},multipolygon:function(n){if(void 0===n)return this.geometryFactory.createMultiPolygon();for(var i,r=n.trim().split(lf.doubleParenComma),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(lf.trimParens,"$1"),u.push(ee.polygon.call(this,i));return this.geometryFactory.createMultiPolygon(u)},geometrycollection:function(n){if(void 0===n)return this.geometryFactory.createGeometryCollection();for(var i=(n=n.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],t=0,u=i.length;t<u;++t)r.push(this.read(i[t]));return this.geometryFactory.createGeometryCollection(r)}};t(bi.prototype,{write:function(n){return this.parser.write(n)}});t(bi,{toLineString:function(n,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+n.x+" "+n.y+", "+t.x+" "+t.y+" )"}});t(ct.prototype,{getIndexAlongSegment:function(n,t){return this.computeIntLineIndex(),this._intLineIndex[n][t]},getTopologySummary:function(){var n=new co;return this.isEndPoint()&&n.append(" endpoint"),this._isProper&&n.append(" proper"),this.isCollinear()&&n.append(" collinear"),n.toString()},computeIntersection:function(n,t,i,r){this._inputLines[0][0]=n;this._inputLines[0][1]=t;this._inputLines[1][0]=i;this._inputLines[1][1]=r;this._result=this.computeIntersect(n,t,i,r)},getIntersectionNum:function(){return this._result},computeIntLineIndex:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var n=arguments[0],t=this.getEdgeDistance(n,0);this.getEdgeDistance(n,1)<t?(this._intLineIndex[n][0]=0,this._intLineIndex[n][1]=1):(this._intLineIndex[n][0]=1,this._intLineIndex[n][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(n){this._precisionModel=n},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[t][0])&&!this._intPt[n].equals2D(this._inputLines[t][1]))return!0;return!1}},getIntersection:function(n){return this._intPt[n]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this._result!==ct.NO_INTERSECTION},getEdgeDistance:function(n,t){return ct.computeEdgeDistance(this._intPt[t],this._inputLines[n][0],this._inputLines[n][1])},isCollinear:function(){return this._result===ct.COLLINEAR_INTERSECTION},toString:function(){return bi.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+bi.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(n,t){return this._inputLines[n][t]},isIntersection:function(n){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(n))return!0;return!1},getIntersectionAlongSegment:function(n,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[n][t]]},interfaces_:function(){return[]},getClass:function(){return ct}});ct.computeEdgeDistance=function(n,t,i){var u=Math.abs(i.x-t.x),f=Math.abs(i.y-t.y),r=-1,e,o;return n.equals(t)?r=0:n.equals(i)?r=f<u?u:f:(e=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),0!==(r=f<u?e:o)||n.equals(t)||(r=Math.max(e,o))),c.isTrue(!(0===r&&!n.equals(t)),"Bad distance calculation"),r};ct.nonRobustComputeEdgeDistance=function(n,t){var i=n.x-t.x,r=n.y-t.y,u=Math.sqrt(i*i+r*r);return c.isTrue(!(0===u&&!n.equals(t)),"Invalid distance calculation"),u};ct.DONT_INTERSECT=0;ct.DO_INTERSECT=1;ct.COLLINEAR=2;ct.NO_INTERSECTION=0;ct.POINT_INTERSECTION=1;ct.COLLINEAR_INTERSECTION=2;v(fi,ct);t(fi.prototype,{isInSegmentEnvelopes:function(n){var t=new y(this._inputLines[0][0],this._inputLines[0][1]),i=new y(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(n)&&i.contains(n)},computeIntersection:function(){if(3!==arguments.length)return ct.prototype.computeIntersection.apply(this,arguments);var n=arguments[0],t=arguments[1],i=arguments[2];if(this._isProper=!1,y.intersects(t,i,n)&&0===p.index(t,i,n)&&0===p.index(i,t,n))return this._isProper=!0,(n.equals(t)||n.equals(i))&&(this._isProper=!1),this._result=ct.POINT_INTERSECTION,null;this._result=ct.NO_INTERSECTION},normalizeToMinimum:function(n,t,i,r,u){u.x=this.smallestInAbsValue(n.x,t.x,i.x,r.x);u.y=this.smallestInAbsValue(n.y,t.y,i.y,r.y);n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},safeHCoordinateIntersection:function(n,t,i,r){var u=null;try{u=yr.intersection(n,t,i,r)}catch(f){if(!(f instanceof te))throw f;u=fi.nearestEndpoint(n,t,i,r)}return u},intersection:function(n,t,i,u){var f=this.intersectionWithNormalization(n,t,i,u);return this.isInSegmentEnvelopes(f)||(f=new r(fi.nearestEndpoint(n,t,i,u))),null!==this._precisionModel&&this._precisionModel.makePrecise(f),f},smallestInAbsValue:function(n,t,i,r){var u=n,f=Math.abs(u);return Math.abs(t)<f&&(u=t,f=Math.abs(t)),Math.abs(i)<f&&(u=i,f=Math.abs(i)),Math.abs(r)<f&&(u=r),u},checkDD:function(n,t,i,r,u){var f=ir.intersection(n,t,i,r),e=this.isInSegmentEnvelopes(f);pt.out.println("DD in env = "+e+"  --------------------- "+f);.0001<u.distance(f)&&pt.out.println("Distance = "+u.distance(f))},intersectionWithNormalization:function(n,t,i,u){var o=new r(n),s=new r(t),h=new r(i),c=new r(u),e=new r,f;return this.normalizeToEnvCentre(o,s,h,c,e),f=this.safeHCoordinateIntersection(o,s,h,c),f.x+=e.x,f.y+=e.y,f},computeCollinearIntersection:function(n,t,i,r){var u=y.intersects(n,t,i),f=y.intersects(n,t,r),e=y.intersects(i,r,n),o=y.intersects(i,r,t);return u&&f?(this._intPt[0]=i,this._intPt[1]=r,ct.COLLINEAR_INTERSECTION):e&&o?(this._intPt[0]=n,this._intPt[1]=t,ct.COLLINEAR_INTERSECTION):u&&e?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||f||o?ct.COLLINEAR_INTERSECTION:ct.POINT_INTERSECTION):u&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||f||e?ct.COLLINEAR_INTERSECTION:ct.POINT_INTERSECTION):f&&e?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||u||o?ct.COLLINEAR_INTERSECTION:ct.POINT_INTERSECTION):f&&o?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||u||e?ct.COLLINEAR_INTERSECTION:ct.POINT_INTERSECTION):ct.NO_INTERSECTION},normalizeToEnvCentre:function(n,t,i,r,u){var f=n.x<t.x?n.x:t.x,e=n.y<t.y?n.y:t.y,o=n.x>t.x?n.x:t.x,s=n.y>t.y?n.y:t.y,h=i.x<r.x?i.x:r.x,c=i.y<r.y?i.y:r.y,l=i.x>r.x?i.x:r.x,a=i.y>r.y?i.y:r.y,v=((h<f?f:h)+(o<l?o:l))/2,y=((c<e?e:c)+(s<a?s:a))/2;u.x=v;u.y=y;n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},computeIntersect:function(n,t,i,u){var f,e,o,s;return(this._isProper=!1,!y.intersects(n,t,i,u))?ct.NO_INTERSECTION:(f=p.index(n,t,i),e=p.index(n,t,u),0<f&&0<e||f<0&&e<0)?ct.NO_INTERSECTION:(o=p.index(i,u,n),s=p.index(i,u,t),0<o&&0<s||o<0&&s<0?ct.NO_INTERSECTION:0===f&&0===e&&0===o&&0===s?this.computeCollinearIntersection(n,t,i,u):(0===f||0===e||0===o||0===s?(this._isProper=!1,n.equals2D(i)||n.equals2D(u)?this._intPt[0]=n:t.equals2D(i)||t.equals2D(u)?this._intPt[0]=t:0===f?this._intPt[0]=new r(i):0===e?this._intPt[0]=new r(u):0===o?this._intPt[0]=new r(n):0===s&&(this._intPt[0]=new r(t))):(this._isProper=!0,this._intPt[0]=this.intersection(n,t,i,u)),ct.POINT_INTERSECTION))},interfaces_:function(){return[]},getClass:function(){return fi}});fi.nearestEndpoint=function(n,t,i,r){var e=n,u=ti.pointToSegment(n,i,r),f=ti.pointToSegment(t,i,r);return f<u&&(u=f,e=t),(f=ti.pointToSegment(i,n,t))<u&&(u=f,e=i),(f=ti.pointToSegment(r,n,t))<u&&(u=f,e=r),e};t(b.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){var u;if(arguments[0]instanceof b){var i=arguments[0],n=p.index(this.p0,this.p1,i.p0),t=p.index(this.p0,this.p1,i.p1);return 0<=n&&0<=t?Math.max(n,t):n<=0&&t<=0?Math.max(n,t):0}if(arguments[0]instanceof r)return u=arguments[0],p.index(this.p0,this.p1,u)},toGeometry:function(n){return n.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(n){if(!(n instanceof b))return!1;var t=n;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},intersection:function(n){var t=new fi;return t.computeIntersection(this.p0,this.p1,n.p0,n.p1),t.hasIntersection()?t.getIntersection(0):null},project:function(){var n,s,t,e,o;if(arguments[0]instanceof r)return(n=arguments[0],n.equals(this.p0)||n.equals(this.p1))?new r(n):(s=this.projectionFactor(n),t=new r,t.x=this.p0.x+s*(this.p1.x-this.p0.x),t.y=this.p0.y+s*(this.p1.y-this.p0.y),t);if(arguments[0]instanceof b){var i=arguments[0],u=this.projectionFactor(i.p0),f=this.projectionFactor(i.p1);return 1<=u&&1<=f?null:u<=0&&f<=0?null:(e=this.project(i.p0),u<0&&(e=this.p0),1<u&&(e=this.p1),o=this.project(i.p1),f<0&&(o=this.p0),1<f&&(o=this.p1),new b(e,o))}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(n){return 0===n?this.p0:this.p1},distancePerpendicular:function(n){return ti.pointToLinePerpendicular(n,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return b.midPoint(this.p0,this.p1)},projectionFactor:function(n){if(n.equals(this.p0))return 0;if(n.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=t*t+i*i;return r<=0?l.NaN:((n.x-this.p0.x)*t+(n.y-this.p0.y)*i)/r},closestPoints:function(n){var u=this.intersection(n),f,e,o;if(null!==u)return[u,u];var t=new Array(2).fill(null),i=l.MAX_VALUE,r=null,s=this.closestPoint(n.p0);return i=s.distance(n.p0),t[0]=s,t[1]=n.p0,f=this.closestPoint(n.p1),(r=f.distance(n.p1))<i&&(i=r,t[0]=f,t[1]=n.p1),e=n.closestPoint(this.p0),(r=e.distance(this.p0))<i&&(i=r,t[0]=this.p0,t[1]=e),o=n.closestPoint(this.p1),(r=o.distance(this.p1))<i&&(i=r,t[0]=this.p1,t[1]=o),t},closestPoint:function(n){var t=this.projectionFactor(n);return 0<t&&t<1?this.project(n):this.p0.distance(n)<this.p1.distance(n)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(n){var t=n,i=this.p0.compareTo(t.p0);return 0!==i?i:this.p1.compareTo(t.p1)},reverse:function(){var n=this.p0;this.p0=this.p1;this.p1=n},equalsTopo:function(n){return this.p0.equals(n.p0)&&this.p1.equals(n.p1)||this.p0.equals(n.p1)&&this.p1.equals(n.p0)},lineIntersection:function(n){try{return yr.intersection(this.p0,this.p1,n.p0,n.p1)}catch(n){if(!(n instanceof te))throw n;}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(n,t){var s=this.p0.x+n*(this.p1.x-this.p0.x),h=this.p0.y+n*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(i*i+u*u),e=0,o=0;if(0!==t){if(f<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");e=t*i/f;o=t*u/f}return new r(s-o,h+e)},setCoordinates:function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setCoordinates(n.p0,n.p1)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=i.x,this.p1.y=i.y)},segmentFraction:function(n){var t=this.projectionFactor(n);return t<0?t=0:(1<t||l.isNaN(t))&&(t=1),t},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){var n,t;return arguments[0]instanceof b?(n=arguments[0],ti.segmentToSegment(this.p0,this.p1,n.p0,n.p1)):arguments[0]instanceof r?(t=arguments[0],ti.pointToSegment(t,this.p0,this.p1)):void 0},pointAlong:function(n){var t=new r;return t.x=this.p0.x+n*(this.p1.x-this.p0.x),t.y=this.p0.y+n*(this.p1.y-this.p0.y),t},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x),i,n;return t^=31*java.lang.Double.doubleToLongBits(this.p0.y),i=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x),n^=31*java.lang.Double.doubleToLongBits(this.p1.y),i^Math.trunc(n)^Math.trunc(n>>32)},interfaces_:function(){return[or,sr]},getClass:function(){return b}});b.midPoint=function(n,t){return new r((n.x+t.x)/2,(n.y+t.y)/2)};b.serialVersionUID=0x2d2172135f411c00;t(i.prototype,{interfaces_:function(){return[]},getClass:function(){return i}});i.toLocationSymbol=function(n){switch(n){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new tt("Unknown location value: "+n);};i.INTERIOR=0;i.BOUNDARY=1;i.EXTERIOR=2;i.NONE=-1;t(et.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])||et.isTrue(this._matrix[i.INTERIOR][i.BOUNDARY])||et.isTrue(this._matrix[i.BOUNDARY][i.INTERIOR])||et.isTrue(this._matrix[i.BOUNDARY][i.BOUNDARY]))&&this._matrix[i.EXTERIOR][i.INTERIOR]===e.FALSE&&this._matrix[i.EXTERIOR][i.BOUNDARY]===e.FALSE},isCoveredBy:function(){return(et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])||et.isTrue(this._matrix[i.INTERIOR][i.BOUNDARY])||et.isTrue(this._matrix[i.BOUNDARY][i.INTERIOR])||et.isTrue(this._matrix[i.BOUNDARY][i.BOUNDARY]))&&this._matrix[i.INTERIOR][i.EXTERIOR]===e.FALSE&&this._matrix[i.BOUNDARY][i.EXTERIOR]===e.FALSE},set:function(){var t,n,i,r;if(1===arguments.length)for(t=arguments[0],n=0;n<t.length;n++)i=Math.trunc(n/3),r=n%3,this._matrix[i][r]=e.toDimensionValue(t.charAt(n));else if(3===arguments.length){var u=arguments[0],f=arguments[1],o=arguments[2];this._matrix[u][f]=o}},isContains:function(){return et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&this._matrix[i.EXTERIOR][i.INTERIOR]===e.FALSE&&this._matrix[i.EXTERIOR][i.BOUNDARY]===e.FALSE},setAtLeast:function(){var t,n,i,r;if(1===arguments.length)for(t=arguments[0],n=0;n<t.length;n++)i=Math.trunc(n/3),r=n%3,this.setAtLeast(i,r,e.toDimensionValue(t.charAt(n)));else if(3===arguments.length){var u=arguments[0],f=arguments[1],o=arguments[2];this._matrix[u][f]<o&&(this._matrix[u][f]=o)}},setAtLeastIfValid:function(n,t,i){0<=n&&0<=t&&this.setAtLeast(n,t,i)},isWithin:function(){return et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&this._matrix[i.INTERIOR][i.EXTERIOR]===e.FALSE&&this._matrix[i.BOUNDARY][i.EXTERIOR]===e.FALSE},isTouches:function(n,t){return t<n?this.isTouches(t,n):(n===e.A&&t===e.A||n===e.L&&t===e.L||n===e.L&&t===e.A||n===e.P&&t===e.A||n===e.P&&t===e.L)&&this._matrix[i.INTERIOR][i.INTERIOR]===e.FALSE&&(et.isTrue(this._matrix[i.INTERIOR][i.BOUNDARY])||et.isTrue(this._matrix[i.BOUNDARY][i.INTERIOR])||et.isTrue(this._matrix[i.BOUNDARY][i.BOUNDARY]))},isOverlaps:function(n,t){return n===e.P&&t===e.P||n===e.A&&t===e.A?et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&et.isTrue(this._matrix[i.INTERIOR][i.EXTERIOR])&&et.isTrue(this._matrix[i.EXTERIOR][i.INTERIOR]):n===e.L&&t===e.L&&1===this._matrix[i.INTERIOR][i.INTERIOR]&&et.isTrue(this._matrix[i.INTERIOR][i.EXTERIOR])&&et.isTrue(this._matrix[i.EXTERIOR][i.INTERIOR])},isEquals:function(n,t){return n===t&&et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&this._matrix[i.INTERIOR][i.EXTERIOR]===e.FALSE&&this._matrix[i.BOUNDARY][i.EXTERIOR]===e.FALSE&&this._matrix[i.EXTERIOR][i.INTERIOR]===e.FALSE&&this._matrix[i.EXTERIOR][i.BOUNDARY]===e.FALSE},toString:function(){for(var t,i=new co("123456789"),n=0;n<3;n++)for(t=0;t<3;t++)i.setCharAt(3*n+t,e.toDimensionSymbol(this._matrix[n][t]));return i.toString()},setAll:function(n){for(var i,t=0;t<3;t++)for(i=0;i<3;i++)this._matrix[t][i]=n},get:function(n,t){return this._matrix[n][t]},transpose:function(){var n=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=n,n=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=n,n=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=n,this},matches:function(n){var t,i;if(9!==n.length)throw new tt("Should be length 9: "+n);for(t=0;t<3;t++)for(i=0;i<3;i++)if(!et.matches(this._matrix[t][i],n.charAt(3*t+i)))return!1;return!0},add:function(n){for(var i,t=0;t<3;t++)for(i=0;i<3;i++)this.setAtLeast(t,i,n.get(t,i))},isDisjoint:function(){return this._matrix[i.INTERIOR][i.INTERIOR]===e.FALSE&&this._matrix[i.INTERIOR][i.BOUNDARY]===e.FALSE&&this._matrix[i.BOUNDARY][i.INTERIOR]===e.FALSE&&this._matrix[i.BOUNDARY][i.BOUNDARY]===e.FALSE},isCrosses:function(n,t){return n===e.P&&t===e.L||n===e.P&&t===e.A||n===e.L&&t===e.A?et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&et.isTrue(this._matrix[i.INTERIOR][i.EXTERIOR]):n===e.L&&t===e.P||n===e.A&&t===e.P||n===e.A&&t===e.L?et.isTrue(this._matrix[i.INTERIOR][i.INTERIOR])&&et.isTrue(this._matrix[i.EXTERIOR][i.INTERIOR]):n===e.L&&t===e.L&&0===this._matrix[i.INTERIOR][i.INTERIOR]},interfaces_:function(){return[pc]},getClass:function(){return et}});et.matches=function(){var n,t,i,r;return Number.isInteger(arguments[0])&&"string"==typeof arguments[1]?(n=arguments[0],t=arguments[1],t===e.SYM_DONTCARE||t===e.SYM_TRUE&&(0<=n||n===e.TRUE)||t===e.SYM_FALSE&&n===e.FALSE||t===e.SYM_P&&n===e.P||t===e.SYM_L&&n===e.L||t===e.SYM_A&&n===e.A):"string"==typeof arguments[0]&&"string"==typeof arguments[1]?(i=arguments[0],r=arguments[1],new et(i).matches(r)):void 0};et.isTrue=function(n){return 0<=n||n===e.TRUE};t(d.prototype,{interfaces_:function(){return[]},getClass:function(){return d}});d.toDegrees=function(n){return 180*n/Math.PI};d.normalize=function(n){for(;n>Math.PI;)n-=d.PI_TIMES_2;for(;n<=-Math.PI;)n+=d.PI_TIMES_2;return n};d.angle=function(){var n;if(1===arguments.length)return n=arguments[0],Math.atan2(n.y,n.x);if(2===arguments.length){var t=arguments[0],i=arguments[1],r=i.x-t.x,u=i.y-t.y;return Math.atan2(u,r)}};d.isAcute=function(n,t,i){var r=n.x-t.x,u=n.y-t.y;return 0<r*(i.x-t.x)+u*(i.y-t.y)};d.isObtuse=function(n,t,i){var r=n.x-t.x,u=n.y-t.y;return r*(i.x-t.x)+u*(i.y-t.y)<0};d.interiorAngle=function(n,t,i){var r=d.angle(t,n),u=d.angle(t,i);return Math.abs(u-r)};d.normalizePositive=function(n){if(n<0){for(;n<0;)n+=d.PI_TIMES_2;d.PI_TIMES_2<=n&&(n=0)}else{for(;d.PI_TIMES_2<=n;)n-=d.PI_TIMES_2;n<0&&(n=0)}return n};d.angleBetween=function(n,t,i){var r=d.angle(t,n),u=d.angle(t,i);return d.diff(r,u)};d.diff=function(n,t){var i=null;return(i=n<t?t-n:n-t)>Math.PI&&(i=2*Math.PI-i),i};d.toRadians=function(n){return n*Math.PI/180};d.getTurn=function(n,t){var i=Math.sin(t-n);return 0<i?d.COUNTERCLOCKWISE:i<0?d.CLOCKWISE:d.NONE};d.angleBetweenOriented=function(n,t,i){var u=d.angle(t,n),r=d.angle(t,i)-u;return r<=-Math.PI?r+d.PI_TIMES_2:r>Math.PI?r-d.PI_TIMES_2:r};d.PI_TIMES_2=2*Math.PI;d.PI_OVER_2=Math.PI/2;d.PI_OVER_4=Math.PI/4;d.COUNTERCLOCKWISE=p.COUNTERCLOCKWISE;d.CLOCKWISE=p.CLOCKWISE;d.NONE=p.COLLINEAR;t(lt.prototype,{area:function(){return lt.area(this.p0,this.p1,this.p2)},signedArea:function(){return lt.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(n){if(null===n)throw new tt("Supplied point is null.");return lt.interpolateZ(n,this.p0,this.p1,this.p2)},longestSideLength:function(){return lt.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return lt.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return lt.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return lt.area3D(this.p0,this.p1,this.p2)},centroid:function(){return lt.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return lt.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return lt}});lt.area=function(n,t,i){return Math.abs(((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2)};lt.signedArea=function(n,t,i){return((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2};lt.det=function(n,t,i,r){return n*r-t*i};lt.interpolateZ=function(n,t,i,r){var u=t.x,f=t.y,e=i.x-u,o=r.x-u,s=i.y-f,h=r.y-f,c=e*h-o*s,l=n.x-u,a=n.y-f,v=(h*l-o*a)/c,y=(-s*l+e*a)/c;return t.z+v*(i.z-t.z)+y*(r.z-t.z)};lt.longestSideLength=function(n,t,i){var e=n.distance(t),u=t.distance(i),f=i.distance(n),r=e;return r<u&&(r=u),r<f&&(r=f),r};lt.isAcute=function(n,t,i){return!!d.isAcute(n,t,i)&&!!d.isAcute(t,i,n)&&!!d.isAcute(i,n,t)};lt.circumcentre=function(n,t,i){var s=i.x,h=i.y,u=n.x-s,f=n.y-h,e=t.x-s,o=t.y-h,c=2*lt.det(u,f,e,o);return new r(s-lt.det(f,u*u+f*f,o,e*e+o*o)/c,h+lt.det(u,u*u+f*f,e,e*e+o*o)/c)};lt.perpendicularBisector=function(n,t){var i=t.x-n.x,r=t.y-n.y;return new yr(new yr(n.x+i/2,n.y+r/2,1),new yr(n.x-r+i/2,n.y+i+r/2,1))};lt.angleBisector=function(n,t,i){var u=t.distance(n),f=u/(u+t.distance(i)),e=i.x-n.x,o=i.y-n.y;return new r(n.x+f*e,n.y+f*o)};lt.area3D=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=t.z-n.z,e=i.x-n.x,o=i.y-n.y,s=i.z-n.z,h=u*s-f*o,c=f*e-r*s,l=r*o-u*e,a=h*h+c*c+l*l;return Math.sqrt(a)/2};lt.centroid=function(n,t,i){return new r((n.x+t.x+i.x)/3,(n.y+t.y+i.y)/3)};lt.inCentre=function(n,t,i){var u=t.distance(i),f=n.distance(i),e=n.distance(t),o=u+f+e;return new r((u*n.x+f*t.x+e*i.x)/o,(u*n.y+f*t.y+e*i.y)/o)};dk=Object.freeze({Coordinate:r,CoordinateList:ni,Envelope:y,LineSegment:b,GeometryFactory:nt,Geometry:s,Point:dt,LineString:k,LinearRing:ii,Polygon:st,GeometryCollection:g,MultiPoint:wr,MultiLineString:rr,MultiPolygon:vi,Dimension:e,IntersectionMatrix:et,PrecisionModel:ht,Location:i,Triangle:lt});t(ku.prototype,{getCoordinates:function(){return this._pt},getCoordinate:function(n){return this._pt[n]},setMinimum:function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMinimum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r<this._distance&&this.initialize(n,t,r)}},initialize:function(){var n,t;if(0===arguments.length)this._isNull=!0;else if(2===arguments.length)n=arguments[0],t=arguments[1],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(t),this._distance=n.distance(t),this._isNull=!1;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._pt[0].setCoordinate(i);this._pt[1].setCoordinate(r);this._distance=u;this._isNull=!1}},toString:function(){return bi.toLineString(this._pt[0],this._pt[1])},getDistance:function(){return this._distance},setMaximum:function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMaximum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r>this._distance&&this.initialize(n,t,r)}},interfaces_:function(){return[]},getClass:function(){return ku}});t(du.prototype,{interfaces_:function(){return[]},getClass:function(){return du}});du.computeDistance=function(){var i,h,y;if(arguments[2]instanceof ku&&arguments[0]instanceof k&&arguments[1]instanceof r)for(var w=arguments[0],c=arguments[1],d=arguments[2],l=new b,e=w.getCoordinates(),n=0;n<e.length-1;n++)l.setCoordinates(e[n],e[n+1]),i=l.closestPoint(c),d.setMinimum(i,c);else if(arguments[2]instanceof ku&&arguments[0]instanceof st&&arguments[1]instanceof r){var o=arguments[0],a=arguments[1],v=arguments[2];for(du.computeDistance(o.getExteriorRing(),a,v),n=0;n<o.getNumInteriorRing();n++)du.computeDistance(o.getInteriorRingN(n),a,v)}else if(arguments[2]instanceof ku&&arguments[0]instanceof s&&arguments[1]instanceof r){var t=arguments[0],u=arguments[1],f=arguments[2];if(t instanceof k)du.computeDistance(t,u,f);else if(t instanceof st)du.computeDistance(t,u,f);else if(t instanceof g)for(h=t,n=0;n<h.getNumGeometries();n++)y=h.getGeometryN(n),du.computeDistance(y,u,f);else f.setMinimum(t.getCoordinate(),u)}else if(arguments[2]instanceof ku&&arguments[0]instanceof b&&arguments[1]instanceof r){var nt=arguments[0],p=arguments[1],tt=arguments[2];i=nt.closestPoint(p);tt.setMinimum(i,p)}};t(de.prototype,{getCoordinates:function(){return this._ptDist.getCoordinates()},setDensifyFraction:function(n){if(1<n||n<=0)throw new tt("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=n},compute:function(n,t){this.computeOrientedDistance(n,t,this._ptDist);this.computeOrientedDistance(t,n,this._ptDist)},distance:function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},computeOrientedDistance:function(n,t,i){var u=new wv(t),r;(n.apply(u),i.setMaximum(u.getMaxPointDistance()),0<this._densifyFrac)&&(r=new bv(t,this._densifyFrac),n.apply(r),i.setMaximum(r.getMaxPointDistance()))},orientedDistance:function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},interfaces_:function(){return[]},getClass:function(){return de}});de.distance=function(){if(2===arguments.length)return(n=new de(arguments[0],arguments[1])).distance();if(3===arguments.length){var n,t=arguments[0],i=arguments[1],r=arguments[2];return(n=new de(t,i)).setDensifyFraction(r),n.distance()}};t(wv.prototype,{filter:function(n){this._minPtDist.initialize();du.computeDistance(this._geom,n,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)},getMaxPointDistance:function(){return this._maxPtDist},interfaces_:function(){return[pe]},getClass:function(){return wv}});t(bv.prototype,{filter:function(n,t){var e;if(0===t)return null;for(var i=n.getCoordinate(t-1),f=n.getCoordinate(t),o=(f.x-i.x)/this._numSubSegs,s=(f.y-i.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++)e=new r(i.x+u*o,i.y+u*s),this._minPtDist.initialize(),du.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},isDone:function(){return!1},isGeometryChanged:function(){return!1},getMaxPointDistance:function(){return this._maxPtDist},interfaces_:function(){return[ho]},getClass:function(){return bv}});de.MaxPointDistanceFilter=wv;de.MaxDensifiedByFractionDistanceFilter=bv;gk=Object.freeze({DiscreteHausdorffDistance:de,DistanceToPoint:du,PointPairDistance:ku});t(as.prototype,{visitItem:function(){},interfaces_:function(){return[]},getClass:function(){return as}});t(tl.prototype,{locate:function(){},interfaces_:function(){return[]},getClass:function(){return tl}});t(ao.prototype,{getMin:function(){return this._min},intersects:function(n,t){return!(this._min>t||this._max<n)},getMax:function(){return this._max},toString:function(){return bi.toLineString(new r(this._min,0),new r(this._max,0))},interfaces_:function(){return[]},getClass:function(){return ao}});t(kw.prototype,{compare:function(n,t){var i=n,r=t,u=(i._min+i._max)/2,f=(r._min+r._max)/2;return u<f?-1:f<u?1:0},interfaces_:function(){return[eo]},getClass:function(){return kw}});ao.NodeComparator=kw;v(kv,ao);t(kv.prototype,{query:function(n,t,i){if(!this.intersects(n,t))return null;i.visitItem(this._item)},interfaces_:function(){return[]},getClass:function(){return kv}});gu={reverseOrder:function(){return{compare:function(n,t){return t.compareTo(n)}}},min:function(n){return gu.sort(n),n.get(0)},sort:function(n,t){var i=n.toArray();t?re.sort(i,t):re.sort(i);for(var u=n.iterator(),r=0,f=i.length;r<f;r++)u.next(),u.set(i[r])},singletonList:function(n){var t=new u;return t.add(n),t}};v(dv,ao);t(dv.prototype,{buildExtent:function(n,t){this._min=Math.min(n._min,t._min);this._max=Math.max(n._max,t._max)},query:function(n,t,i){if(!this.intersects(n,t))return null;null!==this._node1&&this._node1.query(n,t,i);null!==this._node2&&this._node2.query(n,t,i)},interfaces_:function(){return[]},getClass:function(){return dv}});t(dw.prototype,{buildTree:function(){gu.sort(this._leaves,new ao.NodeComparator);for(var t=this._leaves,i=null,n=new u;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);i=t;t=n;n=i}},insert:function(n,t,i){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new kv(n,t,i))},query:function(n,t,i){this.init();this._root.query(n,t,i)},buildRoot:function(){if(null!==this._root)return null;this._root=this.buildTree()},printNode:function(n){pt.out.println(bi.toLineString(new r(n._min,this._level),new r(n._max,this._level)))},init:function(){if(null!==this._root)return null;this.buildRoot()},buildLevel:function(n,t){var i,r,u;for(this._level++,t.clear(),i=0;i<n.size();i+=2)r=n.get(i),null===(i+1<n.size()?n.get(i):null)?t.add(r):(u=new dv(n.get(i),n.get(i+1)),t.add(u))},interfaces_:function(){return[]},getClass:function(){return dw}});t(gi.prototype,{filter:function(n){if(this._isForcedToLineString&&n instanceof ii){var t=n.getFactory().createLineString(n.getCoordinateSequence());return this._lines.add(t),null}n instanceof k&&this._lines.add(n)},setForceToLineString:function(n){this._isForcedToLineString=n},interfaces_:function(){return[bu]},getClass:function(){return gi}});gi.getGeometry=function(){var n,t,i;return 1===arguments.length?(n=arguments[0],n.getFactory().buildGeometry(gi.getLines(n))):2===arguments.length?(t=arguments[0],i=arguments[1],t.getFactory().buildGeometry(gi.getLines(t,i))):void 0};gi.getLines=function(){var f,t,i,r;if(1===arguments.length)return f=arguments[0],gi.getLines(f,!1);if(2===arguments.length){if(h(arguments[0],at)&&h(arguments[1],at)){for(var a=arguments[0],e=arguments[1],n=a.iterator();n.hasNext();)t=n.next(),gi.getLines(t,e);return e}if(arguments[0]instanceof s&&"boolean"==typeof arguments[1]){var v=arguments[0],y=arguments[1],o=new u;return v.apply(new gi(o,y)),o}if(arguments[0]instanceof s&&h(arguments[1],at))return i=arguments[0],r=arguments[1],i instanceof k?r.add(i):i.apply(new gi(r)),r}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&h(arguments[0],at)&&h(arguments[1],at)){var p=arguments[0],c=arguments[1],w=arguments[2];for(n=p.iterator();n.hasNext();)t=n.next(),gi.getLines(t,c,w);return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof s&&h(arguments[1],at)){var b=arguments[0],l=arguments[1],d=arguments[2];return b.apply(new gi(l,d)),l}}};t(gv.prototype,{visitItem:function(n){this._items.add(n)},getItems:function(){return this._items},interfaces_:function(){return[as]},getClass:function(){return gv}});t(vo.prototype,{countSegment:function(n,t){var r,u,i;if(n.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(n.y===this._p.y&&t.y===this._p.y)return r=n.x,u=t.x,u<r&&(r=t.x,u=n.x),this._p.x>=r&&this._p.x<=u&&(this._isPointOnSegment=!0),null;if(n.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&n.y<=this._p.y){if(i=p.index(n,t,this._p),i===p.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<n.y&&(i=-i);i===p.LEFT&&this._crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==i.EXTERIOR},getLocation:function(){return this._isPointOnSegment?i.BOUNDARY:this._crossingCount%2==1?i.INTERIOR:i.EXTERIOR},isOnSegment:function(){return this._isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return vo}});vo.locatePointInRing=function(){var o,f;if(arguments[0]instanceof r&&h(arguments[1],ft)){for(var s=arguments[0],e=arguments[1],n=new vo(s),i=new r,u=new r,t=1;t<e.size();t++)if(e.getCoordinate(t,i),e.getCoordinate(t-1,u),n.countSegment(i,u),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof r&&arguments[1]instanceof Array){for(o=arguments[0],f=arguments[1],n=new vo(o),t=1;t<f.length;t++)if(i=f[t],u=f[t-1],n.countSegment(i,u),n.isOnSegment())return n.getLocation();return n.getLocation()}};t(vs.prototype,{locate:function(n){var t=new vo(n),i=new ny(t);return this._index.query(n.y,n.y,i),t.getLocation()},interfaces_:function(){return[tl]},getClass:function(){return vs}});t(ny.prototype,{visitItem:function(n){var t=n;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},interfaces_:function(){return[as]},getClass:function(){return ny}});t(ty.prototype,{init:function(n){for(var i,t=gi.getLines(n).iterator();t.hasNext();)i=t.next().getCoordinates(),this.addLine(i)},addLine:function(n){for(var t=1;t<n.length;t++){var i=new b(n[t-1],n[t]),r=Math.min(i.p0.y,i.p1.y),u=Math.max(i.p0.y,i.p1.y);this._index.insert(r,u,i)}},query:function(){if(2===arguments.length){var t=arguments[0],i=arguments[1],n=new gv;return this._index.query(t,i,n),n.getItems()}if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];this._index.query(r,u,f)}},interfaces_:function(){return[]},getClass:function(){return ty}});vs.SegmentVisitor=ny;vs.IntervalIndexedGeometry=ty;t(ur.prototype,{interfaces_:function(){return[]},getClass:function(){return ur}});ur.isOnLine=function(){var o,f;if(arguments[0]instanceof r&&h(arguments[1],ft)){for(var s=arguments[0],e=arguments[1],t=new fi,i=new r,u=new r,c=e.size(),n=1;n<c;n++)if(e.getCoordinate(n-1,i),e.getCoordinate(n,u),t.computeIntersection(s,i,u),t.hasIntersection())return!0;return!1}if(arguments[0]instanceof r&&arguments[1]instanceof Array){for(o=arguments[0],f=arguments[1],t=new fi,n=1;n<f.length;n++)if(i=f[n-1],u=f[n],t.computeIntersection(o,i,u),t.hasIntersection())return!0;return!1}};ur.locateInRing=function(n,t){return vo.locatePointInRing(n,t)};ur.isInRing=function(n,t){return ur.locateInRing(n,t)!==i.EXTERIOR};t(ys.prototype,{next:function(){if(this._atStart)return this._atStart=!1,ys.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new bc;var n=this._parent.getGeometryN(this._index++);return n instanceof g?(this._subcollectionIterator=new ys(n),this._subcollectionIterator.next()):n},remove:function(){throw new UnsupportedOperationException(this.getClass().getName());},hasNext:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},interfaces_:function(){return[wc]},getClass:function(){return ys}});ys.isAtomic=function(n){return!(n instanceof g)};t(fr.prototype,{locate:function(n){return fr.locate(n,this._geom)},interfaces_:function(){return[tl]},getClass:function(){return fr}});fr.locatePointInPolygon=function(n,t){var e,u,r,o,f;if(t.isEmpty())return i.EXTERIOR;if(e=t.getExteriorRing(),u=fr.locatePointInRing(n,e),u!==i.INTERIOR)return u;for(r=0;r<t.getNumInteriorRing();r++){if(o=t.getInteriorRingN(r),f=fr.locatePointInRing(n,o),f===i.BOUNDARY)return i.BOUNDARY;if(f===i.INTERIOR)return i.EXTERIOR}return i.INTERIOR};fr.locatePointInRing=function(n,t){return t.getEnvelopeInternal().intersects(n)?ur.locateInRing(n,t.getCoordinates()):i.EXTERIOR};fr.containsPointInPolygon=function(n,t){return i.EXTERIOR!==fr.locatePointInPolygon(n,t)};fr.locateInGeometry=function(n,t){var r,u,f;if(t instanceof st)return fr.locatePointInPolygon(n,t);if(t instanceof g)for(r=new ys(t);r.hasNext();)if(u=r.next(),u!==t&&(f=fr.locateInGeometry(n,u),f!==i.EXTERIOR))return f;return i.EXTERIOR};fr.locate=function(n,t){return t.isEmpty()?i.EXTERIOR:fr.locateInGeometry(n,t)};nd=Object.freeze({IndexedPointInAreaLocator:vs,PointOnGeometryLocator:tl,SimplePointInAreaLocator:fr});t(il.prototype,{measure:function(){},interfaces_:function(){return[]},getClass:function(){return il}});t(gw.prototype,{measure:function(n,t){return n.intersection(t).getArea()/n.union(t).getArea()},interfaces_:function(){return[il]},getClass:function(){return gw}});t(ps.prototype,{measure:function(n,t){var r=de.distance(n,t,ps.DENSIFY_FRACTION),i=new y(n.getEnvelopeInternal());return i.expandToInclude(t.getEnvelopeInternal()),1-r/ps.diagonalSize(i)},interfaces_:function(){return[il]},getClass:function(){return ps}});ps.diagonalSize=function(n){if(n.isNull())return 0;var t=n.getWidth(),i=n.getHeight();return Math.sqrt(t*t+i*i)};ps.DENSIFY_FRACTION=.25;t(iy.prototype,{interfaces_:function(){return[]},getClass:function(){return iy}});iy.combine=function(n,t){return Math.min(n,t)};td=Object.freeze({AreaSimilarityMeasure:gw,HausdorffSimilarityMeasure:ps,SimilarityMeasure:il,SimilarityMeasureCombiner:iy});t(oe.prototype,{setAreaBasePoint:function(n){this._areaBasePt=n},addPoint:function(n){this._ptCount+=1;this._ptCentSum.x+=n.x;this._ptCentSum.y+=n.y},addLineSegments:function(n){for(var i,u,f,r=0,t=0;t<n.length-1;t++)i=n[t].distance(n[t+1]),0!==i&&(r+=i,u=(n[t].x+n[t+1].x)/2,this._lineCentSum.x+=i*u,f=(n[t].y+n[t+1].y)/2,this._lineCentSum.y+=i*f);this._totalLength+=r;0===r&&0<n.length&&this.addPoint(n[0])},addHole:function(n){for(var i=p.isCCW(n),t=0;t<n.length-1;t++)this.addTriangle(this._areaBasePt,n[t],n[t+1],i);this.addLineSegments(n)},getCentroid:function(){var n=new r;if(0<Math.abs(this._areasum2))n.x=this._cg3.x/3/this._areasum2,n.y=this._cg3.y/3/this._areasum2;else if(0<this._totalLength)n.x=this._lineCentSum.x/this._totalLength,n.y=this._lineCentSum.y/this._totalLength;else{if(!(0<this._ptCount))return null;n.x=this._ptCentSum.x/this._ptCount;n.y=this._ptCentSum.y/this._ptCount}return n},addShell:function(n){0<n.length&&this.setAreaBasePoint(n[0]);for(var i=!p.isCCW(n),t=0;t<n.length-1;t++)this.addTriangle(this._areaBasePt,n[t],n[t+1],i);this.addLineSegments(n)},addTriangle:function(n,t,i,r){var f=r?1:-1,u;oe.centroid3(n,t,i,this._triangleCent3);u=oe.area2(n,t,i);this._cg3.x+=f*u*this._triangleCent3.x;this._cg3.y+=f*u*this._triangleCent3.y;this._areasum2+=f*u},add:function(){var i,t,n,u,r;if(arguments[0]instanceof st)for(i=arguments[0],this.addShell(i.getExteriorRing().getCoordinates()),t=0;t<i.getNumInteriorRing();t++)this.addHole(i.getInteriorRingN(t).getCoordinates());else if(arguments[0]instanceof s){if(n=arguments[0],n.isEmpty())return null;if(n instanceof dt)this.addPoint(n.getCoordinate());else if(n instanceof k)this.addLineSegments(n.getCoordinates());else if(n instanceof st)u=n,this.add(u);else if(n instanceof g)for(r=n,t=0;t<r.getNumGeometries();t++)this.add(r.getGeometryN(t))}},interfaces_:function(){return[]},getClass:function(){return oe}});oe.area2=function(n,t,i){return(t.x-n.x)*(i.y-n.y)-(i.x-n.x)*(t.y-n.y)};oe.centroid3=function(n,t,i,r){return r.x=n.x+t.x+i.x,r.y=n.y+t.y+i.y,null};oe.getCentroid=function(n){return new oe(n).getCentroid()};t(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}});wt.orientationIndex=function(n,t,i){return ir.orientationIndex(n,t,i)};wt.signedArea=function(){var t,c,l,e,s;if(arguments[0]instanceof Array){if(t=arguments[0],t.length<3)return 0;for(var f=0,o=t[0].x,n=1;n<t.length-1;n++)c=t[n].x-o,l=t[n+1].y,f+=c*(t[n-1].y-l);return f/2}if(h(arguments[0],ft)){if(e=arguments[0],s=e.size(),s<3)return 0;var a=new r,u=new r,i=new r;for(e.getCoordinate(0,u),e.getCoordinate(1,i),o=u.x,i.x-=o,f=0,n=1;n<s-1;n++)a.y=u.y,u.x=i.x,u.y=i.y,e.getCoordinate(n+1,i),i.x-=o,f+=u.x*(a.y-i.y);return f/2}};wt.distanceLineLine=function(n,t,i,r){var u,f;if(n.equals(t))return wt.distancePointLine(n,i,r);if(i.equals(r))return wt.distancePointLine(r,n,t);if(u=!1,y.intersects(n,t,i,r))if(f=(t.x-n.x)*(r.y-i.y)-(t.y-n.y)*(r.x-i.x),0===f)u=!0;else{var s=(n.y-i.y)*(r.x-i.x)-(n.x-i.x)*(r.y-i.y),e=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/f,o=s/f;(o<0||1<o||e<0||1<e)&&(u=!0)}else u=!0;return u?pr.min(wt.distancePointLine(n,i,r),wt.distancePointLine(t,i,r),wt.distancePointLine(i,n,t),wt.distancePointLine(r,n,t)):0};wt.isPointInRing=function(n,t){return wt.locatePointInRing(n,t)!==i.EXTERIOR};wt.computeLength=function(n){var f=n.size(),i,t;if(f<=1)return 0;i=0;t=new r;n.getCoordinate(0,t);for(var e=t.x,o=t.y,u=1;u<f;u++){n.getCoordinate(u,t);var s=t.x,h=t.y,c=s-e,l=h-o;i+=Math.sqrt(c*c+l*l);e=s;o=h}return i};wt.isCCW=function(n){var o=n.length-1,h,i,u,f,e,c;if(o<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var t=n[0],r=0,s=1;s<=o;s++)h=n[s],h.y>t.y&&(t=h,r=s);for(i=r;(i-=1)<0&&(i=o),n[i].equals2D(t)&&i!==r;);for(u=r;n[u=(u+1)%o].equals2D(t)&&u!==r;);return(f=n[i],e=n[u],f.equals2D(t)||e.equals2D(t)||f.equals2D(e))?!1:(c=wt.computeOrientation(f,t,e),0===c?f.x>e.x:0<c)};wt.locatePointInRing=function(n,t){return vo.locatePointInRing(n,t)};wt.distancePointLinePerpendicular=function(n,t,i){var r=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),u=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/r;return Math.abs(u)*Math.sqrt(r)};wt.computeOrientation=function(n,t,i){return wt.orientationIndex(n,t,i)};wt.distancePointLine=function(){var o,r,f,u,s,e,h,c;if(2===arguments.length){if(o=arguments[0],r=arguments[1],0===r.length)throw new tt("Line array must contain at least one vertex");for(f=o.distance(r[0]),u=0;u<r.length-1;u++)s=wt.distancePointLine(o,r[u],r[u+1]),s<f&&(f=s);return f}if(3===arguments.length){var i=arguments[0],n=arguments[1],t=arguments[2];return n.x===t.x&&n.y===t.y?i.distance(n):(e=(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y),h=((i.x-n.x)*(t.x-n.x)+(i.y-n.y)*(t.y-n.y))/e,h<=0)?i.distance(n):1<=h?i.distance(t):(c=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/e,Math.abs(c)*Math.sqrt(e))}};wt.isOnLine=function(n,t){for(var u,f,r=new fi,i=1;i<t.length;i++)if(u=t[i-1],f=t[i],r.computeIntersection(n,u,f),r.hasIntersection())return!0;return!1};wt.RIGHT=wt.CLOCKWISE=-1;wt.LEFT=wt.COUNTERCLOCKWISE=1;wt.STRAIGHT=wt.COLLINEAR=0;(nb.prototype=new Error).name="EmptyStackException";(cr.prototype=new li).add=function(n){return this.array_.push(n),!0};cr.prototype.get=function(n){if(n<0||n>=this.size())throw new IndexOutOfBoundsException;return this.array_[n]};cr.prototype.push=function(n){return this.array_.push(n),n};cr.prototype.pop=function(){if(0===this.array_.length)throw new nb;return this.array_.pop()};cr.prototype.peek=function(){if(0===this.array_.length)throw new nb;return this.array_[this.array_.length-1]};cr.prototype.empty=function(){return 0===this.array_.length};cr.prototype.isEmpty=function(){return this.empty()};cr.prototype.search=function(n){return this.array_.indexOf(n)};cr.prototype.size=function(){return this.array_.length};cr.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};t(ch.prototype,{filter:function(n){this.treeSet.contains(n)||(this.list.add(n),this.treeSet.add(n))},getCoordinates:function(){var n=new Array(this.list.size()).fill(null);return this.list.toArray(n)},interfaces_:function(){return[pe]},getClass:function(){return ch}});ch.filterCoordinates=function(n){for(var i=new ch,t=0;t<n.length;t++)i.filter(n[t]);return i.getCoordinates()};t(se.prototype,{preSort:function(n){for(var i=null,t=1;t<n.length;t++)(n[t].y<n[0].y||n[t].y===n[0].y&&n[t].x<n[0].x)&&(i=n[0],n[0]=n[t],n[t]=i);return re.sort(n,1,n.length,new lh(n[0])),n},computeOctRing:function(n){var i=this.computeOctPts(n),t=new ni;return t.add(i,!1),t.size()<3?null:(t.closeRing(),t.toCoordinateArray())},lineOrPolygon:function(n){if(3===(n=this.cleanRing(n)).length)return this._geomFactory.createLineString([n[0],n[1]]);var t=this._geomFactory.createLinearRing(n);return this._geomFactory.createPolygon(t)},cleanRing:function(n){var t,e,o;c.equals(n[0],n[n.length-1]);for(var i=new u,f=null,r=0;r<=n.length-2;r++)t=n[r],e=n[r+1],t.equals(e)||null!==f&&this.isBetween(f,t,e)||(i.add(t),f=t);return i.add(n[n.length-1]),o=new Array(i.size()).fill(null),i.toArray(o)},isBetween:function(n,t,i){return 0!==p.index(n,t,i)?!1:n.x!==i.x&&(n.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=n.x)?!0:n.y!==i.y&&(n.y<=t.y&&t.y<=i.y||i.y<=t.y&&t.y<=n.y)?!0:!1},reduce:function(n){var i=this.computeOctRing(n),r,t,u;if(null===i)return n;for(r=new hr,t=0;t<i.length;t++)r.add(i[t]);for(t=0;t<n.length;t++)ur.isInRing(n[t],i)||r.add(n[t]);return u=w.toCoordinateArray(r),u.length<3?this.padArray3(u):u},getConvexHull:function(){var n;if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);n=this._inputPts;50<this._inputPts.length&&(n=this.reduce(this._inputPts));var t=this.preSort(n),i=this.grahamScan(t),r=this.toCoordinateArray(i);return this.lineOrPolygon(r)},padArray3:function(n){for(var i=new Array(3).fill(null),t=0;t<i.length;t++)i[t]=t<n.length?n[t]:n[0];return i},computeOctPts:function(n){for(var i,t=new Array(8).fill(null),r=0;r<t.length;r++)t[r]=n[0];for(i=1;i<n.length;i++)n[i].x<t[0].x&&(t[0]=n[i]),n[i].x-n[i].y<t[1].x-t[1].y&&(t[1]=n[i]),n[i].y>t[2].y&&(t[2]=n[i]),n[i].x+n[i].y>t[3].x+t[3].y&&(t[3]=n[i]),n[i].x>t[4].x&&(t[4]=n[i]),n[i].x-n[i].y>t[5].x-t[5].y&&(t[5]=n[i]),n[i].y<t[6].y&&(t[6]=n[i]),n[i].x+n[i].y<t[7].x+t[7].y&&(t[7]=n[i]);return t},toCoordinateArray:function(n){for(var r,i=new Array(n.size()).fill(null),t=0;t<n.size();t++)r=n.get(t),i[t]=r;return i},grahamScan:function(n){var r=null,t=new cr,i;for(t.push(n[0]),t.push(n[1]),t.push(n[2]),i=3;i<n.length;i++){for(r=t.pop();!t.empty()&&0<p.index(t.peek(),r,n[i]);)r=t.pop();t.push(r);t.push(n[i])}return t.push(n[0]),t},interfaces_:function(){return[]},getClass:function(){return se}});se.extractCoordinates=function(n){var t=new ch;return n.apply(t),t.getCoordinates()};t(lh.prototype,{compare:function(n,t){var i=n,r=t;return lh.polarCompare(this._origin,i,r)},interfaces_:function(){return[eo]},getClass:function(){return lh}});lh.polarCompare=function(n,t,i){var f=t.x-n.x,e=t.y-n.y,o=i.x-n.x,s=i.y-n.y,h=p.index(n,t,i),r,u;return h===p.COUNTERCLOCKWISE?1:h===p.CLOCKWISE?-1:(r=f*f+e*e,u=o*o+s*s,r<u?-1:u<r?1:0)};se.RadialComparator=lh;t(nf.prototype,{addPolygon:function(n){var f,u;if(n.isEmpty())return null;var i=null,t=null,r=this.horizontalBisector(n);0===r.getLength()?(t=0,i=r.getCoordinate()):(f=r.intersection(n),u=this.widestGeometry(f),t=u.getEnvelopeInternal().getWidth(),i=nf.centre(u.getEnvelopeInternal()));(null===this._interiorPoint||t>this._maxWidth)&&(this._interiorPoint=i,this._maxWidth=t)},getInteriorPoint:function(){return this._interiorPoint},widestGeometry:function(){var n,i,t,r;if(arguments[0]instanceof g){if(n=arguments[0],n.isEmpty())return n;for(i=n.getGeometryN(0),t=1;t<n.getNumGeometries();t++)n.getGeometryN(t).getEnvelopeInternal().getWidth()>i.getEnvelopeInternal().getWidth()&&(i=n.getGeometryN(t));return i}if(arguments[0]instanceof s)return r=arguments[0],r instanceof g?this.widestGeometry(r):r},horizontalBisector:function(n){var t=n.getEnvelopeInternal(),i=ah.getBisectorY(n);return this._factory.createLineString([new r(t.getMinX(),i),new r(t.getMaxX(),i)])},add:function(n){if(n instanceof st)this.addPolygon(n);else if(n instanceof g)for(var i=n,t=0;t<i.getNumGeometries();t++)this.add(i.getGeometryN(t))},interfaces_:function(){return[]},getClass:function(){return nf}});nf.centre=function(n){return new r(nf.avg(n.getMinX(),n.getMaxX()),nf.avg(n.getMinY(),n.getMaxY()))};nf.avg=function(n,t){return(n+t)/2};t(ah.prototype,{updateInterval:function(n){n<=this._centreY?n>this._loY&&(this._loY=n):n>this._centreY&&n<this._hiY&&(this._hiY=n)},getBisectorY:function(){this.process(this._poly.getExteriorRing());for(var n=0;n<this._poly.getNumInteriorRing();n++)this.process(this._poly.getInteriorRingN(n));return nf.avg(this._hiY,this._loY)},process:function(n){for(var r,i=n.getCoordinateSequence(),t=0;t<i.size();t++)r=i.getY(t),this.updateInterval(r)},interfaces_:function(){return[]},getClass:function(){return ah}});ah.getBisectorY=function(n){return new ah(n).getBisectorY()};nf.SafeBisectorFinder=ah;t(ry.prototype,{addEndpoints:function(){var n,r,t,i;if(arguments[0]instanceof s){if(n=arguments[0],n instanceof k)this.addEndpoints(n.getCoordinates());else if(n instanceof g)for(r=n,t=0;t<r.getNumGeometries();t++)this.addEndpoints(r.getGeometryN(t))}else arguments[0]instanceof Array&&(i=arguments[0],this.add(i[0]),this.add(i[i.length-1]))},getInteriorPoint:function(){return this._interiorPoint},addInterior:function(){var t,i,n,r;if(arguments[0]instanceof s){if(t=arguments[0],t instanceof k)this.addInterior(t.getCoordinates());else if(t instanceof g)for(i=t,n=0;n<i.getNumGeometries();n++)this.addInterior(i.getGeometryN(n))}else if(arguments[0]instanceof Array)for(r=arguments[0],n=1;n<r.length-1;n++)this.add(r[n])},add:function(n){var t=n.distance(this._centroid);t<this._minDistance&&(this._interiorPoint=new r(n),this._minDistance=t)},interfaces_:function(){return[]},getClass:function(){return ry}});t(uy.prototype,{getInteriorPoint:function(){return this._interiorPoint},add:function(){var n,i,t,u,f;if(arguments[0]instanceof s){if(n=arguments[0],n instanceof dt)this.add(n.getCoordinate());else if(n instanceof g)for(i=n,t=0;t<i.getNumGeometries();t++)this.add(i.getGeometryN(t))}else arguments[0]instanceof r&&(u=arguments[0],f=u.distance(this._centroid),f<this._minDistance&&(this._interiorPoint=new r(u),this._minDistance=f))},interfaces_:function(){return[]},getClass:function(){return uy}});t(yo.prototype,{select:function(){if(1!==arguments.length&&2===arguments.length){var n=arguments[0],t=arguments[1];n.getLineSegment(t,this.selectedSegment);this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return yo}});t(vf.prototype,{hasChildren:function(){for(var n=0;n<2;n++)if(null!==this._subnode[n])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(n){n.addAll(this._items);for(var t=0;t<2;t++)null!==this._subnode[t]&&this._subnode[t].addAllItems(n);return n},size:function(){for(var t=0,n=0;n<2;n++)null!==this._subnode[n]&&(t+=this._subnode[n].size());return t+this._items.size()},addAllItemsFromOverlapping:function(n,t){if(null!==n&&!this.isSearchMatch(n))return null;t.addAll(this._items);null!==this._subnode[0]&&this._subnode[0].addAllItemsFromOverlapping(n,t);null!==this._subnode[1]&&this._subnode[1].addAllItemsFromOverlapping(n,t)},hasItems:function(){return!this._items.isEmpty()},remove:function(n,t){if(!this.isSearchMatch(n))return!1;for(var r=!1,i=0;i<2;i++)if(null!==this._subnode[i]&&(r=this._subnode[i].remove(n,t))){this._subnode[i].isPrunable()&&(this._subnode[i]=null);break}return r||(r=this._items.remove(t))},getItems:function(){return this._items},depth:function(){for(var i,t=0,n=0;n<2;n++)null!==this._subnode[n]&&(i=this._subnode[n].depth(),t<i&&(t=i));return t+1},nodeSize:function(){for(var t=0,n=0;n<2;n++)null!==this._subnode[n]&&(t+=this._subnode[n].nodeSize());return t+1},add:function(n){this._items.add(n)},interfaces_:function(){return[]},getClass:function(){return vf}});vf.getSubnodeIndex=function(n,t){var i=-1;return n.min>=t&&(i=1),n.max<=t&&(i=0),i};t(he.prototype,{expandToInclude:function(n){n.max>this.max&&(this.max=n.max);n.min<this.min&&(this.min=n.min)},getWidth:function(){return this.max-this.min},overlaps:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this.overlaps(n.min,n.max)):2===arguments.length?(t=arguments[0],i=arguments[1],!(this.min>i||this.max<t)):void 0},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){var n,t,i,r;if(1===arguments.length){if(arguments[0]instanceof he)return n=arguments[0],this.contains(n.min,n.max);if("number"==typeof arguments[0])return t=arguments[0],t>=this.min&&t<=this.max}else if(2===arguments.length)return i=arguments[0],r=arguments[1],i>=this.min&&r<=this.max},init:function(n,t){this.min=n;(this.max=t)<n&&(this.min=t,this.max=n)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return he}});ws.exponent=function(n){return function(n,t){var f,i,r,u,e={32:8,64:11}[n];if(u||(f=t<0||1/t<0,isFinite(t)||(u={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[n],f&&(u.d+=1<<n/4-1),i=Math.pow(2,e)-1,r=0)),!u){for(i={32:127,64:1023}[n],r=Math.abs(t);2<=r;)i++,r/=2;for(;r<1&&0<i;)i--,r*=2;i<=0&&(r/=2);32===n&&254<i&&(u={d:f?255:127,c:128,b:0,a:0},i=Math.pow(2,e)-1,r=0)}return i}(64,n)-1023};ws.powerOf2=function(n){return Math.pow(2,n)};t(rl.prototype,{getInterval:function(){return this._interval},getLevel:function(){return this._level},computeKey:function(n){for(this._level=rl.computeLevel(n),this._interval=new he,this.computeInterval(this._level,n);!this._interval.contains(n);)this._level+=1,this.computeInterval(this._level,n)},computeInterval:function(n,t){var i=ws.powerOf2(n);this._pt=Math.floor(t.getMin()/i)*i;this._interval.init(this._pt,this._pt+i)},getPoint:function(){return this._pt},interfaces_:function(){return[]},getClass:function(){return rl}});rl.computeLevel=function(n){var t=n.getWidth();return ws.exponent(t)+1};v(ge,vf);t(ge.prototype,{getInterval:function(){return this._interval},find:function(n){var t=vf.getSubnodeIndex(n,this._centre);return-1===t?this:null!==this._subnode[t]?this._subnode[t].find(n):this},insert:function(n){var t,i;c.isTrue(null===this._interval||this._interval.contains(n._interval));t=vf.getSubnodeIndex(n._interval,this._centre);n._level===this._level-1?this._subnode[t]=n:(i=this.createSubnode(t),i.insert(n),this._subnode[t]=i)},isSearchMatch:function(n){return n.overlaps(this._interval)},getSubnode:function(n){return null===this._subnode[n]&&(this._subnode[n]=this.createSubnode(n)),this._subnode[n]},getNode:function(n){var t=vf.getSubnodeIndex(n,this._centre);return-1!==t?this.getSubnode(t).getNode(n):this},createSubnode:function(n){var t=0,i=0;switch(n){case 0:t=this._interval.getMin();i=this._centre;break;case 1:t=this._centre;i=this._interval.getMax()}return new ge(new he(t,i),this._level-1)},interfaces_:function(){return[]},getClass:function(){return ge}});ge.createNode=function(n){var t=new rl(n);return new ge(t.getInterval(),t.getLevel())};ge.createExpanded=function(n,t){var r=new he(t),i;return null!==n&&r.expandToInclude(n._interval),i=ge.createNode(r),null!==n&&i.insert(n),i};t(po.prototype,{interfaces_:function(){return[]},getClass:function(){return po}});po.isZeroWidth=function(n,t){var i=t-n,r;return 0===i?!0:(r=Math.max(Math.abs(n),Math.abs(t)),ws.exponent(i/r)<=po.MIN_BINARY_EXPONENT)};po.MIN_BINARY_EXPONENT=-50;v(vh,vf);t(vh.prototype,{insert:function(n,t){var i=vf.getSubnodeIndex(n,vh.origin),r,u;if(-1===i)return this.add(t),null;r=this._subnode[i];null!==r&&r.getInterval().contains(n)||(u=ge.createExpanded(r,n),this._subnode[i]=u);this.insertContained(this._subnode[i],n,t)},isSearchMatch:function(){return!0},insertContained:function(n,t,i){c.isTrue(n.getInterval().contains(t));(po.isZeroWidth(t.getMin(),t.getMax())?n.find(t):n.getNode(t)).add(i)},interfaces_:function(){return[]},getClass:function(){return vh}});vh.origin=0;t(yh.prototype,{size:function(){return null!==this._root?this._root.size():0},insert:function(n,t){this.collectStats(n);var i=yh.ensureExtent(n,this._minExtent);this._root.insert(i,t)},query:function(){var n,i,t,r,f;if(1===arguments.length){if("number"==typeof arguments[0])return n=arguments[0],this.query(new he(n,n));if(arguments[0]instanceof he)return i=arguments[0],t=new u,this.query(i,t),t}else 2===arguments.length&&(r=arguments[0],f=arguments[1],this._root.addAllItemsFromOverlapping(r,f))},iterator:function(){var n=new u;return this._root.addAllItems(n),n.iterator()},remove:function(n,t){var i=yh.ensureExtent(n,this._minExtent);return this._root.remove(i,t)},collectStats:function(n){var t=n.getWidth();t<this._minExtent&&0<t&&(this._minExtent=t)},depth:function(){return null!==this._root?this._root.depth():0},nodeSize:function(){return null!==this._root?this._root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return yh}});yh.ensureExtent=function(n,t){var i=n.getMin(),r=n.getMax();return i!==r?n:(i===r&&(r=(i-=t/2)+t/2),new he(i,r))};t(fy.prototype,{getLineSegment:function(n,t){t.p0=this._pts[n];t.p1=this._pts[n+1]},computeSelect:function(n,t,i,r){var f=this._pts[t],e=this._pts[i],u;if(i-t==1)return r.select(this,t),null;if(!n.intersects(f,e))return null;u=Math.trunc((t+i)/2);t<u&&this.computeSelect(n,t,u,r);u<i&&this.computeSelect(n,u,i,r)},getCoordinates:function(){for(var t=new Array(this._end-this._start+1).fill(null),i=0,n=this._start;n<=this._end;n++)t[i++]=this._pts[n];return t},computeOverlaps:function(){var s,h,u,n;if(2===arguments.length)s=arguments[0],h=arguments[1],this.computeOverlaps(this._start,this._end,s,s._start,s._end,h);else if(6===arguments.length){var i=arguments[0],f=arguments[1],e=arguments[2],t=arguments[3],r=arguments[4],o=arguments[5];if(f-i==1&&r-t==1)return o.overlap(this,i,e,t),null;if(!this.overlaps(i,f,e,t,r))return null;u=Math.trunc((i+f)/2);n=Math.trunc((t+r)/2);i<u&&(t<n&&this.computeOverlaps(i,u,e,t,n,o),n<r&&this.computeOverlaps(i,u,e,n,r,o));u<f&&(t<n&&this.computeOverlaps(u,f,e,t,n,o),n<r&&this.computeOverlaps(u,f,e,n,r,o))}},setId:function(n){this._id=n},select:function(n,t){this.computeSelect(n,this._start,this._end,t)},getEnvelope:function(){if(null===this._env){var n=this._pts[this._start],t=this._pts[this._end];this._env=new y(n,t)}return this._env},overlaps:function(n,t,i,r,u){return y.intersects(this._pts[n],this._pts[t],i._pts[r],i._pts[u])},getEndIndex:function(){return this._end},getStartIndex:function(){return this._start},getContext:function(){return this._context},getId:function(){return this._id},interfaces_:function(){return[]},getClass:function(){return fy}});t(rt.prototype,{interfaces_:function(){return[]},getClass:function(){return rt}});rt.isNorthern=function(n){return n===rt.NE||n===rt.NW};rt.isOpposite=function(n,t){return n!==t&&2==(n-t+4)%4};rt.commonHalfPlane=function(n,t){if(n===t)return n;if(2==(n-t+4)%4)return-1;var i=n<t?n:t;return 0===i&&3===(t<n?n:t)?3:i};rt.isInHalfPlane=function(n,t){return t===rt.SE?n===rt.SE||n===rt.SW:n===t||n===t+1};rt.quadrant=function(){var u,i,n,t;if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){if(u=arguments[0],i=arguments[1],0===u&&0===i)throw new tt("Cannot compute the quadrant for point ( "+u+", "+i+" )");return 0<=u?0<=i?rt.NE:rt.SE:0<=i?rt.NW:rt.SW}if(arguments[0]instanceof r&&arguments[1]instanceof r){if(n=arguments[0],t=arguments[1],t.x===n.x&&t.y===n.y)throw new tt("Cannot compute the quadrant for two identical points "+n);return t.x>=n.x?t.y>=n.y?rt.NE:rt.SE:t.y>=n.y?rt.NW:rt.SW}};rt.NE=0;rt.NW=1;rt.SW=2;rt.SE=3;t(tf.prototype,{interfaces_:function(){return[]},getClass:function(){return tf}});tf.getChainStartIndices=function(n){var t=0,i=new u,r;i.add(new wu(t));do r=tf.findChainEnd(n,t),i.add(new wu(r)),t=r;while(t<n.length-1);return tf.toIntArray(i)};tf.findChainEnd=function(n,t){for(var u,r,i=t;i<n.length-1&&n[i].equals2D(n[i+1]);)i++;if(i>=n.length-1)return n.length-1;for(u=rt.quadrant(n[i],n[i+1]),r=t+1;r<n.length;){if(!n[r-1].equals2D(n[r])&&rt.quadrant(n[r-1],n[r])!==u)break;r++}return r-1};tf.getChains=function(){var i,e;if(1===arguments.length)return i=arguments[0],tf.getChains(i,null);if(2===arguments.length){for(var r=arguments[0],o=arguments[1],f=new u,t=tf.getChainStartIndices(r),n=0;n<t.length-1;n++)e=new fy(r,t[n],t[n+1],o),f.add(e);return f}};tf.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};t(ph.prototype,{interfaces_:function(){return[]},getClass:function(){return ph}});ph.orientationIndex=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=i.x-t.x,e=i.y-t.y;return ph.signOfDet2x2(r,u,f,e)};ph.signOfDet2x2=function(n,t,i,r){var u=null,f=null,e=null;if(u=1,0===n||0===r)return 0===t||0===i?0:0<t?0<i?-u:u:0<i?u:-u;if(0===t||0===i)return 0<r?0<n?u:-u:0<n?-u:u;if(0<t?0<r?t<=r||(u=-u,f=n,n=i,i=f,f=t,t=r,r=f):t<=-r?(u=-u,i=-i,r=-r):(f=n,n=-i,i=f,f=t,t=-r,r=f):0<r?-t<=r?(u=-u,n=-n,t=-t):(f=-n,n=i,i=f,f=-t,t=r,r=f):r<=t?(n=-n,t=-t,i=-i,r=-r):(u=-u,f=-n,n=-i,i=f,f=-t,t=-r,r=f),0<n){if(!(0<i)||!(n<=i))return u}else{if(0<i||!(i<=n))return-u;u=-u;n=-n;i=-i}for(;;){if((r-=(e=Math.floor(i/n))*t)<0)return-u;if(t<r)return u;if((i-=e*n)+i<n){if(t<r+r)return u}else{if(r+r<t)return-u;i=n-i;r=t-r;u=-u}if(0===r)return 0===i?0:-u;if(0===i||(t-=(e=Math.floor(n/i))*r)<0)return u;if(r<t)return-u;if((n-=e*i)+n<i){if(r<t+t)return-u}else{if(t+t<r)return u;n=i-n;t=r-t;u=-u}if(0===t)return 0===n?0:u;if(0===n)return-u}};t(tb.prototype,{isInside:function(){},interfaces_:function(){return[]},getClass:function(){return tb}});t(ey.prototype,{testLineSegment:function(n,t){var u,i,f,r,e=t.p0,o=t.p1;u=e.x-n.x;i=e.y-n.y;f=o.x-n.x;r=o.y-n.y;(0<i&&r<=0||0<r&&i<=0)&&0<ph.signOfDet2x2(u,i,f,r)/(r-i)&&this._crossings++},buildIndex:function(){var t,i;this._tree=new yh;for(var u=w.removeRepeatedPoints(this._ring.getCoordinates()),r=tf.getChains(u),n=0;n<r.size();n++)t=r.get(n),i=t.getEnvelope(),this._interval.min=i.getMinY(),this._interval.max=i.getMaxY(),this._tree.insert(this._interval,t)},testMonotoneChain:function(n,t,i){i.select(n,t)},isInside:function(n){var t,r;this._crossings=0;t=new y(l.NEGATIVE_INFINITY,l.POSITIVE_INFINITY,n.y,n.y);this._interval.min=n.y;this._interval.max=n.y;for(var u=this._tree.query(this._interval),f=new ul(this,n),i=u.iterator();i.hasNext();)r=i.next(),this.testMonotoneChain(t,f,r);return this._crossings%2==1},interfaces_:function(){return[tb]},getClass:function(){return ey}});v(ul,yo);t(ul.prototype,{select:function(){if(1!==arguments.length)return yo.prototype.select.apply(this,arguments);var n=arguments[0];this.mcp.testLineSegment(this.p,n)},interfaces_:function(){return[]},getClass:function(){return ul}});ey.MCSelecter=ul;t(no.prototype,{getRadius:function(){return this.compute(),this._radius},getDiameter:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var n=this._extremalPts[0],t=this._extremalPts[1];return this._input.getFactory().createLineString([n,t])},getExtremalPoints:function(){return this.compute(),this._extremalPts},computeCirclePoints:function(){var n,t,f;if(this._input.isEmpty())return this._extremalPts=new Array(0).fill(null),null;if(1===this._input.getNumPoints())return n=this._input.getCoordinates(),this._extremalPts=[new r(n[0])],null;if(t=this._input.convexHull().getCoordinates(),n=t,t[0].equals2D(t[t.length-1])&&(n=new Array(t.length-1).fill(null),w.copyDeep(t,0,n,0,t.length-1)),n.length<=2)return this._extremalPts=w.copyDeep(n),null;for(var i=no.lowestPoint(n),u=no.pointWitMinAngleWithX(n,i),e=0;e<n.length;e++){if(f=no.pointWithMinAngleWithSegment(n,i,u),d.isObtuse(i,f,u))return this._extremalPts=[new r(i),new r(u)],null;if(d.isObtuse(f,i,u))i=f;else{if(!d.isObtuse(f,u,i))return this._extremalPts=[new r(i),new r(u),new r(f)],null;u=f}}c.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){if(null!==this._extremalPts)return null;this.computeCirclePoints();this.computeCentre();null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))},getFarthestPoints:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var n=this._extremalPts[0],t=this._extremalPts[this._extremalPts.length-1];return this._input.getFactory().createLineString([n,t])},getCircle:function(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();var n=this._input.getFactory().createPoint(this._centre);return 0===this._radius?n:n.buffer(this._radius)},getCentre:function(){return this.compute(),this._centre},computeCentre:function(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new r((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=lt.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return no}});no.pointWitMinAngleWithX=function(n,t){for(var r,f,i,e,o=l.MAX_VALUE,s=null,u=0;u<n.length;u++)r=n[u],r!==t&&(f=r.x-t.x,i=r.y-t.y,i<0&&(i=-i),e=i/Math.sqrt(f*f+i*i),e<o&&(o=e,s=r));return s};no.lowestPoint=function(n){for(var i=n[0],t=1;t<n.length;t++)n[t].y<i.y&&(i=n[t]);return i};no.pointWithMinAngleWithSegment=function(n,t,i){for(var r,f,e=l.MAX_VALUE,o=null,u=0;u<n.length;u++)r=n[u],r!==t&&r!==i&&(f=d.angleBetween(t,r,i),f<e&&(e=f,o=r));return o};t(nr.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this._minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();var n=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([n,this._minWidthPt])},computeWidthConvex:function(n){this._convexHullPts=n instanceof st?n.getExteriorRing().getCoordinates():n.getCoordinates();0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)},computeConvexRingMinDiameter:function(n){this._minWidth=l.MAX_VALUE;for(var r=1,i=new b,t=0;t<n.length-1;t++)i.p0=n[t],i.p1=n[t+1],r=this.findMaxPerpDistance(n,i,r)},computeMinimumDiameter:function(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{var n=new se(this._inputGeom).getConvexHull();this.computeWidthConvex(n)}},getLength:function(){return this.computeMinimumDiameter(),this._minWidth},findMaxPerpDistance:function(n,t,i){for(var r=t.distancePerpendicular(n[i]),f=r,u=i,e=u;r<=f;)r=f,e=nr.nextIndex(n,u=e),f=t.distancePerpendicular(n[e]);return r<this._minWidth&&(this._minPtIndex=u,this._minWidth=r,this._minWidthPt=n[this._minPtIndex],this._minBaseSeg=new b(t)),u},getMinimumRectangle:function(){var i,r;if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());for(var n=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,t=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,f=l.MAX_VALUE,e=-l.MAX_VALUE,o=l.MAX_VALUE,s=-l.MAX_VALUE,u=0;u<this._convexHullPts.length;u++)i=nr.computeC(n,t,this._convexHullPts[u]),e<i&&(e=i),i<f&&(f=i),r=nr.computeC(-t,n,this._convexHullPts[u]),s<r&&(s=r),r<o&&(o=r);var h=nr.computeSegmentForLine(-n,-t,s),c=nr.computeSegmentForLine(-n,-t,o),a=nr.computeSegmentForLine(-t,n,e),v=nr.computeSegmentForLine(-t,n,f),y=a.lineIntersection(h),p=v.lineIntersection(h),w=v.lineIntersection(c),b=a.lineIntersection(c),k=this._inputGeom.getFactory().createLinearRing([y,p,w,b,y]);return this._inputGeom.getFactory().createPolygon(k)},interfaces_:function(){return[]},getClass:function(){return nr}});nr.nextIndex=function(n,t){return++t>=n.length&&(t=0),t};nr.computeC=function(n,t,i){return n*i.y-t*i.x};nr.getMinimumDiameter=function(n){return new nr(n).getDiameter()};nr.getMinimumRectangle=function(n){return new nr(n).getMinimumRectangle()};nr.computeSegmentForLine=function(n,t,i){var u=null,f=null;return Math.abs(t)>Math.abs(n)?(u=new r(0,i/t),f=new r(1,i/t-n/t)):(u=new r(i/n,0),f=new r(i/n-t/n,1)),new b(u,f)};id=Object.freeze({distance:gk,locate:nd,match:td,Angle:d,Centroid:oe,CGAlgorithms:wt,ConvexHull:se,Distance:ti,InteriorPointArea:nf,InteriorPointLine:ry,InteriorPointPoint:uy,RobustLineIntersector:fi,MCPointInRing:ey,MinimumBoundingCircle:no,MinimumDiameter:nr});t(lr.prototype,{transformPoint:function(n){return this._factory.createPoint(this.transformCoordinates(n.getCoordinateSequence(),n))},transformPolygon:function(n){var o=!0,t=this.transformLinearRing(n.getExteriorRing(),n),r,f,i,e;for(null!==t&&t instanceof ii&&!t.isEmpty()||(o=!1),r=new u,f=0;f<n.getNumInteriorRing();f++)i=this.transformLinearRing(n.getInteriorRingN(f),n),null===i||i.isEmpty()||(i instanceof ii||(o=!1),r.add(i));return o?this._factory.createPolygon(t,r.toArray([])):(e=new u,null!==t&&e.add(t),e.addAll(r),this._factory.buildGeometry(e))},createCoordinateSequence:function(n){return this._factory.getCoordinateSequenceFactory().create(n)},getInputGeometry:function(){return this._inputGeom},transformMultiLineString:function(n){for(var i,r=new u,t=0;t<n.getNumGeometries();t++)i=this.transformLineString(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)},transformCoordinates:function(n){return this.copy(n)},transformLineString:function(n){return this._factory.createLineString(this.transformCoordinates(n.getCoordinateSequence(),n))},transformMultiPoint:function(n){for(var i,r=new u,t=0;t<n.getNumGeometries();t++)i=this.transformPoint(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)},transformMultiPolygon:function(n){for(var i,r=new u,t=0;t<n.getNumGeometries();t++)i=this.transformPolygon(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)},copy:function(n){return n.copy()},transformGeometryCollection:function(n){for(var r,t=new u,i=0;i<n.getNumGeometries();i++)r=this.transform(n.getGeometryN(i)),null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||t.add(r));return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(nt.toGeometryArray(t)):this._factory.buildGeometry(t)},transform:function(n){if(this._inputGeom=n,this._factory=n.getFactory(),n instanceof dt)return this.transformPoint(n,null);if(n instanceof wr)return this.transformMultiPoint(n,null);if(n instanceof ii)return this.transformLinearRing(n,null);if(n instanceof k)return this.transformLineString(n,null);if(n instanceof rr)return this.transformMultiLineString(n,null);if(n instanceof st)return this.transformPolygon(n,null);if(n instanceof vi)return this.transformMultiPolygon(n,null);if(n instanceof g)return this.transformGeometryCollection(n,null);throw new tt("Unknown Geometry subtype: "+n.getClass().getName());},transformLinearRing:function(n){var t=this.transformCoordinates(n.getCoordinateSequence(),n),i;return null===t?this._factory.createLinearRing(null):(i=t.size(),0<i&&i<4&&!this._preserveType?this._factory.createLineString(t):this._factory.createLinearRing(t))},interfaces_:function(){return[]},getClass:function(){return lr}});t(wo.prototype,{getResultGeometry:function(){return new fl(this._distanceTolerance).transform(this._inputGeom)},setDistanceTolerance:function(n){if(n<=0)throw new tt("Tolerance must be positive");this._distanceTolerance=n},interfaces_:function(){return[]},getClass:function(){return wo}});wo.densifyPoints=function(n,t,i){for(var e,o,c,s,l,h,r=new b,u=new ni,f=0;f<n.length-1;f++)if(r.p0=n[f],r.p1=n[f+1],u.add(r.p0,!1),e=r.getLength(),o=Math.trunc(e/t)+1,1<o)for(c=e/o,s=1;s<o;s++)l=s*c/e,h=r.pointAlong(l),i.makePrecise(h),u.add(h,!1);return u.add(n[n.length-1],!1),u.toCoordinateArray()};wo.densify=function(n,t){var i=new wo(n);return i.setDistanceTolerance(t),i.getResultGeometry()};v(fl,lr);t(fl.prototype,{transformMultiPolygon:function(n,t){var i=lr.prototype.transformMultiPolygon.call(this,n,t);return this.createValidArea(i)},transformPolygon:function(n,t){var i=lr.prototype.transformPolygon.call(this,n,t);return t instanceof vi?i:this.createValidArea(i)},transformCoordinates:function(n,t){var r=n.toCoordinateArray(),i=wo.densifyPoints(r,this.distanceTolerance,t.getPrecisionModel());return t instanceof k&&1===i.length&&(i=new Array(0).fill(null)),this._factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(n){return n.buffer(0)},interfaces_:function(){return[]},getClass:function(){return fl}});wo.DensifyTransformer=fl;rd=Object.freeze({Densifier:wo});t(ce.prototype,{find:function(n){var t=this;do{if(null===t)return null;if(t.dest().equals2D(n))return t;t=t.oNext()}while(t!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(n){var r,t,i;if(this.oNext()===this)return this.insertAfter(n),null;r=this.compareTo(n);t=this;do{if(i=t.oNext(),i.compareTo(n)!==r||i===this)return t.insertAfter(n),null;t=i}while(t!==this);c.shouldNeverReachHere()},insertAfter:function(n){c.equals(this._orig,n.orig());var t=this.oNext();this._sym.setNext(n);n.sym().setNext(t)},degree:function(){for(var n=0,t=this;n++,(t=t.oNext())!==this;);return n},equals:function(){if(2===arguments.length&&arguments[1]instanceof r&&arguments[0]instanceof r){var n=arguments[0],t=arguments[1];return this._orig.equals2D(n)&&this._sym._orig.equals(t)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(n){var r=this.deltaX(),u=this.deltaY(),f=n.deltaX(),e=n.deltaY(),t,i;return r===f&&u===e?0:(t=rt.quadrant(r,u),i=rt.quadrant(f,e),i<t?1:t<i?-1:p.index(n._orig,n.dest(),this.dest()))},prevNode:function(){for(var n=this;2===n.degree();)if((n=n.prev())===this)return null;return n},compareTo:function(n){var t=n;return this.compareAngularDirection(t)},next:function(){return this._next},setSym:function(n){this._sym=n},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(n){this._next=n},init:function(n){this.setSym(n);n.setSym(this);this.setNext(n);n.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return ce}});ce.init=function(n,t){if(null!==n._sym||null!==t._sym||null!==n._next||null!==t._next)throw new IllegalStateException("Edges are already initialized");return n.init(t),n};ce.create=function(n,t){var i=new ce(n),r=new ce(t);return i.init(r),i};v(kr,ce);t(kr.prototype,{mark:function(){this._isMarked=!0},setMark:function(n){this._isMarked=n},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return kr}});kr.setMarkBoth=function(n,t){n.setMark(t);n.sym().setMark(t)};kr.isMarked=function(n){return n.isMarked()};kr.setMark=function(n,t){n.setMark(t)};kr.markBoth=function(n){n.mark();n.sym().mark()};kr.mark=function(n){n.mark()};t(wh.prototype,{insert:function(n,t,i){var r=this.create(n,t),u;return null!==i?i.insert(r):this._vertexMap.put(n,r),u=this._vertexMap.get(t),null!==u?u.insert(r.sym()):this._vertexMap.put(t,r.sym()),r},create:function(n,t){var i=this.createEdge(n),r=this.createEdge(t);return ce.init(i,r),i},createEdge:function(n){return new ce(n)},addEdge:function(n,t){if(!wh.isValidEdge(n,t))return null;var i=this._vertexMap.get(n),r=null;return null!==i&&(r=i.find(t)),null!==r?r:this.insert(n,t,i)},getVertexEdges:function(){return this._vertexMap.values()},findEdge:function(n,t){var i=this._vertexMap.get(n);return null===i?null:i.find(t)},interfaces_:function(){return[]},getClass:function(){return wh}});wh.isValidEdge=function(n,t){return 0!==t.compareTo(n)};v(oy,kr);t(oy.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return oy}});v(sy,wh);t(sy.prototype,{createEdge:function(n){return new oy(n)},interfaces_:function(){return[]},getClass:function(){return sy}});t(el.prototype,{addLine:function(n){this._lines.add(this._factory.createLineString(n.toCoordinateArray()))},updateRingStartEdge:function(n){return n.isStart()||(n=n.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=n,null):void(n.orig().compareTo(this._ringStartEdge.orig())<0&&(this._ringStartEdge=n)):null},getResult:function(){return null===this._result&&this.computeResult(),this._result},process:function(n){var t=n.prevNode();null===t&&(t=n);this.stackEdges(t);this.buildLines()},buildRing:function(n){var i=new ni,t=n,r;for(i.add(t.orig().copy(),!1);2===t.sym().degree();){if(r=t.next(),r===n)break;i.add(r.orig().copy(),!1);t=r}i.add(t.dest().copy(),!1);this.addLine(i)},buildLine:function(n){var i=new ni,t=n,r;for(this._ringStartEdge=null,kr.markBoth(t),i.add(t.orig().copy(),!1);2===t.sym().degree();){if(this.updateRingStartEdge(t),r=t.next(),r===n)return this.buildRing(this._ringStartEdge),null;i.add(r.orig().copy(),!1);kr.markBoth(t=r)}i.add(t.dest().clone(),!1);this.stackEdges(t.sym());this.addLine(i)},stackEdges:function(n){for(var t=n;kr.isMarked(t)||this._nodeEdgeStack.add(t),(t=t.oNext())!==n;);},computeResult:function(){for(var t,n=this._graph.getVertexEdges().iterator();n.hasNext();)t=n.next(),kr.isMarked(t)||this.process(t);this._result=this._factory.buildGeometry(this._lines)},buildLines:function(){for(;!this._nodeEdgeStack.empty();){var n=this._nodeEdgeStack.pop();kr.isMarked(n)||this.buildLine(n)}},add:function(){var n,f,i,t,r,u;if(arguments[0]instanceof s)arguments[0].apply({interfaces_:function(){return[bu]},filter:function(n){n instanceof k&&this.add(n)}});else if(h(arguments[0],at))for(n=arguments[0].iterator();n.hasNext();)f=n.next(),this.add(f);else if(arguments[0]instanceof k)for(i=arguments[0],null===this._factory&&(this._factory=i.getFactory()),t=i.getCoordinateSequence(),r=!1,n=1;n<t.size();n++)u=this._graph.addEdge(t.getCoordinate(n-1),t.getCoordinate(n)),null!==u&&(r||(u.setStart(),r=!0))},interfaces_:function(){return[]},getClass:function(){return el}});el.dissolve=function(n){var t=new el;return t.add(n),t.getResult()};ud=Object.freeze({LineDissolver:el});t(bs.prototype,{locateInPolygonRing:function(n,t){return t.getEnvelopeInternal().intersects(n)?ur.locateInRing(n,t.getCoordinates()):i.EXTERIOR},intersects:function(n,t){return this.locate(n,t)!==i.EXTERIOR},updateLocationInfo:function(n){n===i.INTERIOR&&(this._isIn=!0);n===i.BOUNDARY&&this._numBoundaries++},computeLocation:function(n,t){var r,i,o,u,s,f,e;if(t instanceof dt&&this.updateLocationInfo(this.locateOnPoint(n,t)),t instanceof k)this.updateLocationInfo(this.locateOnLineString(n,t));else if(t instanceof st)this.updateLocationInfo(this.locateInPolygon(n,t));else if(t instanceof rr)for(r=t,i=0;i<r.getNumGeometries();i++)o=r.getGeometryN(i),this.updateLocationInfo(this.locateOnLineString(n,o));else if(t instanceof vi)for(u=t,i=0;i<u.getNumGeometries();i++)s=u.getGeometryN(i),this.updateLocationInfo(this.locateInPolygon(n,s));else if(t instanceof g)for(f=new ys(t);f.hasNext();)e=f.next(),e!==t&&this.computeLocation(n,e)},locateOnPoint:function(n,t){return t.getCoordinate().equals2D(n)?i.INTERIOR:i.EXTERIOR},locateOnLineString:function(n,t){if(!t.getEnvelopeInternal().intersects(n))return i.EXTERIOR;var r=t.getCoordinateSequence();return t.isClosed()||!n.equals(r.getCoordinate(0))&&!n.equals(r.getCoordinate(r.size()-1))?ur.isOnLine(n,r)?i.INTERIOR:i.EXTERIOR:i.BOUNDARY},locateInPolygon:function(n,t){var e,u,r,o,f;if(t.isEmpty()||(e=t.getExteriorRing(),u=this.locateInPolygonRing(n,e),u===i.EXTERIOR))return i.EXTERIOR;if(u===i.BOUNDARY)return i.BOUNDARY;for(r=0;r<t.getNumInteriorRing();r++){if(o=t.getInteriorRingN(r),f=this.locateInPolygonRing(n,o),f===i.INTERIOR)return i.EXTERIOR;if(f===i.BOUNDARY)return i.BOUNDARY}return i.INTERIOR},locate:function(n,t){return t.isEmpty()?i.EXTERIOR:t instanceof k?this.locateOnLineString(n,t):t instanceof st?this.locateInPolygon(n,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(n,t),this._boundaryRule.isInBoundary(this._numBoundaries)?i.BOUNDARY:0<this._numBoundaries||this._isIn?i.INTERIOR:i.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return bs}});t(o.prototype,{interfaces_:function(){return[]},getClass:function(){return o}});o.opposite=function(n){return n===o.LEFT?o.RIGHT:n===o.RIGHT?o.LEFT:n};o.ON=0;o.LEFT=1;o.RIGHT=2;t(ib.prototype,{computeIntersections:function(n,t){this.mce.computeIntersectsForChain(this.chainIndex,n.mce,n.chainIndex,t)},interfaces_:function(){return[]},getClass:function(){return ib}});t(le.prototype,{isDelete:function(){return this._eventType===le.DELETE},setDeleteEventIndex:function(n){this._deleteEventIndex=n},getObject:function(){return this._obj},compareTo:function(n){var t=n;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},getInsertEvent:function(){return this._insertEvent},isInsert:function(){return this._eventType===le.INSERT},isSameLabel:function(n){return null!==this._label&&this._label===n._label},getDeleteEventIndex:function(){return this._deleteEventIndex},interfaces_:function(){return[or]},getClass:function(){return le}});le.INSERT=1;le.DELETE=2;t(hy.prototype,{interfaces_:function(){return[]},getClass:function(){return hy}});t(bo.prototype,{isTrivialIntersection:function(n,t,i,r){if(n===i&&1===this._li.getIntersectionNum()){if(bo.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.getNumPoints()-1;if(0===t&&r===u||0===r&&t===u)return!0}}return!1},getProperIntersectionPoint:function(){return this._properIntersectionPoint},setIsDoneIfProperInt:function(n){this._isDoneWhenProperInt=n},hasProperInteriorIntersection:function(){return this._hasProperInterior},isBoundaryPointInternal:function(n,t){for(var r,i=t.iterator();i.hasNext();)if(r=i.next().getCoordinate(),n.isIntersection(r))return!0;return!1},hasProperIntersection:function(){return this._hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(n,t){return null!==t&&(!!this.isBoundaryPointInternal(n,t[0])||!!this.isBoundaryPointInternal(n,t[1]))},setBoundaryNodes:function(n,t){this._bdyNodes=new Array(2).fill(null);this._bdyNodes[0]=n;this._bdyNodes[1]=t},addIntersections:function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this._recordIsolated&&(n.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return bo}});bo.isAdjacentSegments=function(n,t){return 1===Math.abs(n-t)};v(cy,hy);t(cy.prototype,{prepareEvents:function(){var n,t;for(gu.sort(this.events),n=0;n<this.events.size();n++)t=this.events.get(n),t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(n)},computeIntersections:function(){var i,n,t,r,e;if(1===arguments.length){for(i=arguments[0],this.nOverlaps=0,this.prepareEvents(),n=0;n<this.events.size();n++)if(t=this.events.get(n),t.isInsert()&&this.processOverlaps(n,t.getDeleteEventIndex(),t,i),i.isDone())break}else if(3===arguments.length)if(arguments[2]instanceof bo&&h(arguments[0],li)&&h(arguments[1],li)){var u=arguments[0],f=arguments[1],o=arguments[2];this.addEdges(u,u);this.addEdges(f,f);this.computeIntersections(o)}else"boolean"==typeof arguments[2]&&h(arguments[0],li)&&arguments[1]instanceof bo&&(r=arguments[0],e=arguments[1],arguments[2]?this.addEdges(r,null):this.addEdges(r),this.computeIntersections(e))},addEdge:function(n,t){for(var f,u,r=n.getMonotoneChainEdge(),e=r.getStartIndexes(),i=0;i<e.length-1;i++)f=new ib(r,i),u=new le(t,r.getMinX(i),f),this.events.add(u),this.events.add(new le(r.getMaxX(i),u))},processOverlaps:function(n,t,i,r){for(var f,o,e=i.getObject(),u=n;u<t;u++)f=this.events.get(u),f.isInsert()&&(o=f.getObject(),i.isSameLabel(f)||(e.computeIntersections(o,r),this.nOverlaps++))},addEdges:function(){var n,t,i,r;if(1===arguments.length)for(n=arguments[0].iterator();n.hasNext();)t=n.next(),this.addEdge(t,t);else if(2===arguments.length)for(i=arguments[0],r=arguments[1],n=i.iterator();n.hasNext();)t=n.next(),this.addEdge(t,r)},interfaces_:function(){return[]},getClass:function(){return cy}});t(dr.prototype,{setAllLocations:function(n){for(var t=0;t<this.location.length;t++)this.location[t]=n},isNull:function(){for(var n=0;n<this.location.length;n++)if(this.location[n]!==i.NONE)return!1;return!0},setAllLocationsIfNull:function(n){for(var t=0;t<this.location.length;t++)this.location[t]===i.NONE&&(this.location[t]=n)},isLine:function(){return 1===this.location.length},merge:function(n){var r,t;for(n.location.length>this.location.length&&(r=new Array(3).fill(null),r[o.ON]=this.location[o.ON],r[o.LEFT]=i.NONE,r[o.RIGHT]=i.NONE,this.location=r),t=0;t<this.location.length;t++)this.location[t]===i.NONE&&t<n.location.length&&(this.location[t]=n.location[t])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var n=this.location[o.LEFT];this.location[o.LEFT]=this.location[o.RIGHT];this.location[o.RIGHT]=n},toString:function(){var n=new so;return 1<this.location.length&&n.append(i.toLocationSymbol(this.location[o.LEFT])),n.append(i.toLocationSymbol(this.location[o.ON])),1<this.location.length&&n.append(i.toLocationSymbol(this.location[o.RIGHT])),n.toString()},setLocations:function(n,t,i){this.location[o.ON]=n;this.location[o.LEFT]=t;this.location[o.RIGHT]=i},get:function(n){return n<this.location.length?this.location[n]:i.NONE},isArea:function(){return 1<this.location.length},isAnyNull:function(){for(var n=0;n<this.location.length;n++)if(this.location[n]===i.NONE)return!0;return!1},setLocation:function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setLocation(o.ON,n)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.location[t]=i)},init:function(n){this.location=new Array(n).fill(null);this.setAllLocations(i.NONE)},isEqualOnSide:function(n,t){return this.location[t]===n.location[t]},allPositionsEqual:function(n){for(var t=0;t<this.location.length;t++)if(this.location[t]!==n)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return dr}});t(ri.prototype,{getGeometryCount:function(){var n=0;return this.elt[0].isNull()||n++,this.elt[1].isNull()||n++,n},setAllLocations:function(n,t){this.elt[n].setAllLocations(t)},isNull:function(n){return this.elt[n].isNull()},setAllLocationsIfNull:function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setAllLocationsIfNull(0,n),this.setAllLocationsIfNull(1,n)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.elt[t].setAllLocationsIfNull(i))},isLine:function(n){return this.elt[n].isLine()},merge:function(n){for(var t=0;t<2;t++)null===this.elt[t]&&null!==n.elt[t]?this.elt[t]=new dr(n.elt[t]):this.elt[t].merge(n.elt[t])},flip:function(){this.elt[0].flip();this.elt[1].flip()},getLocation:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this.elt[n].get(o.ON)):2===arguments.length?(t=arguments[0],i=arguments[1],this.elt[t].get(i)):void 0},toString:function(){var n=new so;return null!==this.elt[0]&&(n.append("A:"),n.append(this.elt[0].toString())),null!==this.elt[1]&&(n.append(" B:"),n.append(this.elt[1].toString())),n.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var n=arguments[0];return this.elt[n].isArea()}},isAnyNull:function(n){return this.elt[n].isAnyNull()},setLocation:function(){var n,t;if(2===arguments.length)n=arguments[0],t=arguments[1],this.elt[n].setLocation(o.ON,t);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this.elt[i].setLocation(r,u)}},isEqualOnSide:function(n,t){return this.elt[0].isEqualOnSide(n.elt[0],t)&&this.elt[1].isEqualOnSide(n.elt[1],t)},allPositionsEqual:function(n,t){return this.elt[n].allPositionsEqual(t)},toLine:function(n){this.elt[n].isArea()&&(this.elt[n]=new dr(this.elt[n].location[0]))},interfaces_:function(){return[]},getClass:function(){return ri}});ri.toLineLabel=function(n){for(var r=new ri(i.NONE),t=0;t<2;t++)r.setLocation(t,n.getLocation(t));return r};t(rb.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex);n.println(" dist = "+this.dist)},compareTo:function(n){var t=n;return this.compare(t.segmentIndex,t.dist)},isEndPoint:function(n){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===n},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(n,t){return this.segmentIndex<n?-1:this.segmentIndex>n?1:this.dist<t?-1:this.dist>t?1:0},interfaces_:function(){return[or]},getClass:function(){return rb}});t(ub.prototype,{print:function(n){n.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(n)},iterator:function(){return this._nodeMap.values().iterator()},addSplitEdges:function(n){var t,i,r,u;for(this.addEndpoints(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=this.createSplitEdge(i,r),n.add(u),i=r},addEndpoints:function(){var n=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[n],n,0)},createSplitEdge:function(n,t){var e=t.segmentIndex-n.segmentIndex+2,s=this.edge.pts[t.segmentIndex],o=0<t.dist||!t.coord.equals2D(s),i,u,f;for(o||e--,i=new Array(e).fill(null),u=0,i[u++]=new r(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)i[u++]=this.edge.pts[f];return o&&(i[u]=t.coord),new lu(i,new ri(this.edge._label))},add:function(n,t,i){var r=new rb(n,t,i),u=this._nodeMap.get(r);return null!==u?u:(this._nodeMap.put(r,r),r)},isIntersection:function(n){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(n))return!0;return!1},interfaces_:function(){return[]},getClass:function(){return ub}});t(sl.prototype,{getChainStartIndices:function(n){var t=0,i=new u,r;i.add(new wu(t));do r=this.findChainEnd(n,t),i.add(new wu(r)),t=r;while(t<n.length-1);return sl.toIntArray(i)},findChainEnd:function(n,t){for(var r=rt.quadrant(n[t],n[t+1]),i=t+1;i<n.length;){if(rt.quadrant(n[i-1],n[i])!==r)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return sl}});sl.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};t(fb.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return i<t?t:i},getMinX:function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return t<i?t:i},computeIntersectsForChain:function(){var u,n;if(4===arguments.length){var h=arguments[0],s=arguments[1],c=arguments[2],l=arguments[3];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],s,s.startIndex[c],s.startIndex[c+1],l)}else if(6===arguments.length){var i=arguments[0],f=arguments[1],e=arguments[2],t=arguments[3],r=arguments[4],o=arguments[5];if(f-i==1&&r-t==1)return o.addIntersections(this.e,i,e.e,t),null;if(!this.overlaps(i,f,e,t,r))return null;u=Math.trunc((i+f)/2);n=Math.trunc((t+r)/2);i<u&&(t<n&&this.computeIntersectsForChain(i,u,e,t,n,o),n<r&&this.computeIntersectsForChain(i,u,e,n,r,o));u<f&&(t<n&&this.computeIntersectsForChain(u,f,e,t,n,o),n<r&&this.computeIntersectsForChain(u,f,e,n,r,o))}},overlaps:function(n,t,i,r,u){return y.intersects(this.pts[n],this.pts[t],i.pts[r],i.pts[u])},getStartIndexes:function(){return this.startIndex},computeIntersects:function(n,t){for(var r,i=0;i<this.startIndex.length-1;i++)for(r=0;r<n.startIndex.length-1;r++)this.computeIntersectsForChain(i,n,r,t)},interfaces_:function(){return[]},getClass:function(){return fb}});t(rf.prototype,{getDepth:function(n,t){return this._depth[n][t]},setDepth:function(n,t,i){this._depth[n][t]=i},isNull:function(){var n,t,i,r,u;if(0===arguments.length){for(n=0;n<2;n++)for(t=0;t<3;t++)if(this._depth[n][t]!==rf.NULL_VALUE)return!1;return!0}return 1===arguments.length?(i=arguments[0],this._depth[i][1]===rf.NULL_VALUE):2===arguments.length?(r=arguments[0],u=arguments[1],this._depth[r][u]===rf.NULL_VALUE):void 0},normalize:function(){for(var t,i,r,n=0;n<2;n++)if(!this.isNull(n))for(t=this._depth[n][1],this._depth[n][2]<t&&(t=this._depth[n][2]),t<0&&(t=0),i=1;i<3;i++)r=0,this._depth[n][i]>t&&(r=1),this._depth[n][i]=r},getDelta:function(n){return this._depth[n][o.RIGHT]-this._depth[n][o.LEFT]},getLocation:function(n,t){return this._depth[n][t]<=0?i.EXTERIOR:i.INTERIOR},toString:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},add:function(){var u,n,t,r,f,e;if(1===arguments.length)for(u=arguments[0],n=0;n<2;n++)for(t=1;t<3;t++)r=u.getLocation(n,t),r!==i.EXTERIOR&&r!==i.INTERIOR||(this.isNull(n,t)?this._depth[n][t]=rf.depthAtLocation(r):this._depth[n][t]+=rf.depthAtLocation(r));else 3===arguments.length&&(f=arguments[0],e=arguments[1],arguments[2]===i.INTERIOR&&this._depth[f][e]++)},interfaces_:function(){return[]},getClass:function(){return rf}});rf.depthAtLocation=function(n){return n===i.EXTERIOR?0:n===i.INTERIOR?1:rf.NULL_VALUE};rf.NULL_VALUE=-1;t(ko.prototype,{setVisited:function(n){this._isVisited=n},setInResult:function(n){this._isInResult=n},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(n){this._label=n},getLabel:function(){return this._label},setCovered:function(n){this._isCovered=n;this._isCoveredSet=!0},updateIM:function(n){c.isTrue(2<=this._label.getGeometryCount(),"found partial label");this.computeIM(n)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return ko}});v(lu,ko);t(lu.prototype,{getDepth:function(){return this._depth},getCollapsedEdge:function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new lu(n,ri.toLineLabel(this._label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(n){this._isIsolated=n},setName:function(n){this._name=n},equals:function(n){var i;if(!(n instanceof lu)||(i=n,this.pts.length!==i.pts.length))return!1;for(var r=!0,u=!0,f=this.pts.length,t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(i.pts[t])||(r=!1),this.pts[t].equals2D(i.pts[--f])||(u=!1),!r&&!u)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var n=arguments[0];return this.pts[n]}},print:function(n){n.print("edge "+this._name+": ");n.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&n.print(","),n.print(this.pts[t].x+" "+this.pts[t].y);n.print(")  "+this._label+" "+this._depthDelta)},computeIM:function(n){lu.updateIM(this._label,n)},isCollapsed:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this._depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(n){n.print("edge "+this._name+": ");for(var t=this.pts.length-1;0<=t;t--)n.print(this.pts[t]+" ");n.println("")},getMonotoneChainEdge:function(){return null===this._mce&&(this._mce=new fb(this)),this._mce},getEnvelope:function(){if(null===this._env){this._env=new y;for(var n=0;n<this.pts.length;n++)this._env.expandToInclude(this.pts[n])}return this._env},addIntersection:function(n,t,i,u){var o=new r(n.getIntersection(u)),f=t,s=n.getEdgeDistance(i,u),e=f+1,h;e<this.pts.length&&(h=this.pts[e],o.equals2D(h)&&(f=e,s=0));this.eiList.add(o,f,s)},toString:function(){var n=new co,t;for(n.append("edge "+this._name+": "),n.append("LINESTRING ("),t=0;t<this.pts.length;t++)0<t&&n.append(","),n.append(this.pts[t].x+" "+this.pts[t].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()},isPointwiseEqual:function(n){if(this.pts.length!==n.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(n.pts[t]))return!1;return!0},setDepthDelta:function(n){this._depthDelta=n},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(n,t,i){for(var r=0;r<n.getIntersectionNum();r++)this.addIntersection(n,t,i,r)},interfaces_:function(){return[]},getClass:function(){return lu}});lu.updateIM=function(){if(!(2===arguments.length&&arguments[1]instanceof et&&arguments[0]instanceof ri))return ko.prototype.updateIM.apply(this,arguments);var n=arguments[0],t=arguments[1];t.setAtLeastIfValid(n.getLocation(0,o.ON),n.getLocation(1,o.ON),1);n.isArea()&&(t.setAtLeastIfValid(n.getLocation(0,o.LEFT),n.getLocation(1,o.LEFT),2),t.setAtLeastIfValid(n.getLocation(0,o.RIGHT),n.getLocation(1,o.RIGHT),2))};v(ae,ko);t(ae.prototype,{isIncidentEdgeInResult:function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();)if(n.next().getEdge().isInResult())return!0;return!1},isIsolated:function(){return 1===this._label.getGeometryCount()},getCoordinate:function(){return this._coord},print:function(n){n.println("node "+this._coord+" lbl: "+this._label)},computeIM:function(){},computeMergedLocation:function(n,t){var r=i.NONE,u;return(r=this._label.getLocation(t),n.isNull(t))||(u=n.getLocation(t),r!==i.BOUNDARY&&(r=u)),r},setLabel:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return ko.prototype.setLabel.apply(this,arguments);var n=arguments[0],t=arguments[1];null===this._label?this._label=new ri(n,t):this._label.setLocation(n,t)},getEdges:function(){return this._edges},mergeLabel:function(){var t,r,n,u;if(arguments[0]instanceof ae)t=arguments[0],this.mergeLabel(t._label);else if(arguments[0]instanceof ri)for(r=arguments[0],n=0;n<2;n++)u=this.computeMergedLocation(r,n),this._label.getLocation(n)===i.NONE&&this._label.setLocation(n,u)},add:function(n){this._edges.insert(n);n.setNode(this)},setLabelBoundary:function(n){var r,t;if(null===this._label)return null;r=i.NONE;null!==this._label&&(r=this._label.getLocation(n));t=null;switch(r){case i.BOUNDARY:t=i.INTERIOR;break;case i.INTERIOR:default:t=i.BOUNDARY}this._label.setLocation(n,t)},interfaces_:function(){return[]},getClass:function(){return ae}});t(bh.prototype,{find:function(n){return this.nodeMap.get(n)},addNode:function(){var i,n,t;return arguments[0]instanceof r?(i=arguments[0],null===(n=this.nodeMap.get(i))&&(n=this.nodeFact.createNode(i),this.nodeMap.put(i,n)),n):arguments[0]instanceof ae?(t=arguments[0],null===(n=this.nodeMap.get(t.getCoordinate()))?(this.nodeMap.put(t.getCoordinate(),t),t):(n.mergeLabel(t),n)):void 0},print:function(n){for(var t=this.iterator();t.hasNext();)t.next().print(n)},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(n){for(var f,t=new u,r=this.iterator();r.hasNext();)f=r.next(),f.getLabel().getLocation(n)===i.BOUNDARY&&t.add(f);return t},add:function(n){var t=n.getCoordinate();this.addNode(t).add(n)},interfaces_:function(){return[]},getClass:function(){return bh}});t(yf.prototype,{compareDirection:function(n){return this._dx===n._dx&&this._dy===n._dy?0:this._quadrant>n._quadrant?1:this._quadrant<n._quadrant?-1:p.index(n._p0,n._p1,this._p1)},getDy:function(){return this._dy},getCoordinate:function(){return this._p0},setNode:function(n){this._node=n},print:function(n){var i=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),r=t.lastIndexOf("."),u=t.substring(r+1);n.print("  "+u+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+i+"   "+this._label)},compareTo:function(n){var t=n;return this.compareDirection(t)},getDirectedCoordinate:function(){return this._p1},getDx:function(){return this._dx},getLabel:function(){return this._label},getEdge:function(){return this._edge},getQuadrant:function(){return this._quadrant},getNode:function(){return this._node},toString:function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf(".");return"  "+n.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},computeLabel:function(){},init:function(n,t){this._p0=n;this._p1=t;this._dx=t.x-n.x;this._dy=t.y-n.y;this._quadrant=rt.quadrant(this._dx,this._dy);c.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[or]},getClass:function(){return yf}});v(gr,pi);t(gr.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return gr}});gr.msgWithCoord=function(n,t){return null!==t?n+" [ "+t+" ]":n};v(ks,yf);t(ks.prototype,{getNextMin:function(){return this._nextMin},getDepth:function(n){return this._depth[n]},setVisited:function(n){this._isVisited=n},computeDirectedLabel:function(){this._label=new ri(this._edge.getLabel());this._isForward||this._label.flip()},getNext:function(){return this._next},setDepth:function(n,t){if(-999!==this._depth[n]&&this._depth[n]!==t)throw new gr("assigned depths do not match",this.getCoordinate());this._depth[n]=t},isInteriorAreaEdge:function(){for(var t=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,o.LEFT)===i.INTERIOR&&this._label.getLocation(n,o.RIGHT)===i.INTERIOR||(t=!1);return t},setNextMin:function(n){this._nextMin=n},print:function(n){yf.prototype.print.call(this,n);n.print(" "+this._depth[o.LEFT]+"/"+this._depth[o.RIGHT]);n.print(" ("+this.getDepthDelta()+")");this._isInResult&&n.print(" inResult")},setMinEdgeRing:function(n){this._minEdgeRing=n},isLineEdge:function(){var n=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,i.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,i.EXTERIOR);return n&&t&&r},setEdgeRing:function(n){this._edgeRing=n},getMinEdgeRing:function(){return this._minEdgeRing},getDepthDelta:function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},setInResult:function(n){this._isInResult=n},getSym:function(){return this._sym},isForward:function(){return this._isForward},getEdge:function(){return this._edge},printEdge:function(n){this.print(n);n.print(" ");this._isForward?this._edge.print(n):this._edge.printReverse(n)},setSym:function(n){this._sym=n},setVisitedEdge:function(n){this.setVisited(n);this._sym.setVisited(n)},setEdgeDepths:function(n,t){var i=this.getEdge().getDepthDelta(),r,u,f;this._isForward||(i=-i);r=1;n===o.LEFT&&(r=-1);u=o.opposite(n);f=t+i*r;this.setDepth(n,t);this.setDepth(u,f)},getEdgeRing:function(){return this._edgeRing},isInResult:function(){return this._isInResult},setNext:function(n){this._next=n},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return ks}});ks.depthFactor=function(n,t){return n===i.EXTERIOR&&t===i.INTERIOR?1:n===i.INTERIOR&&t===i.EXTERIOR?-1:0};t(ds.prototype,{createNode:function(n){return new ae(n,null)},interfaces_:function(){return[]},getClass:function(){return ds}});t(pf.prototype,{printEdges:function(n){var t,i;for(n.println("Edges:"),t=0;t<this._edges.size();t++)n.println("edge "+t+":"),i=this._edges.get(t),i.print(n),i.eiList.print(n)},find:function(n){return this._nodes.find(n)},addNode:function(){var n,t;return arguments[0]instanceof ae?(n=arguments[0],this._nodes.addNode(n)):arguments[0]instanceof r?(t=arguments[0],this._nodes.addNode(t)):void 0},getNodeIterator:function(){return this._nodes.iterator()},linkResultDirectedEdges:function(){for(var n=this._nodes.iterator();n.hasNext();)n.next().getEdges().linkResultDirectedEdges()},debugPrintln:function(n){pt.out.println(n)},isBoundaryNode:function(n,t){var u=this._nodes.find(t),r;return null===u?!1:(r=u.getLabel(),null!==r&&r.getLocation(n)===i.BOUNDARY)},linkAllDirectedEdges:function(){for(var n=this._nodes.iterator();n.hasNext();)n.next().getEdges().linkAllDirectedEdges()},matchInSameDirection:function(n,t,i,r){return!!n.equals(i)&&p.index(n,t,r)===p.COLLINEAR&&rt.quadrant(n,t)===rt.quadrant(i,r)},getEdgeEnds:function(){return this._edgeEndList},debugPrint:function(n){pt.out.print(n)},getEdgeIterator:function(){return this._edges.iterator()},findEdgeInSameDirection:function(n,t){for(var u,i,r=0;r<this._edges.size();r++)if((u=this._edges.get(r),i=u.getCoordinates(),this.matchInSameDirection(n,t,i[0],i[1]))||this.matchInSameDirection(n,t,i[i.length-1],i[i.length-2]))return u;return null},insertEdge:function(n){this._edges.add(n)},findEdgeEnd:function(n){for(var i,t=this.getEdgeEnds().iterator();t.hasNext();)if(i=t.next(),i.getEdge()===n)return i;return null},addEdges:function(n){for(var t,i,r,u=n.iterator();u.hasNext();)t=u.next(),this._edges.add(t),i=new ks(t,!0),r=new ks(t,!1),i.setSym(r),r.setSym(i),this.add(i),this.add(r)},add:function(n){this._nodes.add(n);this._edgeEndList.add(n)},getNodes:function(){return this._nodes.values()},findEdge:function(n,t){for(var r,u,i=0;i<this._edges.size();i++)if(r=this._edges.get(i),u=r.getCoordinates(),n.equals(u[0])&&t.equals(u[1]))return r;return null},interfaces_:function(){return[]},getClass:function(){return pf}});pf.linkResultDirectedEdges=function(n){for(var t=n.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()};v(ar,pf);t(ar.prototype,{insertBoundaryPoint:function(n,t){var r=this._nodes.addNode(t).getLabel(),u=1,f;r.getLocation(n,o.ON)===i.BOUNDARY&&u++;f=ar.determineBoundary(this._boundaryNodeRule,u);r.setLocation(n,f)},computeSelfNodes:function(){var t,i;if(2===arguments.length)return t=arguments[0],i=arguments[1],this.computeSelfNodes(t,i,!1);if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2],n=new bo(r,!0,!1);n.setIsDoneIfProperInt(f);var e=this.createEdgeSetIntersector(),o=this._parentGeom instanceof ii||this._parentGeom instanceof st||this._parentGeom instanceof vi,s=u||!o;return e.computeIntersections(this._edges,n,s),this.addSelfIntersectionNodes(this._argIndex),n}},computeSplitEdges:function(n){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(n)},computeEdgeIntersections:function(n,t,i){var r=new bo(t,i,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,n._edges,r),r},getGeometry:function(){return this._parentGeom},getBoundaryNodeRule:function(){return this._boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){var n,t;arguments[0]instanceof dt?(n=arguments[0].getCoordinate(),this.insertPoint(this._argIndex,n,i.INTERIOR)):arguments[0]instanceof r&&(t=arguments[0],this.insertPoint(this._argIndex,t,i.INTERIOR))},addPolygon:function(n){var t,r;for(this.addPolygonRing(n.getExteriorRing(),i.EXTERIOR,i.INTERIOR),t=0;t<n.getNumInteriorRing();t++)r=n.getInteriorRingN(t),this.addPolygonRing(r,i.INTERIOR,i.EXTERIOR)},addEdge:function(n){this.insertEdge(n);var t=n.getCoordinates();this.insertPoint(this._argIndex,t[0],i.BOUNDARY);this.insertPoint(this._argIndex,t[t.length-1],i.BOUNDARY)},addLineString:function(n){var t=w.removeRepeatedPoints(n.getCoordinates()),r;if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;r=new lu(t,new ri(this._argIndex,i.INTERIOR));this._lineEdgeMap.put(n,r);this.insertEdge(r);c.isTrue(2<=t.length,"found LineString with single point");this.insertBoundaryPoint(this._argIndex,t[0]);this.insertBoundaryPoint(this._argIndex,t[t.length-1])},getInvalidPoint:function(){return this._invalidPoint},getBoundaryPoints:function(){for(var r,n=this.getBoundaryNodes(),t=new Array(n.size()).fill(null),u=0,i=n.iterator();i.hasNext();)r=i.next(),t[u++]=r.getCoordinate().copy();return t},getBoundaryNodes:function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},addSelfIntersectionNode:function(n,t,r){if(this.isBoundaryNode(n,t))return null;r===i.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,t):this.insertPoint(n,t,r)},addPolygonRing:function(n,t,r){var u,f,e,o;if(n.isEmpty())return null;if(u=w.removeRepeatedPoints(n.getCoordinates()),u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;f=t;e=r;p.isCCW(u)&&(f=r,e=t);o=new lu(u,new ri(this._argIndex,i.BOUNDARY,f,e));this._lineEdgeMap.put(n,o);this.insertEdge(o);this.insertPoint(this._argIndex,u[0],i.BOUNDARY)},insertPoint:function(n,t,i){var r=this._nodes.addNode(t),u=r.getLabel();null===u?r._label=new ri(n,i):u.setLocation(n,i)},createEdgeSetIntersector:function(){return new cy},addSelfIntersectionNodes:function(n){for(var u,t=this._edges.iterator();t.hasNext();)for(var i=t.next(),f=i.getLabel().getLocation(n),r=i.eiList.iterator();r.hasNext();)u=r.next(),this.addSelfIntersectionNode(n,u.coord,f)},add:function(){if(!(1===arguments.length&&arguments[0]instanceof s))return pf.prototype.add.apply(this,arguments);var n=arguments[0];if(n.isEmpty())return null;if(n instanceof vi&&(this._useBoundaryDeterminationRule=!1),n instanceof st)this.addPolygon(n);else if(n instanceof k)this.addLineString(n);else if(n instanceof dt)this.addPoint(n);else if(n instanceof wr)this.addCollection(n);else if(n instanceof rr)this.addCollection(n);else if(n instanceof vi)this.addCollection(n);else{if(!(n instanceof g))throw new UnsupportedOperationException(n.getClass().getName());this.addCollection(n)}},addCollection:function(n){for(var i,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),this.add(i)},locate:function(n){return h(this._parentGeom,fe)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new vs(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},findEdge:function(){if(1===arguments.length&&arguments[0]instanceof k){var n=arguments[0];return this._lineEdgeMap.get(n)}return pf.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return ar}});ar.determineBoundary=function(n,t){return n.isInBoundary(t)?i.BOUNDARY:i.INTERIOR};fd=Object.freeze({GeometryGraph:ar});t(hl.prototype,{visit:function(){},interfaces_:function(){return[]},getClass:function(){return hl}});t(ly.prototype,{isRepeated:function(){return 1<this._count},getRight:function(){return this._right},getCoordinate:function(){return this._p},setLeft:function(n){this._left=n},getX:function(){return this._p.x},getData:function(){return this._data},getCount:function(){return this._count},getLeft:function(){return this._left},getY:function(){return this._p.y},increment:function(){this._count=this._count+1},setRight:function(n){this._right=n},interfaces_:function(){return[]},getClass:function(){return ly}});t(go.prototype,{insert:function(){var r,n,i,t;return 1===arguments.length?(r=arguments[0],this.insert(r,null)):2===arguments.length?(n=arguments[0],i=arguments[1],null===this._root)?(this._root=new ly(n,i),this._root):0<this._tolerance&&(t=this.findBestMatchNode(n),null!==t)?(t.increment(),t):this.insertExact(n,i):void 0},query:function(){var t,n,i,r,f,e;if(1===arguments.length)return t=arguments[0],n=new u,this.query(t,n),n;2===arguments.length&&(arguments[0]instanceof y&&h(arguments[1],li)?(i=arguments[0],r=arguments[1],this.queryNode(this._root,i,!0,{interfaces_:function(){return[hl]},visit:function(n){r.add(n)}})):arguments[0]instanceof y&&h(arguments[1],hl)&&(f=arguments[0],e=arguments[1],this.queryNode(this._root,f,!0,e)))},queryNode:function(n,t,i,r){var o;if(null===n)return null;var f=null,e=null,u=null;i?(f=t.getMinX(),e=t.getMaxX(),u=n.getX()):(f=t.getMinY(),e=t.getMaxY(),u=n.getY());o=u<=e;f<u&&this.queryNode(n.getLeft(),t,!i,r);t.contains(n.getCoordinate())&&r.visit(n);o&&this.queryNode(n.getRight(),t,!i,r)},findBestMatchNode:function(n){var t=new ay(n,this._tolerance);return this.query(t.queryEnvelope(),t),t.getNode()},isEmpty:function(){return null===this._root},insertExact:function(n,t){for(var r,i=this._root,u=this._root,f=!0,e=!0;null!==i;){if(null!==i&&n.distance(i.getCoordinate())<=this._tolerance)return i.increment(),i;e=f?n.x<i.getX():n.y<i.getY();u=i;i=e?i.getLeft():i.getRight();f=!f}return this._numberOfNodes=this._numberOfNodes+1,r=new ly(n,t),e?u.setLeft(r):u.setRight(r),r},interfaces_:function(){return[]},getClass:function(){return go}});go.toCoordinates=function(){var n;if(1===arguments.length)return n=arguments[0],go.toCoordinates(n,!1);if(2===arguments.length){for(var f=arguments[0],e=arguments[1],t=new ni,i=f.iterator();i.hasNext();)for(var r=i.next(),o=e?r.getCount():1,u=0;u<o;u++)t.add(r.getCoordinate(),!0);return t.toCoordinateArray()}};t(ay.prototype,{visit:function(n){var t=this._p.distance(n.getCoordinate()),i;if(!(t<=this._tolerance))return null;i=!1;(null===this._matchNode||t<this._matchDist||null!==this._matchNode&&t===this._matchDist&&n.getCoordinate().compareTo(this._matchNode.getCoordinate())<1)&&(i=!0);i&&(this._matchNode=n,this._matchDist=t)},queryEnvelope:function(){var n=new y(this._p);return n.expandBy(this._tolerance),n},getNode:function(){return this._matchNode},interfaces_:function(){return[hl]},getClass:function(){return ay}});go.BestMatchVisitor=ay;ed=Object.freeze({KdTree:go});t(wf.prototype,{hasChildren:function(){for(var n=0;n<4;n++)if(null!==this._subnode[n])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(n){n.addAll(this._items);for(var t=0;t<4;t++)null!==this._subnode[t]&&this._subnode[t].addAllItems(n);return n},getNodeCount:function(){for(var t=0,n=0;n<4;n++)null!==this._subnode[n]&&(t+=this._subnode[n].size());return t+1},size:function(){for(var t=0,n=0;n<4;n++)null!==this._subnode[n]&&(t+=this._subnode[n].size());return t+this._items.size()},addAllItemsFromOverlapping:function(n,t){if(!this.isSearchMatch(n))return null;t.addAll(this._items);for(var i=0;i<4;i++)null!==this._subnode[i]&&this._subnode[i].addAllItemsFromOverlapping(n,t)},visitItems:function(n,t){for(var i=this._items.iterator();i.hasNext();)t.visitItem(i.next())},hasItems:function(){return!this._items.isEmpty()},remove:function(n,t){if(!this.isSearchMatch(n))return!1;for(var r=!1,i=0;i<4;i++)if(null!==this._subnode[i]&&(r=this._subnode[i].remove(n,t))){this._subnode[i].isPrunable()&&(this._subnode[i]=null);break}return r||(r=this._items.remove(t))},visit:function(n,t){if(!this.isSearchMatch(n))return null;this.visitItems(n,t);for(var i=0;i<4;i++)null!==this._subnode[i]&&this._subnode[i].visit(n,t)},getItems:function(){return this._items},depth:function(){for(var i,t=0,n=0;n<4;n++)null!==this._subnode[n]&&(i=this._subnode[n].depth(),t<i&&(t=i));return t+1},isEmpty:function(){var t=!0,n;if(this._items.isEmpty()){for(n=0;n<4;n++)if(null!==this._subnode[n]&&!this._subnode[n].isEmpty()){t=!1;break}}else t=!1;return t},add:function(n){this._items.add(n)},interfaces_:function(){return[sr]},getClass:function(){return wf}});wf.getSubnodeIndex=function(n,t,i){var r=-1;return n.getMinX()>=t&&(n.getMinY()>=i&&(r=3),n.getMaxY()<=i&&(r=1)),n.getMaxX()<=t&&(n.getMinY()>=i&&(r=2),n.getMaxY()<=i&&(r=0)),r};t(cl.prototype,{getLevel:function(){return this._level},computeKey:function(){var t;if(1===arguments.length)for(t=arguments[0],this._level=cl.computeQuadLevel(t),this._env=new y,this.computeKey(this._level,t);!this._env.contains(t);)this._level+=1,this.computeKey(this._level,t);else if(2===arguments.length){var r=arguments[0],i=arguments[1],n=ws.powerOf2(r);this._pt.x=Math.floor(i.getMinX()/n)*n;this._pt.y=Math.floor(i.getMinY()/n)*n;this._env.init(this._pt.x,this._pt.x+n,this._pt.y,this._pt.y+n)}},getEnvelope:function(){return this._env},getCentre:function(){return new r((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)},getPoint:function(){return this._pt},interfaces_:function(){return[]},getClass:function(){return cl}});cl.computeQuadLevel=function(n){var t=n.getWidth(),i=n.getHeight();return ws.exponent(i<t?t:i)+1};v(to,wf);t(to.prototype,{find:function(n){var t=wf.getSubnodeIndex(n,this._centrex,this._centrey);return-1===t?this:null!==this._subnode[t]?this._subnode[t].find(n):this},isSearchMatch:function(n){return null!==n&&this._env.intersects(n)},getSubnode:function(n){return null===this._subnode[n]&&(this._subnode[n]=this.createSubnode(n)),this._subnode[n]},getEnvelope:function(){return this._env},getNode:function(n){var t=wf.getSubnodeIndex(n,this._centrex,this._centrey);return-1!==t?this.getSubnode(t).getNode(n):this},createSubnode:function(n){var t=0,i=0,r=0,u=0;switch(n){case 0:t=this._env.getMinX();i=this._centrex;r=this._env.getMinY();u=this._centrey;break;case 1:t=this._centrex;i=this._env.getMaxX();r=this._env.getMinY();u=this._centrey;break;case 2:t=this._env.getMinX();i=this._centrex;r=this._centrey;u=this._env.getMaxY();break;case 3:t=this._centrex;i=this._env.getMaxX();r=this._centrey;u=this._env.getMaxY()}return new to(new y(t,i,r,u),this._level-1)},insertNode:function(n){var t,i;c.isTrue(null===this._env||this._env.contains(n._env));t=wf.getSubnodeIndex(n._env,this._centrex,this._centrey);n._level===this._level-1?this._subnode[t]=n:(i=this.createSubnode(t),i.insertNode(n),this._subnode[t]=i)},interfaces_:function(){return[]},getClass:function(){return to}});to.createNode=function(n){var t=new cl(n);return new to(t.getEnvelope(),t.getLevel())};to.createExpanded=function(n,t){var r=new y(t),i;return null!==n&&r.expandToInclude(n._env),i=to.createNode(r),null!==n&&i.insertNode(n),i};v(gs,wf);t(gs.prototype,{insert:function(n,t){var i=wf.getSubnodeIndex(n,gs.origin.x,gs.origin.y),r,u;if(-1===i)return this.add(t),null;r=this._subnode[i];null!==r&&r.getEnvelope().contains(n)||(u=to.createExpanded(r,n),this._subnode[i]=u);this.insertContained(this._subnode[i],n,t)},isSearchMatch:function(){return!0},insertContained:function(n,t,i){c.isTrue(n.getEnvelope().contains(t));var r=po.isZeroWidth(t.getMinX(),t.getMaxX()),u=po.isZeroWidth(t.getMinY(),t.getMaxY());(r||u?n.find(t):n.getNode(t)).add(i)},interfaces_:function(){return[]},getClass:function(){return gs}});gs.origin=new r(0,0);t(vy.prototype,{insert:function(){},remove:function(){},query:function(){},interfaces_:function(){return[]},getClass:function(){return vy}});t(ns.prototype,{size:function(){return null!==this._root?this._root.size():0},insert:function(n,t){this.collectStats(n);var i=ns.ensureExtent(n,this._minExtent);this._root.insert(i,t)},query:function(){var t,n,i,r;if(1===arguments.length)return t=arguments[0],n=new gv,this.query(t,n),n.getItems();2===arguments.length&&(i=arguments[0],r=arguments[1],this._root.visit(i,r))},queryAll:function(){var n=new u;return this._root.addAllItems(n),n},remove:function(n,t){var i=ns.ensureExtent(n,this._minExtent);return this._root.remove(i,t)},collectStats:function(n){var i=n.getWidth(),t;i<this._minExtent&&0<i&&(this._minExtent=i);t=n.getHeight();t<this._minExtent&&0<t&&(this._minExtent=t)},depth:function(){return null!==this._root?this._root.depth():0},isEmpty:function(){return null===this._root||this._root.isEmpty()},interfaces_:function(){return[vy,sr]},getClass:function(){return ns}});ns.ensureExtent=function(n,t){var i=n.getMinX(),r=n.getMaxX(),u=n.getMinY(),f=n.getMaxY();return i!==r&&u!==f?n:(i===r&&(r=(i-=t/2)+t/2),u===f&&(f=(u-=t/2)+t/2),new y(i,r,u,f))};ns.serialVersionUID=-0x678b60c967a25400;od=Object.freeze({Quadtree:ns});t(yy.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return yy}});t(bf.prototype,{getItem:function(){return this._item},getBounds:function(){return this._bounds},interfaces_:function(){return[yy,sr]},getClass:function(){return bf}});t(ll.prototype,{poll:function(){if(this.isEmpty())return null;var n=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),n},size:function(){return this._size},reorder:function(n){for(var t=null,i=this._items.get(n);2*n<=this._size&&((t=2*n)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(i)<0);n=t)this._items.set(n,this._items.get(t));this._items.set(n,i)},clear:function(){this._size=0;this._items.clear()},peek:function(){return this.isEmpty()?null:this._items.get(1)},isEmpty:function(){return 0===this._size},add:function(n){this._items.add(null);this._size+=1;var t=this._size;for(this._items.set(0,n);n.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,n)},interfaces_:function(){return[]},getClass:function(){return ll}});t(nu.prototype,{getLevel:function(){return this._level},size:function(){return this._childBoundables.size()},getChildBoundables:function(){return this._childBoundables},addChildBoundable:function(n){c.isTrue(null===this._bounds);this._childBoundables.add(n)},isEmpty:function(){return this._childBoundables.isEmpty()},getBounds:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},interfaces_:function(){return[yy,sr]},getClass:function(){return nu}});nu.serialVersionUID=0x5a1e55ec41369800;t(ki.prototype,{expandToQueue:function(n,t){var i=ki.isComposite(this._boundable1),r=ki.isComposite(this._boundable2);if(i&&r)return ki.area(this._boundable1)>ki.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,n,t):this.expand(this._boundable2,this._boundable1,n,t),null;if(i)return this.expand(this._boundable1,this._boundable2,n,t),null;if(r)return this.expand(this._boundable2,this._boundable1,n,t),null;throw new tt("neither boundable is composite");},isLeaves:function(){return!(ki.isComposite(this._boundable1)||ki.isComposite(this._boundable2))},compareTo:function(n){var t=n;return this._distance<t._distance?-1:this._distance>t._distance?1:0},expand:function(n,t,i,r){for(var f,u=n.getChildBoundables().iterator();u.hasNext();)f=new ki(u.next(),t,this._itemDistance),f.getDistance()<r&&i.add(f)},getBoundable:function(n){return 0===n?this._boundable1:this._boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},interfaces_:function(){return[or]},getClass:function(){return ki}});ki.area=function(n){return n.getBounds().getArea()};ki.isComposite=function(n){return n instanceof nu};t(ei.prototype,{queryInternal:function(){var n;if(h(arguments[2],as)&&arguments[0]instanceof Object&&arguments[1]instanceof nu)for(var r=arguments[0],o=arguments[1],u=arguments[2],i=o.getChildBoundables(),t=0;t<i.size();t++)n=i.get(t),this.getIntersectsOp().intersects(n.getBounds(),r)&&(n instanceof nu?this.queryInternal(r,n,u):n instanceof bf?u.visitItem(n.getItem()):c.shouldNeverReachHere());else if(h(arguments[2],li)&&arguments[0]instanceof Object&&arguments[1]instanceof nu){var f=arguments[0],s=arguments[1],e=arguments[2];for(i=s.getChildBoundables(),t=0;t<i.size();t++)n=i.get(t),this.getIntersectsOp().intersects(n.getBounds(),f)&&(n instanceof nu?this.queryInternal(f,n,e):n instanceof bf?e.add(n.getItem()):c.shouldNeverReachHere())}},getNodeCapacity:function(){return this._nodeCapacity},lastNode:function(n){return n.get(n.size()-1)},size:function(){var n,i,t;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(n=0,i=arguments[0].getChildBoundables().iterator();i.hasNext();)t=i.next(),t instanceof nu?n+=this.size(t):t instanceof bf&&(n+=1);return n}},removeItem:function(n,t){for(var r,i=null,u=n.getChildBoundables().iterator();u.hasNext();)r=u.next(),r instanceof bf&&r.getItem()===t&&(i=r);return null!==i&&(n.getChildBoundables().remove(i),!0)},itemsTree:function(){var i,n,r;if(0===arguments.length)return this.build(),i=this.itemsTree(this._root),null===i?new u:i;if(1===arguments.length){for(var e=arguments[0],t=new u,f=e.getChildBoundables().iterator();f.hasNext();)n=f.next(),n instanceof nu?(r=this.itemsTree(n),null!==r&&t.add(r)):n instanceof bf?t.add(n.getItem()):c.shouldNeverReachHere();return t.size()<=0?null:t}},insert:function(n,t){c.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built.");this._itemBoundables.add(new bf(n,t))},boundablesAtLevel:function(){var o,i,e,n;if(1===arguments.length)return o=arguments[0],i=new u,this.boundablesAtLevel(o,this._root,i),i;if(3===arguments.length){var t=arguments[0],r=arguments[1],f=arguments[2];if(c.isTrue(-2<t),r.getLevel()===t)return f.add(r),null;for(e=r.getChildBoundables().iterator();e.hasNext();)n=e.next(),n instanceof nu?this.boundablesAtLevel(t,n,f):(c.isTrue(n instanceof bf),-1===t&&f.add(n));return null}},query:function(){var n,t,i,r;if(1===arguments.length)return n=arguments[0],this.build(),t=new u,this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,t),t;if(2===arguments.length){if(i=arguments[0],r=arguments[1],this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.queryInternal(i,this._root,r)}},build:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1);this._itemBoundables=null;this._built=!0},getRoot:function(){return this.build(),this._root},remove:function(){var i,e,n,f,t;if(2===arguments.length)return i=arguments[0],e=arguments[1],this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.remove(i,this._root,e);if(3===arguments.length){var o=arguments[0],r=arguments[1],s=arguments[2],u=this.removeItem(r,s);if(u)return!0;for(n=null,f=r.getChildBoundables().iterator();f.hasNext();)if(t=f.next(),this.getIntersectsOp().intersects(t.getBounds(),o)&&t instanceof nu&&(u=this.remove(o,t,s))){n=t;break}return null!==n&&n.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(n),u}},createHigherLevels:function(n,t){c.isTrue(!n.isEmpty());var i=this.createParentBoundables(n,t+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,t+1)},depth:function(){var n,t,i,r;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(n=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();)i=t.next(),i instanceof nu&&(r=this.depth(i),n<r&&(n=r));return n+1}},createParentBoundables:function(n,t){var i,r,f,e;for(c.isTrue(!n.isEmpty()),i=new u,i.add(this.createNode(t)),r=new u(n),gu.sort(r,this.getComparator()),f=r.iterator();f.hasNext();)e=f.next(),this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(t)),this.lastNode(i).addChildBoundable(e);return i},isEmpty:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},interfaces_:function(){return[sr]},getClass:function(){return ei}});ei.compareDoubles=function(n,t){return t<n?1:n<t?-1:0};ei.IntersectsOp=function(){};ei.serialVersionUID=-0x35ef64c82d4c5400;ei.DEFAULT_NODE_CAPACITY=10;t(al.prototype,{distance:function(){},interfaces_:function(){return[]},getClass:function(){return al}});v(bt,ei);t(bt.prototype,{createParentBoundablesFromVerticalSlices:function(n,t){c.isTrue(0<n.length);for(var r=new u,i=0;i<n.length;i++)r.addAll(this.createParentBoundablesFromVerticalSlice(n[i],t));return r},createNode:function(n){return new vl(n)},size:function(){return 0===arguments.length?ei.prototype.size.call(this):ei.prototype.size.apply(this,arguments)},insert:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof y))return ei.prototype.insert.apply(this,arguments);var n=arguments[0],t=arguments[1];if(n.isNull())return null;ei.prototype.insert.call(this,n,t)},getIntersectsOp:function(){return bt.intersectsOp},verticalSlices:function(n,t){for(var f,o,s=Math.trunc(Math.ceil(n.size()/t)),r=new Array(t).fill(null),e=n.iterator(),i=0;i<t;i++)for(r[i]=new u,f=0;e.hasNext()&&f<s;)o=e.next(),r[i].add(o),f++;return r},query:function(){var n,t,i;if(1===arguments.length)return n=arguments[0],ei.prototype.query.call(this,n);2===arguments.length&&(t=arguments[0],i=arguments[1],ei.prototype.query.call(this,t,i))},getComparator:function(){return bt.yComparator},createParentBoundablesFromVerticalSlice:function(n,t){return ei.prototype.createParentBoundables.call(this,n,t)},remove:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof y){var n=arguments[0],t=arguments[1];return ei.prototype.remove.call(this,n,t)}return ei.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?ei.prototype.depth.call(this):ei.prototype.depth.apply(this,arguments)},createParentBoundables:function(n,t){var r,i,f;return c.isTrue(!n.isEmpty()),r=Math.trunc(Math.ceil(n.size()/this.getNodeCapacity())),i=new u(n),gu.sort(i,bt.xComparator),f=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r)))),this.createParentBoundablesFromVerticalSlices(f,t)},nearestNeighbour:function(){var s,i,c,a,v,p,w,u,t,f;if(1===arguments.length){if(h(arguments[0],al))return s=arguments[0],i=new ki(this.getRoot(),this.getRoot(),s),this.nearestNeighbour(i);if(arguments[0]instanceof ki)return c=arguments[0],this.nearestNeighbour(c,l.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof bt&&h(arguments[1],al))return a=arguments[0],v=arguments[1],i=new ki(this.getRoot(),a.getRoot(),v),this.nearestNeighbour(i);if(arguments[0]instanceof ki&&"number"==typeof arguments[1]){var b=arguments[0],n=arguments[1],e=null;for((r=new ll).add(b);!r.isEmpty()&&0<n;){if(n<=(f=(t=r.poll()).getDistance()))break;t.isLeaves()?(n=f,e=t):t.expandToQueue(r,n)}return[e.getBoundable(0).getItem(),e.getBoundable(1).getItem()]}if(arguments[0]instanceof ki&&Number.isInteger(arguments[1]))return p=arguments[0],w=arguments[1],this.nearestNeighbour(p,l.POSITIVE_INFINITY,w)}else if(3===arguments.length){if(h(arguments[2],al)&&arguments[0]instanceof y&&arguments[1]instanceof Object){var k=arguments[0],d=arguments[1],g=arguments[2],o=new bf(k,d);return i=new ki(this.getRoot(),o,g),this.nearestNeighbour(i)[0]}if(Number.isInteger(arguments[2])&&arguments[0]instanceof ki&&"number"==typeof arguments[1]){var r,nt=arguments[0],tt=arguments[1],it=arguments[2];for(n=tt,(r=new ll).add(nt),u=new ll;!r.isEmpty()&&0<=n;){if(n<=(f=(t=r.poll()).getDistance()))break;t.isLeaves()?u.size()<it?u.add(t):(u.peek().getDistance()>f&&(u.poll(),u.add(t)),n=u.peek().getDistance()):t.expandToQueue(r,n)}return bt.getItems(u)}}else if(4===arguments.length){var rt=arguments[0],ut=arguments[1],ft=arguments[2],et=arguments[3];return o=new bf(rt,ut),i=new ki(this.getRoot(),o,ft),this.nearestNeighbour(i,et)}},interfaces_:function(){return[vy,sr]},getClass:function(){return bt}});bt.centreX=function(n){return bt.avg(n.getMinX(),n.getMaxX())};bt.avg=function(n,t){return(n+t)/2};bt.getItems=function(n){for(var r,t=new Array(n.size()).fill(null),i=0;!n.isEmpty();)r=n.poll(),t[i]=r.getBoundable(0).getItem(),i++;return t};bt.centreY=function(n){return bt.avg(n.getMinY(),n.getMaxY())};v(vl,nu);t(vl.prototype,{computeBounds:function(){for(var i,n=null,t=this.getChildBoundables().iterator();t.hasNext();)i=t.next(),null===n?n=new y(i.getBounds()):n.expandToInclude(i.getBounds());return n},interfaces_:function(){return[]},getClass:function(){return vl}});bt.STRtreeNode=vl;bt.serialVersionUID=0x39920f7d5f261e0;bt.xComparator={interfaces_:function(){return[eo]},compare:function(n,t){return ei.compareDoubles(bt.centreX(n.getBounds()),bt.centreX(t.getBounds()))}};bt.yComparator={interfaces_:function(){return[eo]},compare:function(n,t){return ei.compareDoubles(bt.centreY(n.getBounds()),bt.centreY(t.getBounds()))}};bt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(n,t){return n.intersects(t)}};bt.DEFAULT_NODE_CAPACITY=10;var yg=Object.freeze({STRtree:bt}),pg=Object.freeze({kdtree:ed,quadtree:od,strtree:yg}),wg=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];t(eb.prototype,{read:function(n){var i=void 0,t=(i="string"==typeof n?JSON.parse(n):n).type;if(!au[t])throw new Error("Unknown GeoJSON type: "+i.type);return-1!==wg.indexOf(t)?au[t].call(this,i.coordinates):"GeometryCollection"===t?au[t].call(this,i.geometries):au[t].call(this,i)},write:function(n){var t=n.getGeometryType();if(!kf[t])throw new Error("Geometry is not supported");return kf[t].call(this,n)}});au={Feature:function(n){var t={},i,r;for(i in n)t[i]=n[i];if(n.geometry){if(r=n.geometry.type,!au[r])throw new Error("Unknown GeoJSON type: "+n.type);t.geometry=this.read(n.geometry)}return n.bbox&&(t.bbox=au.bbox.call(this,n.bbox)),t},FeatureCollection:function(n){var t={},i;if(n.features)for(t.features=[],i=0;i<n.features.length;++i)t.features.push(this.read(n.features[i]));return n.bbox&&(t.bbox=this.parse.bbox.call(this,n.bbox)),t},coordinates:function(n){for(var u,i=[],t=0;t<n.length;++t)u=n[t],i.push(new r(u[0],u[1]));return i},bbox:function(n){return this.geometryFactory.createLinearRing([new r(n[0],n[1]),new r(n[2],n[1]),new r(n[2],n[3]),new r(n[0],n[3]),new r(n[0],n[1])])},Point:function(n){var t=new r(n[0],n[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(n){for(var i=[],t=0;t<n.length;++t)i.push(au.Point.call(this,n[t]));return this.geometryFactory.createMultiPoint(i)},LineString:function(n){var t=au.coordinates.call(this,n);return this.geometryFactory.createLineString(t)},MultiLineString:function(n){for(var i=[],t=0;t<n.length;++t)i.push(au.LineString.call(this,n[t]));return this.geometryFactory.createMultiLineString(i)},Polygon:function(n){for(var r=au.coordinates.call(this,n[0]),u=this.geometryFactory.createLinearRing(r),i=[],t=1;t<n.length;++t){var f=n[t],e=au.coordinates.call(this,f),o=this.geometryFactory.createLinearRing(e);i.push(o)}return this.geometryFactory.createPolygon(u,i)},MultiPolygon:function(n){for(var r,i=[],t=0;t<n.length;++t)r=n[t],i.push(au.Polygon.call(this,r));return this.geometryFactory.createMultiPolygon(i)},GeometryCollection:function(n){for(var r,i=[],t=0;t<n.length;++t)r=n[t],i.push(this.read(r));return this.geometryFactory.createGeometryCollection(i)}};kf={coordinate:function(n){return[n.x,n.y]},Point:function(n){return{type:"Point",coordinates:kf.coordinate.call(this,n.getCoordinate())}},MultiPoint:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=kf.Point.call(this,r),i.push(u.coordinates);return{type:"MultiPoint",coordinates:i}},LineString:function(n){for(var u,i=[],r=n.getCoordinates(),t=0;t<r.length;++t)u=r[t],i.push(kf.coordinate.call(this,u));return{type:"LineString",coordinates:i}},MultiLineString:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=kf.LineString.call(this,r),i.push(u.coordinates);return{type:"MultiLineString",coordinates:i}},Polygon:function(n){var i=[],f=kf.LineString.call(this,n._shell),t,r,u;for(i.push(f.coordinates),t=0;t<n._holes.length;++t)r=n._holes[t],u=kf.LineString.call(this,r),i.push(u.coordinates);return{type:"Polygon",coordinates:i}},MultiPolygon:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=kf.Polygon.call(this,r),i.push(u.coordinates);return{type:"MultiPolygon",coordinates:i}},GeometryCollection:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=r.getGeometryType(),i.push(kf[u].call(this,r));return{type:"GeometryCollection",geometries:i}}};t(sd.prototype,{read:function(n){return this.parser.read(n)}});t(hd.prototype,{write:function(n){return this.parser.write(n)}});t(cd.prototype,{read:function(n){return this.parser.read(n)}});t(ld.prototype,{inject:function(n,t,i,r,u,f,e,o){this.ol={geom:{Point:n,LineString:t,LinearRing:i,Polygon:r,MultiPoint:u,MultiLineString:f,MultiPolygon:e,GeometryCollection:o}}},read:function(n){var t=this.ol;return n instanceof t.geom.Point?this.convertFromPoint(n):n instanceof t.geom.LineString?this.convertFromLineString(n):n instanceof t.geom.LinearRing?this.convertFromLinearRing(n):n instanceof t.geom.Polygon?this.convertFromPolygon(n):n instanceof t.geom.MultiPoint?this.convertFromMultiPoint(n):n instanceof t.geom.MultiLineString?this.convertFromMultiLineString(n):n instanceof t.geom.MultiPolygon?this.convertFromMultiPolygon(n):n instanceof t.geom.GeometryCollection?this.convertFromCollection(n):void 0},convertFromPoint:function(n){var t=n.getCoordinates();return this.geometryFactory.createPoint(new r(t[0],t[1]))},convertFromLineString:function(n){return this.geometryFactory.createLineString(n.getCoordinates().map(function(n){return new r(n[0],n[1])}))},convertFromLinearRing:function(n){return this.geometryFactory.createLinearRing(n.getCoordinates().map(function(n){return new r(n[0],n[1])}))},convertFromPolygon:function(n){for(var i,r=n.getLinearRings(),u=null,f=[],t=0;t<r.length;t++)i=this.convertFromLinearRing(r[t]),0===t?u=i:f.push(i);return this.geometryFactory.createPolygon(u,f)},convertFromMultiPoint:function(n){var t=n.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(t)},convertFromMultiLineString:function(n){var t=n.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(t)},convertFromMultiPolygon:function(n){var t=n.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(t)},convertFromCollection:function(n){var t=n.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(t)},write:function(n){return"Point"===n.getGeometryType()?this.convertToPoint(n.getCoordinate()):"LineString"===n.getGeometryType()?this.convertToLineString(n):"LinearRing"===n.getGeometryType()?this.convertToLinearRing(n):"Polygon"===n.getGeometryType()?this.convertToPolygon(n):"MultiPoint"===n.getGeometryType()?this.convertToMultiPoint(n):"MultiLineString"===n.getGeometryType()?this.convertToMultiLineString(n):"MultiPolygon"===n.getGeometryType()?this.convertToMultiPolygon(n):"GeometryCollection"===n.getGeometryType()?this.convertToCollection(n):void 0},convertToPoint:function(n){return new this.ol.geom.Point([n.x,n.y])},convertToLineString:function(n){var t=n._points._coordinates.map(yl);return new this.ol.geom.LineString(t)},convertToLinearRing:function(n){var t=n._points._coordinates.map(yl);return new this.ol.geom.LinearRing(t)},convertToPolygon:function(n){for(var i=[n._shell._points._coordinates.map(yl)],t=0;t<n._holes.length;t++)i.push(n._holes[t]._points._coordinates.map(yl));return new this.ol.geom.Polygon(i)},convertToMultiPoint:function(n){return new this.ol.geom.MultiPoint(n.getCoordinates().map(yl))},convertToMultiLineString:function(n){for(var i=[],t=0;t<n._geometries.length;t++)i.push(this.convertToLineString(n._geometries[t]).getCoordinates());return new this.ol.geom.MultiLineString(i)},convertToMultiPolygon:function(n){for(var i=[],t=0;t<n._geometries.length;t++)i.push(this.convertToPolygon(n._geometries[t]).getCoordinates());return new this.ol.geom.MultiPolygon(i)},convertToCollection:function(n){for(var r,i=[],t=0;t<n._geometries.length;t++)r=n._geometries[t],i.push(this.write(r));return new this.ol.geom.GeometryCollection(i)}});ad=Object.freeze({GeoJSONReader:sd,GeoJSONWriter:hd,OL3Parser:ld,WKTReader:cd,WKTWriter:bi});t(vr.prototype,{interfaces_:function(){return[]},getClass:function(){return vr}});vr.relativeSign=function(n,t){return n<t?-1:t<n?1:0};vr.compare=function(n,t,i){if(t.equals2D(i))return 0;var r=vr.relativeSign(t.x,i.x),u=vr.relativeSign(t.y,i.y);switch(n){case 0:return vr.compareValue(r,u);case 1:return vr.compareValue(u,r);case 2:return vr.compareValue(u,-r);case 3:return vr.compareValue(-r,u);case 4:return vr.compareValue(-r,-u);case 5:return vr.compareValue(-u,-r);case 6:return vr.compareValue(-u,r);case 7:return vr.compareValue(r,-u)}return c.shouldNeverReachHere("invalid octant value"),0};vr.compareValue=function(n,t){return n<0?-1:0<n?1:t<0?-1:0<t?1:0};t(ob.prototype,{getCoordinate:function(){return this.coord},print:function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex)},compareTo:function(n){var t=n;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:vr.compare(this._segmentOctant,this.coord,t.coord)},isEndPoint:function(n){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===n},isInterior:function(){return this._isInterior},interfaces_:function(){return[or]},getClass:function(){return ob}});t(sb.prototype,{getSplitCoordinates:function(){var r=new ni,n,t,i;for(this.addEndpoints(),n=this.iterator(),t=n.next();n.hasNext();)i=n.next(),this.addEdgeCoordinates(t,i,r),t=i;return r.toCoordinateArray()},addCollapsedNodes:function(){var n=new u,t,i;for(this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n),t=n.iterator();t.hasNext();)i=t.next().intValue(),this.add(this._edge.getCoordinate(i),i)},print:function(n){n.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(n)},findCollapsesFromExistingVertices:function(n){for(var i,r,t=0;t<this._edge.size()-2;t++)i=this._edge.getCoordinate(t),r=(this._edge.getCoordinate(t+1),this._edge.getCoordinate(t+2)),i.equals2D(r)&&n.add(new wu(t+1))},addEdgeCoordinates:function(n,t,i){var f,e,u;for(t.segmentIndex,n.segmentIndex,f=this._edge.getCoordinate(t.segmentIndex),e=t.isInterior()||!t.coord.equals2D(f),i.add(new r(n.coord),!1),u=n.segmentIndex+1;u<=t.segmentIndex;u++)i.add(this._edge.getCoordinate(u));e&&i.add(new r(t.coord))},iterator:function(){return this._nodeMap.values().iterator()},addSplitEdges:function(n){var t,i,r,u;for(this.addEndpoints(),this.addCollapsedNodes(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=this.createSplitEdge(i,r),n.add(u),i=r},findCollapseIndex:function(n,t,i){if(!n.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-n.segmentIndex;return t.isInterior()||r--,1===r&&(i[0]=n.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(n){for(var i,r=new Array(1).fill(null),t=this.iterator(),u=t.next();t.hasNext();)i=t.next(),this.findCollapseIndex(u,i,r)&&n.add(new wu(r[0])),u=i},getEdge:function(){return this._edge},addEndpoints:function(){var n=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0);this.add(this._edge.getCoordinate(n),n)},createSplitEdge:function(n,t){var e=t.segmentIndex-n.segmentIndex+2,s=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(s),i,u,f;for(o||e--,i=new Array(e).fill(null),u=0,i[u++]=new r(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)i[u++]=this._edge.getCoordinate(f);return o&&(i[u]=new r(t.coord)),new df(i,this._edge.getData())},add:function(n,t){var i=new ob(this._edge,n,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(i);return null!==r?(c.isTrue(r.coord.equals2D(n),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(i,i),i)},checkSplitEdgesCorrectness:function(n){var t=this._edge.getCoordinates(),u=n.get(0).getCoordinate(0),i,r;if(!u.equals2D(t[0]))throw new pi("bad split edge start point at "+u);if(i=n.get(n.size()-1).getCoordinates(),r=i[i.length-1],!r.equals2D(t[t.length-1]))throw new pi("bad split edge end point at "+r);},interfaces_:function(){return[]},getClass:function(){return sb}});t(vd.prototype,{next:function(){return null===this._currNode?(this._currNode=this._nextNode,this._currSegIndex=this._currNode.segmentIndex,this.readNextNode(),this._currNode):null===this._nextNode?null:this._nextNode.segmentIndex===this._currNode.segmentIndex?(this._currNode=this._nextNode,this._currSegIndex=this._currNode.segmentIndex,this.readNextNode(),this._currNode):(this._nextNode.segmentIndex,this._currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName());},hasNext:function(){return null!==this._nextNode},readNextNode:function(){this._nextNode=this._nodeIt.hasNext()?this._nodeIt.next():null},interfaces_:function(){return[wc]},getClass:function(){return vd}});t(kh.prototype,{interfaces_:function(){return[]},getClass:function(){return kh}});kh.octant=function(){var t,n,i,u;if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){if(t=arguments[0],n=arguments[1],0===t&&0===n)throw new tt("Cannot compute the octant for point ( "+t+", "+n+" )");return i=Math.abs(t),u=Math.abs(n),0<=t?0<=n?u<=i?0:1:u<=i?7:6:0<=n?u<=i?3:2:u<=i?4:5}if(arguments[0]instanceof r&&arguments[1]instanceof r){var f=arguments[0],e=arguments[1],o=e.x-f.x,s=e.y-f.y;if(0===o&&0===s)throw new tt("Cannot compute the octant for two identical points "+f);return kh.octant(o,s)}};t(pl.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(){},isClosed:function(){},setData:function(){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return pl}});t(hb.prototype,{addIntersection:function(){},interfaces_:function(){return[pl]},getClass:function(){return hb}});t(df.prototype,{getCoordinates:function(){return this._pts},size:function(){return this._pts.length},getCoordinate:function(n){return this._pts[n]},isClosed:function(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function(n){return n===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(n),this.getCoordinate(n+1))},setData:function(n){this._data=n},safeOctant:function(n,t){return n.equals2D(t)?0:kh.octant(n,t)},getData:function(){return this._data},addIntersection:function(){var n,t;if(2===arguments.length)n=arguments[0],t=arguments[1],this.addIntersectionNode(n,t);else if(4===arguments.length){var i=arguments[0],u=arguments[1],f=arguments[3],e=new r(i.getIntersection(f));this.addIntersection(e,u)}},toString:function(){return bi.toLineString(new cu(this._pts))},getNodeList:function(){return this._nodeList},addIntersectionNode:function(n,t){var i=t,r=i+1,u;return r<this._pts.length&&(u=this._pts[r],n.equals2D(u)&&(i=r)),this._nodeList.add(n,i)},addIntersections:function(n,t,i){for(var r=0;r<n.getIntersectionNum();r++)this.addIntersection(n,t,i,r)},interfaces_:function(){return[hb]},getClass:function(){return df}});df.getNodedSubstrings=function(){var t,n;if(1===arguments.length)return t=arguments[0],n=new u,df.getNodedSubstrings(t,n),n;if(2===arguments.length)for(var r=arguments[0],f=arguments[1],i=r.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(f)};t(wl.prototype,{overlap:function(){if(2!==arguments.length&&4===arguments.length){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];n.getLineSegment(t,this._overlapSeg1);i.getLineSegment(r,this._overlapSeg2);this.overlap(this._overlapSeg1,this._overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return wl}});t(bl.prototype,{computeNodes:function(){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return bl}});t(py.prototype,{setSegmentIntersector:function(n){this._segInt=n},interfaces_:function(){return[bl]},getClass:function(){return py}});v(ts,py);t(ts.prototype,{getMonotoneChains:function(){return this._monoChains},getNodedSubstrings:function(){return df.getNodedSubstrings(this._nodedSegStrings)},getIndex:function(){return this._index},add:function(n){for(var t,i=tf.getChains(n.getCoordinates(),n).iterator();i.hasNext();)t=i.next(),t.setId(this._idCounter++),this._index.insert(t.getEnvelope(),t),this._monoChains.add(t)},computeNodes:function(n){for(var t=(this._nodedSegStrings=n).iterator();t.hasNext();)this.add(t.next());this.intersectChains()},intersectChains:function(){for(var n,i,r,u=new kl(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(n=t.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();)if(r=i.next(),r.getId()>n.getId()&&(n.computeOverlaps(r,u),this._nOverlaps++),this._segInt.isDone())return null},interfaces_:function(){return[]},getClass:function(){return ts}});v(kl,wl);t(kl.prototype,{overlap:function(){if(4!==arguments.length)return wl.prototype.overlap.apply(this,arguments);var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3],u=n.getContext(),f=i.getContext();this._si.processIntersections(u,t,f,r)},interfaces_:function(){return[]},getClass:function(){return kl}});ts.SegmentOverlapAction=kl;t(dl.prototype,{rescale:function(){var t,i,n;if(h(arguments[0],at))for(t=arguments[0].iterator();t.hasNext();)i=t.next(),this.rescale(i.getCoordinates());else if(arguments[0]instanceof Array){for(n=arguments[0],2===n.length&&(new r(n[0]),new r(n[1])),t=0;t<n.length;t++)n[t].x=n[t].x/this._scaleFactor+this._offsetX,n[t].y=n[t].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&pt.out.println(n)}},scale:function(){var i,t,f;if(h(arguments[0],at)){for(var e=arguments[0],o=new u(e.size()),n=e.iterator();n.hasNext();)i=n.next(),o.add(new df(this.scale(i.getCoordinates()),i.getData()));return o}if(arguments[0]instanceof Array){for(t=arguments[0],f=new Array(t.length).fill(null),n=0;n<t.length;n++)f[n]=new r(Math.round((t[n].x-this._offsetX)*this._scaleFactor),Math.round((t[n].y-this._offsetY)*this._scaleFactor),t[n].z);return w.removeRepeatedPoints(f)}},isIntegerPrecision:function(){return 1===this._scaleFactor},getNodedSubstrings:function(){var n=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(n),n},computeNodes:function(n){var t=n;this._isScaled&&(t=this.scale(n));this._noder.computeNodes(t)},interfaces_:function(){return[bl]},getClass:function(){return dl}});yd=Object.freeze({MCIndexNoder:ts,ScaledNoder:dl,SegmentString:pl});t(is.prototype,{isSimpleMultiPoint:function(n){var r,t,i;if(n.isEmpty())return!0;for(r=new hr,t=0;t<n.getNumGeometries();t++){if(i=n.getGeometryN(t).getCoordinate(),r.contains(i))return this._nonSimpleLocation=i,!1;r.add(i)}return!0},isSimplePolygonal:function(n){for(var i,t=gi.getLines(n).iterator();t.hasNext();)if(i=t.next(),!this.isSimpleLinearGeometry(i))return!1;return!0},hasClosedEndpointIntersection:function(n){for(var e,u,r=new si,t=n.getEdgeIterator();t.hasNext();){var i=t.next(),f=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(r,o,f);e=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(r,e,f)}for(t=r.values().iterator();t.hasNext();)if(u=t.next(),u.isClosed&&2!==u.degree)return this._nonSimpleLocation=u.getCoordinate(),!0;return!1},getNonSimpleLocation:function(){return this._nonSimpleLocation},isSimpleLinearGeometry:function(n){if(n.isEmpty())return!0;var t=new ar(0,n),r=new fi,i=t.computeSelfNodes(r,!0);return!i.hasIntersection()||(i.hasProperIntersection()?(this._nonSimpleLocation=i.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(t)&&(!this._isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(t)))},hasNonEndpointIntersection:function(n){for(var i,t=n.getEdgeIterator();t.hasNext();)for(var r=t.next(),f=r.getMaximumSegmentIndex(),u=r.getEdgeIntersectionList().iterator();u.hasNext();)if(i=u.next(),!i.isEndPoint(f))return this._nonSimpleLocation=i.getCoordinate(),!0;return!1},addEndpoint:function(n,t,i){var r=n.get(t);null===r&&(r=new wy(t),n.put(t,r));r.addEndpoint(i)},computeSimple:function(n){return this._nonSimpleLocation=null,!!n.isEmpty()||(n instanceof k?this.isSimpleLinearGeometry(n):n instanceof rr?this.isSimpleLinearGeometry(n):n instanceof wr?this.isSimpleMultiPoint(n):h(n,fe)?this.isSimplePolygonal(n):!(n instanceof g)||this.isSimpleGeometryCollection(n))},isSimple:function(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)},isSimpleGeometryCollection:function(n){for(var i,t=0;t<n.getNumGeometries();t++)if(i=n.getGeometryN(t),!this.computeSimple(i))return!1;return!0},interfaces_:function(){return[]},getClass:function(){return is}});is.isSimple=function(){return 1===arguments.length?new is(arguments[0]).isSimple():2===arguments.length?new is(arguments[0],arguments[1]).isSimple():void 0};t(wy.prototype,{addEndpoint:function(n){this.degree++;this.isClosed|=n},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return wy}});is.EndpointInfo=wy;t(ut.prototype,{getEndCapStyle:function(){return this._endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(n){this._quadrantSegments=n;0===this._quadrantSegments&&(this._joinStyle=ut.JOIN_BEVEL);this._quadrantSegments<0&&(this._joinStyle=ut.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments));n<=0&&(this._quadrantSegments=1);this._joinStyle!==ut.JOIN_ROUND&&(this._quadrantSegments=ut.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this._joinStyle},setJoinStyle:function(n){this._joinStyle=n},setSimplifyFactor:function(n){this._simplifyFactor=n<0?0:n},getSimplifyFactor:function(){return this._simplifyFactor},getQuadrantSegments:function(){return this._quadrantSegments},setEndCapStyle:function(n){this._endCapStyle=n},getMitreLimit:function(){return this._mitreLimit},setMitreLimit:function(n){this._mitreLimit=n},setSingleSided:function(n){this._isSingleSided=n},interfaces_:function(){return[]},getClass:function(){return ut}});ut.bufferDistanceError=function(n){var t=Math.PI/2/n;return 1-Math.cos(t/2)};ut.CAP_ROUND=1;ut.CAP_FLAT=2;ut.CAP_SQUARE=3;ut.JOIN_ROUND=1;ut.JOIN_MITRE=2;ut.JOIN_BEVEL=3;ut.DEFAULT_QUADRANT_SEGMENTS=8;ut.DEFAULT_MITRE_LIMIT=5;ut.DEFAULT_SIMPLIFY_FACTOR=.01;t(cb.prototype,{getCoordinate:function(){return this._minCoord},getRightmostSide:function(n,t){var i=this.getRightmostSideOfSegment(n,t);return i<0&&(i=this.getRightmostSideOfSegment(n,t-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(n)),i},findRightmostEdgeAtVertex:function(){var n=this._minDe.getEdge().getCoordinates();c.isTrue(0<this._minIndex&&this._minIndex<n.length,"rightmost point expected to be interior vertex of edge");var t=n[this._minIndex-1],i=n[this._minIndex+1],u=p.index(this._minCoord,i,t),r=!1;t.y<this._minCoord.y&&i.y<this._minCoord.y&&u===p.COUNTERCLOCKWISE?r=!0:t.y>this._minCoord.y&&i.y>this._minCoord.y&&u===p.CLOCKWISE&&(r=!0);r&&(this._minIndex=this._minIndex-1)},getRightmostSideOfSegment:function(n,t){var i=n.getEdge().getCoordinates(),r;return t<0||t+1>=i.length?-1:i[t].y===i[t+1].y?-1:(r=o.LEFT,i[t].y<i[t+1].y&&(r=o.RIGHT),r)},getEdge:function(){return this._orientedDe},checkForRightmostCoordinate:function(n){for(var i=n.getEdge().getCoordinates(),t=0;t<i.length-1;t++)(null===this._minCoord||i[t].x>this._minCoord.x)&&(this._minDe=n,this._minIndex=t,this._minCoord=i[t])},findRightmostEdgeAtNode:function(){var n=this._minDe.getNode().getEdges();this._minDe=n.getRightmostEdge();this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},findEdge:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),i.isForward()&&this.checkForRightmostCoordinate(i);c.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing");0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex();this._orientedDe=this._minDe;this.getRightmostSide(this._minDe,this._minIndex)===o.LEFT&&(this._orientedDe=this._minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return cb}});by.prototype.addLast=function(n){this.array_.push(n)};by.prototype.removeFirst=function(){return this.array_.shift()};by.prototype.isEmpty=function(){return 0===this.array_.length};t(lb.prototype,{clearVisitedEdges:function(){for(var n=this._dirEdgeList.iterator();n.hasNext();)n.next().setVisited(!1)},getRightmostCoordinate:function(){return this._rightMostCoord},computeNodeDepth:function(n){for(var i,r=null,t=n.getEdges().iterator();t.hasNext();)if((i=t.next()).isVisited()||i.getSym().isVisited()){r=i;break}if(null===r)throw new gr("unable to find edge to compute depths at "+n.getCoordinate());for(n.getEdges().computeDepths(r),t=n.getEdges().iterator();t.hasNext();)(i=t.next()).setVisited(!0),this.copySymDepths(i)},computeDepth:function(n){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode();t.getLabel();t.setEdgeDepths(o.RIGHT,n);this.copySymDepths(t);this.computeDepths(t)},create:function(n){this.addReachable(n);this._finder.findEdge(this._dirEdgeList);this._rightMostCoord=this._finder.getCoordinate()},findResultEdges:function(){for(var n,t=this._dirEdgeList.iterator();t.hasNext();)n=t.next(),1<=n.getDepth(o.RIGHT)&&n.getDepth(o.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)},computeDepths:function(n){var t=new wi,i=new by,o=n.getNode(),r,f,e,u;for(i.addLast(o),t.add(o),n.setVisited(!0);!i.isEmpty();)for(r=i.removeFirst(),t.add(r),this.computeNodeDepth(r),f=r.getEdges().iterator();f.hasNext();)e=f.next().getSym(),e.isVisited()||(u=e.getNode(),t.contains(u)||(i.addLast(u),t.add(u)))},compareTo:function(n){var t=n;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},getEnvelope:function(){var t,i,r,n;if(null===this._env){for(t=new y,i=this._dirEdgeList.iterator();i.hasNext();)for(r=i.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},addReachable:function(n){var t=new cr,i;for(t.add(n);!t.empty();)i=t.pop(),this.add(i,t)},copySymDepths:function(n){var t=n.getSym();t.setDepth(o.LEFT,n.getDepth(o.RIGHT));t.setDepth(o.RIGHT,n.getDepth(o.LEFT))},add:function(n,t){var i,r,u;for(n.setVisited(!0),this._nodes.add(n),i=n.getEdges().iterator();i.hasNext();)r=i.next(),this._dirEdgeList.add(r),u=r.getSym().getNode(),u.isVisited()||t.push(u)},getNodes:function(){return this._nodes},getDirectedEdges:function(){return this._dirEdgeList},interfaces_:function(){return[or]},getClass:function(){return lb}});t(dh.prototype,{computeRing:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=this._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t);this._isHole=p.isCCW(this._ring.getCoordinates())},isIsolated:function(){return 1===this._label.getGeometryCount()},computePoints:function(n){var t=this._startDe=n,r=!0,i;do{if(null===t)throw new gr("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new gr("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);i=t.getLabel();c.isTrue(i.isArea());this.mergeLabel(i);this.addPoints(t.getEdge(),t.isForward(),r);r=!1;this.setEdgeRing(t,this);t=this.getNext(t)}while(t!==this._startDe)},getLinearRing:function(){return this._ring},getCoordinate:function(n){return this._pts.get(n)},computeMaxNodeDegree:function(){var n,t;this._maxNodeDegree=0;n=this._startDe;do t=n.getNode().getEdges().getOutgoingDegree(this),t>this._maxNodeDegree&&(this._maxNodeDegree=t),n=this.getNext(n);while(n!==this._startDe);this._maxNodeDegree*=2},addPoints:function(n,t,i){var f=n.getCoordinates(),u,r;if(t)for(u=1,i&&(u=0),r=u;r<f.length;r++)this._pts.add(f[r]);else for(u=f.length-2,i&&(u=f.length-1),r=u;0<=r;r--)this._pts.add(f[r])},isHole:function(){return this._isHole},setInResult:function(){for(var n=this._startDe;n.getEdge().setInResult(!0),(n=n.getNext())!==this._startDe;);},containsPoint:function(n){var i=this.getLinearRing(),t;if(!i.getEnvelopeInternal().contains(n)||!ur.isInRing(n,i.getCoordinates()))return!1;for(t=this._holes.iterator();t.hasNext();)if(t.next().containsPoint(n))return!1;return!0},addHole:function(n){this._holes.add(n)},isShell:function(){return null===this._shell},getLabel:function(){return this._label},getEdges:function(){return this._edges},getMaxNodeDegree:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},getShell:function(){return this._shell},mergeLabel:function(){var n;if(1===arguments.length)n=arguments[0],this.mergeLabel(n,0),this.mergeLabel(n,1);else if(2===arguments.length){var u=arguments[0],t=arguments[1],r=u.getLocation(t,o.RIGHT);if(r===i.NONE)return null;if(this._label.getLocation(t)===i.NONE)return this._label.setLocation(t,r),null}},setShell:function(n){null!==(this._shell=n)&&n.addHole(this)},toPolygon:function(n){for(var i=new Array(this._holes.size()).fill(null),t=0;t<this._holes.size();t++)i[t]=this._holes.get(t).getLinearRing();return n.createPolygon(this.getLinearRing(),i)},interfaces_:function(){return[]},getClass:function(){return dh}});v(ky,dh);t(ky.prototype,{setEdgeRing:function(n,t){n.setMinEdgeRing(t)},getNext:function(n){return n.getNextMin()},interfaces_:function(){return[]},getClass:function(){return ky}});v(gl,dh);t(gl.prototype,{buildMinimalRings:function(){var t=new u,n=this._startDe,i;do null===n.getMinEdgeRing()&&(i=new ky(n,this._geometryFactory),t.add(i)),n=n.getNext();while(n!==this._startDe);return t},setEdgeRing:function(n,t){n.setEdgeRing(t)},linkDirectedEdgesForMinimalEdgeRings:function(){var n=this._startDe;do n.getNode().getEdges().linkMinimalDirectedEdges(this),n=n.getNext();while(n!==this._startDe)},getNext:function(n){return n.getNext()},interfaces_:function(){return[]},getClass:function(){return gl}});t(dy.prototype,{sortShellsAndHoles:function(n,t,i){for(var r,u=n.iterator();u.hasNext();)r=u.next(),r.isHole()?i.add(r):t.add(r)},computePolygons:function(n){for(var r,t=new u,i=n.iterator();i.hasNext();)r=i.next().toPolygon(this._geometryFactory),t.add(r);return t},placeFreeHoles:function(n,t){for(var i,u,r=t.iterator();r.hasNext();)if(i=r.next(),null===i.getShell()){if(u=this.findEdgeRingContaining(i,n),null===u)throw new gr("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(u)}},buildMinimalEdgeRings:function(n,t,i){for(var r,f,e,o=new u,s=n.iterator();s.hasNext();)r=s.next(),2<r.getMaxNodeDegree()?(r.linkDirectedEdgesForMinimalEdgeRings(),f=r.buildMinimalRings(),e=this.findShell(f),null!==e?(this.placePolygonHoles(e,f),t.add(e)):i.addAll(f)):o.add(r);return o},containsPoint:function(n){for(var t=this._shellList.iterator();t.hasNext();)if(t.next().containsPoint(n))return!0;return!1},buildMaximalEdgeRings:function(n){for(var t,f,i=new u,r=n.iterator();r.hasNext();)t=r.next(),t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()&&(f=new gl(t,this._geometryFactory),i.add(f),f.setInResult());return i},placePolygonHoles:function(n,t){for(var r,i=t.iterator();i.hasNext();)r=i.next(),r.isHole()&&r.setShell(n)},getPolygons:function(){return this.computePolygons(this._shellList)},findEdgeRingContaining:function(n,t){for(var r,u=n.getLinearRing(),c=u.getEnvelopeInternal(),l=u.getCoordinateN(0),i=null,f=null,e=t.iterator();e.hasNext();){var o=e.next(),s=o.getLinearRing(),h=s.getEnvelopeInternal();null!==i&&(f=i.getLinearRing().getEnvelopeInternal());r=!1;h.contains(c)&&ur.isInRing(l,s.getCoordinates())&&(r=!0);r&&(null===i||f.contains(h))&&(i=o)}return i},findShell:function(n){for(var t,i=0,r=null,u=n.iterator();u.hasNext();)t=u.next(),t.isHole()||(r=t,i++);return c.isTrue(i<=1,"found two shells in MinimalEdgeRing list"),r},add:function(){var n,i,r;if(1===arguments.length)n=arguments[0],this.add(n.getEdgeEnds(),n.getNodes());else if(2===arguments.length){i=arguments[0];r=arguments[1];pf.linkResultDirectedEdges(r);var f=this.buildMaximalEdgeRings(i),t=new u,e=this.buildMinimalEdgeRings(f,this._shellList,t);this.sortShellsAndHoles(e,this._shellList,t);this.placeFreeHoles(this._shellList,t)}},interfaces_:function(){return[]},getClass:function(){return dy}});t(di.prototype,{isDeletable:function(n,t,i,r){var u=this._inputLine[n],f=this._inputLine[t],e=this._inputLine[i];return!!this.isConcave(u,f,e)&&!!this.isShallow(u,f,e,r)&&this.isShallowSampled(u,f,n,i,r)},deleteShallowConcavities:function(){for(var r,t=1,n=(this._inputLine.length,this.findNextNonDeletedIndex(t)),i=this.findNextNonDeletedIndex(n),u=!1;i<this._inputLine.length;)r=!1,this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=di.DELETE,u=r=!0),t=r?i:n,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n);return u},isShallowConcavity:function(n,t,i,r){return p.index(n,t,i)===this._angleOrientation&&ti.pointToSegment(t,n,i)<r},isShallowSampled:function(n,t,i,r,u){var e=Math.trunc((r-i)/di.NUM_PTS_TO_CHECK),f;for(e<=0&&(e=1),f=i;f<r;f+=e)if(!this.isShallow(n,t,this._inputLine[f],u))return!1;return!0},isConcave:function(n,t,i){return p.index(n,t,i)===this._angleOrientation},simplify:function(n){for(this._distanceTol=Math.abs(n),n<0&&(this._angleOrientation=p.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);this.deleteShallowConcavities(););return this.collapseLine()},findNextNonDeletedIndex:function(n){for(var t=n+1;t<this._inputLine.length&&this._isDeleted[t]===di.DELETE;)t++;return t},isShallow:function(n,t,i,r){return ti.pointToSegment(t,n,i)<r},collapseLine:function(){for(var t=new ni,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==di.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return di}});di.simplify=function(n,t){return new di(n).simplify(t)};di.INIT=0;di.DELETE=1;di.KEEP=1;di.NUM_PTS_TO_CHECK=10;t(na.prototype,{getCoordinates:function(){return this._ptList.toArray(na.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(n){this._precisionModel=n},addPt:function(n){var t=new r(n);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},reverse:function(){},addPts:function(n,t){if(t)for(var i=0;i<n.length;i++)this.addPt(n[i]);else for(i=n.length-1;0<=i;i--)this.addPt(n[i])},isRedundant:function(n){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return n.distance(t)<this._minimimVertexDistance},toString:function(){return(new nt).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this._ptList.size()<1)return null;var n=new r(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(2<=this._ptList.size()&&this._ptList.get(this._ptList.size()-2),n.equals(t))return null;this._ptList.add(n)},setMinimumVertexDistance:function(n){this._minimimVertexDistance=n},interfaces_:function(){return[]},getClass:function(){return na}});na.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);t(gf.prototype,{addNextSegment:function(n,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=n,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=p.index(this._s0,this._s1,this._s2),r=i===p.CLOCKWISE&&this._side===o.LEFT||i===p.COUNTERCLOCKWISE&&this._side===o.RIGHT;0===i?this.addCollinear(t):r?this.addOutsideTurn(i,t):this.addInsideTurn(i,t)},addLineEndCap:function(n,t){var s=new b(n,t),f=new b,u,i,h,c;this.computeOffsetSegment(s,o.LEFT,this._distance,f);u=new b;this.computeOffsetSegment(s,o.RIGHT,this._distance,u);var l=t.x-n.x,a=t.y-n.y,e=Math.atan2(a,l);switch(this._bufParams.getEndCapStyle()){case ut.CAP_ROUND:this._segList.addPt(f.p1);this.addDirectedFillet(t,e+Math.PI/2,e-Math.PI/2,p.CLOCKWISE,this._distance);this._segList.addPt(u.p1);break;case ut.CAP_FLAT:this._segList.addPt(f.p1);this._segList.addPt(u.p1);break;case ut.CAP_SQUARE:i=new r;i.x=Math.abs(this._distance)*Math.cos(e);i.y=Math.abs(this._distance)*Math.sin(e);h=new r(f.p1.x+i.x,f.p1.y+i.y);c=new r(u.p1.x+i.x,u.p1.y+i.y);this._segList.addPt(h);this._segList.addPt(c)}},getCoordinates:function(){return this._segList.getCoordinates()},addMitreJoin:function(n,t,i,u){var e=!0,f=null;try{f=yr.intersection(t.p0,t.p1,i.p0,i.p1);(u<=0?1:f.distance(n)/Math.abs(u))>this._bufParams.getMitreLimit()&&(e=!1)}catch(n){if(!(n instanceof te))throw n;f=new r(0,0);e=!1}e?this._segList.addPt(f):this.addLimitedMitreJoin(t,i,u,this._bufParams.getMitreLimit())},addOutsideTurn:function(n,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*gf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ut.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ut.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,n,this._distance),this._segList.addPt(this._offset1.p0))},createSquare:function(n){this._segList.addPt(new r(n.x+this._distance,n.y+this._distance));this._segList.addPt(new r(n.x+this._distance,n.y-this._distance));this._segList.addPt(new r(n.x-this._distance,n.y-this._distance));this._segList.addPt(new r(n.x-this._distance,n.y+this._distance));this._segList.closeRing()},addSegments:function(n,t){this._segList.addPts(n,t)},addFirstSegment:function(){this._segList.addPt(this._offset1.p0)},addCornerFillet:function(n,t,i,r,u){var o=t.x-n.x,s=t.y-n.y,f=Math.atan2(s,o),h=i.x-n.x,c=i.y-n.y,e=Math.atan2(c,h);r===p.CLOCKWISE?f<=e&&(f+=2*Math.PI):e<=f&&(f-=2*Math.PI);this._segList.addPt(t);this.addDirectedFillet(n,f,e,r,u);this._segList.addPt(i)},addLastSegment:function(){this._segList.addPt(this._offset1.p1)},initSideSegments:function(n,t,i){this._s1=n;this._s2=t;this._side=i;this._seg1.setCoordinates(n,t);this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},addLimitedMitreJoin:function(n,t,i,u){var f=this._seg0.p1,y=d.angle(f,this._seg0.p0),s=(d.angle(f,this._seg1.p1),d.angleBetweenOriented(this._seg0.p0,f,this._seg1.p1)/2),p=d.normalize(y+s),h=d.normalize(p+Math.PI),e=u*i,c=i-e*Math.abs(Math.sin(s)),l=new b(f,new r(f.x+e*Math.cos(h),f.y+e*Math.sin(h))),a=l.pointAlongOffset(1,c),v=l.pointAlongOffset(1,-c);this._side===o.LEFT?(this._segList.addPt(a),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(a))},addDirectedFillet:function(n,t,i,u,f){var a=u===p.CLOCKWISE?-1:1,s=Math.abs(t-i),c=Math.trunc(s/this._filletAngleQuantum+.5),l,e,o,h;if(c<1)return null;for(l=s/c,e=0,o=new r;e<s;)h=t+a*e,o.x=n.x+f*Math.cos(h),o.y=n.y+f*Math.sin(h),this._segList.addPt(o),e+=l},computeOffsetSegment:function(n,t,i,r){var e=t===o.LEFT?1:-1,u=n.p1.x-n.p0.x,f=n.p1.y-n.p0.y,s=Math.sqrt(u*u+f*f),h=e*i*u/s,c=e*i*f/s;r.p0.x=n.p0.x-c;r.p0.y=n.p0.y+h;r.p1.x=n.p1.x-c;r.p1.y=n.p1.y+h},addInsideTurn:function(){var n,t;(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*gf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)?this._segList.addPt(this._offset0.p1):((this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor)?(n=new r((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),t=new r((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(t)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0))},createCircle:function(n){var t=new r(n.x+this._distance,n.y);this._segList.addPt(t);this.addDirectedFillet(n,0,2*Math.PI,-1,this._distance);this._segList.closeRing()},addBevelJoin:function(n,t){this._segList.addPt(n.p1);this._segList.addPt(t.p0)},init:function(n){this._distance=n;this._maxCurveSegmentError=n*(1-Math.cos(this._filletAngleQuantum/2));this._segList=new na;this._segList.setPrecisionModel(this._precisionModel);this._segList.setMinimumVertexDistance(n*gf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(n){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===ut.JOIN_BEVEL||this._bufParams.getJoinStyle()===ut.JOIN_MITRE?(n&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,p.CLOCKWISE,this._distance))},closeRing:function(){this._segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return gf}});gf.OFFSET_SEGMENT_SEPARATION_FACTOR=.001;gf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001;gf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6;gf.MAX_CLOSING_SEG_LEN_FACTOR=80;t(ta.prototype,{getOffsetCurve:function(n,t){var r;if(0===(this._distance=t))return null;var u=t<0,f=Math.abs(t),i=this.getSegGen(f);return n.length<=1?this.computePointCurve(n[0],i):this.computeOffsetCurve(n,u,i),r=i.getCoordinates(),u&&w.reverse(r),r},computeSingleSidedBufferCurve:function(n,t,i){var s=this.simplifyTolerance(this._distance),u,e,r,f,h;if(t)for(i.addSegments(n,!0),u=di.simplify(n,-s),e=u.length-1,i.initSideSegments(u[e],u[e-1],o.LEFT),i.addFirstSegment(),r=e-2;0<=r;r--)i.addNextSegment(u[r],!0);else for(i.addSegments(n,!1),f=di.simplify(n,s),h=f.length-1,i.initSideSegments(f[0],f[1],o.LEFT),i.addFirstSegment(),r=2;r<=h;r++)i.addNextSegment(f[r],!0);i.addLastSegment();i.closeRing()},computeRingBufferCurve:function(n,t,i){var f=this.simplifyTolerance(this._distance),r,e,u,s;for(t===o.RIGHT&&(f=-f),r=di.simplify(n,f),e=r.length-1,i.initSideSegments(r[e-1],r[0],t),u=1;u<=e;u++)s=1!==u,i.addNextSegment(r[u],s);i.closeRing()},computeLineBufferCurve:function(n,t){var s=this.simplifyTolerance(this._distance),u=di.simplify(n,s),e=u.length-1,i,r,f;for(t.initSideSegments(u[0],u[1],o.LEFT),i=2;i<=e;i++)t.addNextSegment(u[i],!0);for(t.addLastSegment(),t.addLineEndCap(u[e-1],u[e]),r=di.simplify(n,-s),f=r.length-1,t.initSideSegments(r[f],r[f-1],o.LEFT),i=f-2;0<=i;i--)t.addNextSegment(r[i],!0);t.addLastSegment();t.addLineEndCap(r[1],r[0]);t.closeRing()},computePointCurve:function(n,t){switch(this._bufParams.getEndCapStyle()){case ut.CAP_ROUND:t.createCircle(n);break;case ut.CAP_SQUARE:t.createSquare(n)}},getLineCurve:function(n,t){var r,i,u;return(this._distance=t)<0&&!this._bufParams.isSingleSided()?null:0===t?null:(r=Math.abs(t),i=this.getSegGen(r),n.length<=1?this.computePointCurve(n[0],i):this._bufParams.isSingleSided()?(u=t<0,this.computeSingleSidedBufferCurve(n,u,i)):this.computeLineBufferCurve(n,i),i.getCoordinates())},getBufferParameters:function(){return this._bufParams},simplifyTolerance:function(n){return n*this._bufParams.getSimplifyFactor()},getRingCurve:function(n,t,i){if(this._distance=i,n.length<=2)return this.getLineCurve(n,i);if(0===i)return ta.copyCoordinates(n);var r=this.getSegGen(i);return this.computeRingBufferCurve(n,t,r),r.getCoordinates()},computeOffsetCurve:function(n,t,i){var s=this.simplifyTolerance(this._distance),u,e,r,f,h;if(t)for(u=di.simplify(n,-s),e=u.length-1,i.initSideSegments(u[e],u[e-1],o.LEFT),i.addFirstSegment(),r=e-2;0<=r;r--)i.addNextSegment(u[r],!0);else for(f=di.simplify(n,s),h=f.length-1,i.initSideSegments(f[0],f[1],o.LEFT),i.addFirstSegment(),r=2;r<=h;r++)i.addNextSegment(f[r],!0);i.addLastSegment()},getSegGen:function(n){return new gf(this._precisionModel,this._bufParams,n)},interfaces_:function(){return[]},getClass:function(){return ta}});ta.copyCoordinates=function(n){for(var i=new Array(n.length).fill(null),t=0;t<i.length;t++)i[t]=new r(n[t]);return i};t(gy.prototype,{findStabbedSegments:function(){var e,s,l,y,a;if(1===arguments.length){for(var f=arguments[0],v=new u,n=this._subgraphs.iterator();n.hasNext();)e=n.next(),s=e.getEnvelope(),f.y<s.getMinY()||f.y>s.getMaxY()||this.findStabbedSegments(f,e.getDirectedEdges(),v);return v}if(3===arguments.length)if(h(arguments[2],li)&&arguments[0]instanceof r&&arguments[1]instanceof ks){var t=arguments[0],c=arguments[1],w=arguments[2],i=c.getEdge().getCoordinates();for(n=0;n<i.length-1;n++)(this._seg.p0=i[n],this._seg.p1=i[n+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<t.x||this._seg.isHorizontal()||t.y<this._seg.p0.y||t.y>this._seg.p1.y||p.index(this._seg.p0,this._seg.p1,t)===p.RIGHT)||(l=c.getDepth(o.LEFT),this._seg.p0.equals(i[n])||(l=c.getDepth(o.RIGHT)),y=new np(this._seg,l),w.add(y))}else if(h(arguments[2],li)&&arguments[0]instanceof r&&h(arguments[1],li)){var b=arguments[0],k=arguments[1],d=arguments[2];for(n=k.iterator();n.hasNext();)a=n.next(),a.isForward()&&this.findStabbedSegments(b,a,d)}},getDepth:function(n){var t=this.findStabbedSegments(n);return 0===t.size()?0:gu.min(t)._leftDepth},interfaces_:function(){return[]},getClass:function(){return gy}});t(np.prototype,{compareTo:function(n){var t=n,i;return this._upwardSeg.minX()>=t._upwardSeg.maxX()?1:this._upwardSeg.maxX()<=t._upwardSeg.minX()?-1:(i=this._upwardSeg.orientationIndex(t._upwardSeg),0!==i?i:0!=(i=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(t._upwardSeg))},compareX:function(n,t){var i=n.p0.compareTo(t.p0);return 0!==i?i:n.p1.compareTo(t.p1)},toString:function(){return this._upwardSeg.toString()},interfaces_:function(){return[or]},getClass:function(){return np}});gy.DepthSegment=np;t(ab.prototype,{addPoint:function(n){if(this._distance<=0)return null;var t=n.getCoordinates(),r=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(r,i.EXTERIOR,i.INTERIOR)},addPolygon:function(n){var r=this._distance,u=o.LEFT,f,e,t,s,h;if((this._distance<0&&(r=-this._distance,u=o.RIGHT),f=n.getExteriorRing(),e=w.removeRepeatedPoints(f.getCoordinates()),this._distance<0&&this.isErodedCompletely(f,this._distance))||this._distance<=0&&e.length<3)return null;for(this.addPolygonRing(e,r,u,i.EXTERIOR,i.INTERIOR),t=0;t<n.getNumInteriorRing();t++)s=n.getInteriorRingN(t),h=w.removeRepeatedPoints(s.getCoordinates()),0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(h,r,o.opposite(u),i.INTERIOR,i.EXTERIOR)},isTriangleErodedCompletely:function(n,t){var i=new lt(n[0],n[1],n[2]),r=i.inCentre();return ti.pointToSegment(r,i.p0,i.p1)<Math.abs(t)},addLineString:function(n){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=w.removeRepeatedPoints(n.getCoordinates()),r=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(r,i.EXTERIOR,i.INTERIOR)},addCurve:function(n,t,r){if(null===n||n.length<2)return null;var u=new df(n,new ri(0,i.BOUNDARY,t,r));this._curveList.add(u)},getCurves:function(){return this.add(this._inputGeom),this._curveList},addPolygonRing:function(n,t,i,r,u){var f,e,s;if(0===t&&n.length<ii.MINIMUM_VALID_SIZE)return null;f=r;e=u;n.length>=ii.MINIMUM_VALID_SIZE&&p.isCCW(n)&&(f=u,e=r,i=o.opposite(i));s=this._curveBuilder.getRingCurve(n,i,t);this.addCurve(s,f,e)},add:function(n){if(n.isEmpty())return null;if(n instanceof st)this.addPolygon(n);else if(n instanceof k)this.addLineString(n);else if(n instanceof dt)this.addPoint(n);else if(n instanceof wr)this.addCollection(n);else if(n instanceof rr)this.addCollection(n);else if(n instanceof vi)this.addCollection(n);else{if(!(n instanceof g))throw new UnsupportedOperationException(n.getClass().getName());this.addCollection(n)}},isErodedCompletely:function(n,t){var i=n.getCoordinates(),r,u;return i.length<4?t<0:4===i.length?this.isTriangleErodedCompletely(i,t):(r=n.getEnvelopeInternal(),u=Math.min(r.getHeight(),r.getWidth()),t<0&&2*Math.abs(t)>u)},addCollection:function(n){for(var i,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),this.add(i)},interfaces_:function(){return[]},getClass:function(){return ab}});t(nh.prototype,{getNextCW:function(n){this.getEdges();var t=this._edgeList.indexOf(n),i=t-1;return 0===t&&(i=this._edgeList.size()-1),this._edgeList.get(i)},propagateSideLabels:function(n){for(var u,e,t,s,h,f=i.NONE,r=this.iterator();r.hasNext();)(t=(e=r.next()).getLabel()).isArea(n)&&t.getLocation(n,o.LEFT)!==i.NONE&&(f=t.getLocation(n,o.LEFT));if(f===i.NONE)return null;for(u=f,r=this.iterator();r.hasNext();)if((t=(e=r.next()).getLabel()).getLocation(n,o.ON)===i.NONE&&t.setLocation(n,o.ON,u),t.isArea(n))if(s=t.getLocation(n,o.LEFT),h=t.getLocation(n,o.RIGHT),h!==i.NONE){if(h!==u)throw new gr("side location conflict",e.getCoordinate());s===i.NONE&&c.shouldNeverReachHere("found single null side (at "+e.getCoordinate()+")");u=s}else c.isTrue(t.getLocation(n,o.LEFT)===i.NONE,"found single null side"),t.setLocation(n,o.RIGHT,u),t.setLocation(n,o.LEFT,u)},getCoordinate:function(){var n=this.iterator();return n.hasNext()?n.next().getCoordinate():null},print:function(n){pt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(n)},isAreaLabelsConsistent:function(n){return this.computeEdgeEndLabels(n.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(n){var r=this.getEdges(),l,u,f,e,t,s,h;if(r.size()<=0)return!0;for(l=r.size()-1,u=r.get(l).getLabel().getLocation(n,o.LEFT),c.isTrue(u!==i.NONE,"Found unlabelled area edge"),f=u,e=this.iterator();e.hasNext();){if((t=e.next().getLabel(),c.isTrue(t.isArea(n),"Found non-area edge"),s=t.getLocation(n,o.LEFT),h=t.getLocation(n,o.RIGHT),s===h)||h!==f)return!1;f=s}return!0},findIndex:function(n){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===n)return t;return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this._edgeList&&(this._edgeList=new u(this._edgeMap.values())),this._edgeList},getLocation:function(n,t,r){return this._ptInAreaLocation[n]===i.NONE&&(this._ptInAreaLocation[n]=fr.locate(t,r[n].getGeometry())),this._ptInAreaLocation[n]},toString:function(){var n=new so,t,i;for(n.append("EdgeEndStar:   "+this.getCoordinate()),n.append("\n"),t=this.iterator();t.hasNext();)i=t.next(),n.append(i),n.append("\n");return n.toString()},computeEdgeEndLabels:function(n){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(n)},computeLabelling:function(n){var e,r,u,t,o,f,s;for(this.computeEdgeEndLabels(n[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1),e=[!1,!1],r=this.iterator();r.hasNext();)for(u=(o=r.next()).getLabel(),t=0;t<2;t++)u.isLine(t)&&u.getLocation(t)===i.BOUNDARY&&(e[t]=!0);for(r=this.iterator();r.hasNext();)for(u=(o=r.next()).getLabel(),t=0;t<2;t++)u.isAnyNull(t)&&(f=i.NONE,e[t]?f=i.EXTERIOR:(s=o.getCoordinate(),f=this.getLocation(t,s,n)),u.setAllLocationsIfNull(t,f))},getDegree:function(){return this._edgeMap.size()},insertEdgeEnd:function(n,t){this._edgeMap.put(n,t);this._edgeList=null},interfaces_:function(){return[]},getClass:function(){return nh}});v(tp,nh);t(tp.prototype,{linkResultDirectedEdges:function(){var n,f;this.getResultAreaEdges();for(var t=null,r=null,i=this._SCANNING_FOR_INCOMING,u=0;u<this._resultAreaEdgeList.size();u++)if(n=this._resultAreaEdgeList.get(u),f=n.getSym(),n.getLabel().isArea())switch(null===t&&n.isInResult()&&(t=n),i){case this._SCANNING_FOR_INCOMING:if(!f.isInResult())continue;r=f;i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!n.isInResult())continue;r.setNext(n);i=this._SCANNING_FOR_INCOMING}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new gr("no outgoing dirEdge found",this.getCoordinate());c.isTrue(t.isInResult(),"unable to link last incoming dirEdge");r.setNext(t)}},insert:function(n){var t=n;this.insertEdgeEnd(t,t)},getRightmostEdge:function(){var i=this.getEdges(),r=i.size(),n;if(r<1)return null;if(n=i.get(0),1===r)return n;var t=i.get(r-1),u=n.getQuadrant(),f=t.getQuadrant();return rt.isNorthern(u)&&rt.isNorthern(f)?n:rt.isNorthern(u)||rt.isNorthern(f)?0!==n.getDy()?n:0!==t.getDy()?t:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):t},print:function(n){var t,i;for(pt.out.println("DirectedEdgeStar: "+this.getCoordinate()),t=this.iterator();t.hasNext();)i=t.next(),n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()},getResultAreaEdges:function(){var t,n;if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;for(this._resultAreaEdgeList=new u,t=this.iterator();t.hasNext();)n=t.next(),(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n);return this._resultAreaEdgeList},updateLabelling:function(n){for(var i,t=this.iterator();t.hasNext();)i=t.next().getLabel(),i.setAllLocationsIfNull(0,n.getLocation(0)),i.setAllLocationsIfNull(1,n.getLocation(1))},linkAllDirectedEdges:function(){var r,u;this.getEdges();for(var n=null,t=null,i=this._edgeList.size()-1;0<=i;i--)r=this._edgeList.get(i),u=r.getSym(),null===t&&(t=u),null!==n&&u.setNext(n),n=r;t.setNext(n)},computeDepths:function(){var t;if(1===arguments.length){var n=arguments[0],u=this.findIndex(n),f=(n.getLabel(),n.getDepth(o.LEFT)),e=n.getDepth(o.RIGHT),s=this.computeDepths(u+1,this._edgeList.size(),f);if(this.computeDepths(0,u,s)!==e)throw new gr("depth mismatch at "+n.getCoordinate());}else if(3===arguments.length){for(var h=arguments[0],c=arguments[1],i=arguments[2],r=h;r<c;r++)t=this._edgeList.get(r),t.getLabel(),t.setEdgeDepths(o.RIGHT,i),i=t.getDepth(o.LEFT);return i}},mergeSymLabels:function(){for(var t,n=this.iterator();n.hasNext();)t=n.next(),t.getLabel().merge(t.getSym().getLabel())},linkMinimalDirectedEdges:function(n){for(var t,e,i=null,u=null,r=this._SCANNING_FOR_INCOMING,f=this._resultAreaEdgeList.size()-1;0<=f;f--){t=this._resultAreaEdgeList.get(f);e=t.getSym();switch(null===i&&t.getEdgeRing()===n&&(i=t),r){case this._SCANNING_FOR_INCOMING:if(e.getEdgeRing()!==n)continue;u=e;r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(t.getEdgeRing()!==n)continue;u.setNextMin(t);r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(c.isTrue(null!==i,"found null for first outgoing dirEdge"),c.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),u.setNextMin(i))},getOutgoingDegree:function(){var n,t,i;if(0===arguments.length){for(n=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&n++;return n}if(1===arguments.length){for(i=arguments[0],n=0,t=this.iterator();t.hasNext();)t.next().getEdgeRing()===i&&n++;return n}},getLabel:function(){return this._label},findCoveredLineEdges:function(){for(var u,f,n,r=i.NONE,t=this.iterator();t.hasNext();)if(u=(n=t.next()).getSym(),!n.isLineEdge()){if(n.isInResult()){r=i.INTERIOR;break}if(u.isInResult()){r=i.EXTERIOR;break}}if(r===i.NONE)return null;for(f=r,t=this.iterator();t.hasNext();)u=(n=t.next()).getSym(),n.isLineEdge()?n.getEdge().setCovered(f===i.INTERIOR):(n.isInResult()&&(f=i.EXTERIOR),u.isInResult()&&(f=i.INTERIOR))},computeLabelling:function(n){var r,f,t,u;for(nh.prototype.computeLabelling.call(this,n),this._label=new ri(i.NONE),r=this.iterator();r.hasNext();)for(f=r.next().getEdge().getLabel(),t=0;t<2;t++)u=f.getLocation(t),u!==i.INTERIOR&&u!==i.BOUNDARY||this._label.setLocation(t,i.INTERIOR)},interfaces_:function(){return[]},getClass:function(){return tp}});v(gh,ds);t(gh.prototype,{createNode:function(n){return new ae(n,new tp)},interfaces_:function(){return[]},getClass:function(){return gh}});t(rs.prototype,{compareTo:function(n){var t=n;return rs.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},interfaces_:function(){return[or]},getClass:function(){return rs}});rs.orientation=function(n){return 1===w.increasingDirection(n)};rs.compareOriented=function(n,t,i,r){for(var e,u,f,h=t?1:-1,c=r?1:-1,l=t?n.length:-1,a=r?i.length:-1,o=t?0:n.length-1,s=r?0:i.length-1;;){if(e=n[o].compareTo(i[s]),0!==e)return e;if(u=(o+=h)===l,f=(s+=c)===a,u&&!f)return-1;if(!u&&f)return 1;if(u&&f)return 0}};t(ip.prototype,{print:function(n){var i,u,r,t;for(n.print("MULTILINESTRING ( "),i=0;i<this._edges.size();i++){for(u=this._edges.get(i),0<i&&n.print(","),n.print("("),r=u.getCoordinates(),t=0;t<r.length;t++)0<t&&n.print(","),n.print(r[t].x+" "+r[t].y);n.println(")")}n.print(")  ")},addAll:function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next())},findEdgeIndex:function(n){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(n))return t;return-1},iterator:function(){return this._edges.iterator()},getEdges:function(){return this._edges},get:function(n){return this._edges.get(n)},findEqualEdge:function(n){var t=new rs(n.getCoordinates());return this._ocaMap.get(t)},add:function(n){this._edges.add(n);var t=new rs(n.getCoordinates());this._ocaMap.put(t,n)},interfaces_:function(){return[]},getClass:function(){return ip}});t(ia.prototype,{processIntersections:function(){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ia}});t(ra.prototype,{isTrivialIntersection:function(n,t,i,r){if(n===i&&1===this._li.getIntersectionNum()){if(ra.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.size()-1;if(0===t&&r===u||0===r&&t===u)return!0}}return!1},getProperIntersectionPoint:function(){return this._properIntersectionPoint},hasProperInteriorIntersection:function(){return this._hasProperInterior},getLineIntersector:function(){return this._li},hasProperIntersection:function(){return this._hasProper},processIntersections:function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this._hasInterior},interfaces_:function(){return[ia]},getClass:function(){return ra}});ra.isAdjacentSegments=function(n,t){return 1===Math.abs(n-t)};t(us.prototype,{setWorkingPrecisionModel:function(n){this._workingPrecisionModel=n},insertUniqueEdge:function(n){var t=this._edgeList.findEqualEdge(n),r,i,u,f;null!==t?(r=t.getLabel(),i=n.getLabel(),t.isPointwiseEqual(n)||(i=new ri(n.getLabel())).flip(),r.merge(i),u=us.depthDelta(i),f=t.getDepthDelta()+u,t.setDepthDelta(f)):(this._edgeList.add(n),n.setDepthDelta(us.depthDelta(n.getLabel())))},buildSubgraphs:function(n,t){for(var r=new u,f=n.iterator();f.hasNext();){var i=f.next(),e=i.getRightmostCoordinate(),o=new gy(r).getDepth(e);i.computeDepth(o);i.findResultEdges();r.add(i);t.add(i.getDirectedEdges(),i.getNodes())}},createSubgraphs:function(n){for(var r,f,t=new u,i=n.getNodes().iterator();i.hasNext();)r=i.next(),r.isVisited()||(f=new lb,f.create(r),t.add(f));return gu.sort(t,gu.reverseOrder()),t},createEmptyResultGeometry:function(){return this._geomFact.createPolygon()},getNoder:function(n){if(null!==this._workingNoder)return this._workingNoder;var t=new ts,i=new fi;return i.setPrecisionModel(n),t.setSegmentIntersector(new ra(i)),t},buffer:function(n,t){var i=this._workingPrecisionModel,r,e,u,f;return(null===i&&(i=n.getPrecisionModel()),this._geomFact=n.getFactory(),r=new ab(n,t,new ta(i,this._bufParams)).getCurves(),r.size()<=0)?this.createEmptyResultGeometry():(this.computeNodedEdges(r,i),this._graph=new pf(new gh),this._graph.addEdges(this._edgeList.getEdges()),e=this.createSubgraphs(this._graph),u=new dy(this._geomFact),this.buildSubgraphs(e,u),f=u.getPolygons(),f.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(f))},computeNodedEdges:function(n,t){var f=this.getNoder(t),u,i,r,e,o;for(f.computeNodes(n),u=f.getNodedSubstrings().iterator();u.hasNext();)i=u.next(),r=i.getCoordinates(),2===r.length&&r[0].equals2D(r[1])||(e=i.getData(),o=new lu(i.getCoordinates(),new ri(e)),this.insertUniqueEdge(o))},setNoder:function(n){this._workingNoder=n},interfaces_:function(){return[]},getClass:function(){return us}});us.depthDelta=function(n){var t=n.getLocation(0,o.LEFT),r=n.getLocation(0,o.RIGHT);return t===i.INTERIOR&&r===i.EXTERIOR?1:t===i.EXTERIOR&&r===i.INTERIOR?-1:0};us.convertSegStrings=function(n){for(var r,f,t=new nt,i=new u;n.hasNext();)r=n.next(),f=t.createLineString(r.getCoordinates()),i.add(f);return t.buildGeometry(i)};t(ua.prototype,{checkEndPtVertexIntersections:function(){var t,n,r,i;if(0===arguments.length)for(t=this._segStrings.iterator();t.hasNext();)n=t.next().getCoordinates(),this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings);else if(2===arguments.length)for(r=arguments[0],t=arguments[1].iterator();t.hasNext();)for(n=t.next().getCoordinates(),i=1;i<n.length-1;i++)if(n[i].equals(r))throw new pi("found endpt/interior pt intersection at index "+i+" :pt "+r);},checkInteriorIntersections:function(){var t,a,i,v,n;if(0===arguments.length)for(t=this._segStrings.iterator();t.hasNext();)for(a=t.next(),i=this._segStrings.iterator();i.hasNext();)v=i.next(),this.checkInteriorIntersections(a,v);else if(2===arguments.length)for(var y=arguments[0],p=arguments[1],w=y.getCoordinates(),b=p.getCoordinates(),r=0;r<w.length-1;r++)for(n=0;n<b.length-1;n++)this.checkInteriorIntersections(y,r,p,n);else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];if(u===e&&f===o)return null;var s=u.getCoordinates()[f],h=u.getCoordinates()[f+1],c=e.getCoordinates()[o],l=e.getCoordinates()[o+1];if(this._li.computeIntersection(s,h,c,l),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,s,h)||this.hasInteriorIntersection(this._li,c,l)))throw new pi("found non-noded intersection at "+s+"-"+h+" and "+c+"-"+l);}},checkValid:function(){this.checkEndPtVertexIntersections();this.checkInteriorIntersections();this.checkCollapses()},checkCollapses:function(){var n,i,t;if(0===arguments.length)for(n=this._segStrings.iterator();n.hasNext();)i=n.next(),this.checkCollapses(i);else if(1===arguments.length)for(t=arguments[0].getCoordinates(),n=0;n<t.length-2;n++)this.checkCollapse(t[n],t[n+1],t[n+2])},hasInteriorIntersection:function(n,t,i){for(var u,r=0;r<n.getIntersectionNum();r++)if(u=n.getIntersection(r),!u.equals(t)&&!u.equals(i))return!0;return!1},checkCollapse:function(n,t,i){if(n.equals(i))throw new pi("found non-noded collapse at "+ua.fact.createLineString([n,t,i]));},interfaces_:function(){return[]},getClass:function(){return ua}});ua.fact=new nt;t(nc.prototype,{intersectsScaled:function(n,t){var u=Math.min(n.x,t.x),f=Math.max(n.x,t.x),e=Math.min(n.y,t.y),o=Math.max(n.y,t.y),r=this._maxx<u||this._minx>f||this._maxy<e||this._miny>o,i;return r?!1:(i=this.intersectsToleranceSquare(n,t),c.isTrue(!(r&&i),"Found bad envelope test"),i)},initCorners:function(n){this._minx=n.x-.5;this._maxx=n.x+.5;this._miny=n.y-.5;this._maxy=n.y+.5;this._corner[0]=new r(this._maxx,this._maxy);this._corner[1]=new r(this._minx,this._maxy);this._corner[2]=new r(this._minx,this._miny);this._corner[3]=new r(this._maxx,this._miny)},intersects:function(n,t){return 1===this._scaleFactor?this.intersectsScaled(n,t):(this.copyScaled(n,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},scale:function(n){return Math.round(n*this._scaleFactor)},getCoordinate:function(){return this._originalPt},copyScaled:function(n,t){t.x=this.scale(n.x);t.y=this.scale(n.y)},getSafeEnvelope:function(){if(null===this._safeEnv){var n=nc.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new y(this._originalPt.x-n,this._originalPt.x+n,this._originalPt.y-n,this._originalPt.y+n)}return this._safeEnv},intersectsPixelClosure:function(n,t){return this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},intersectsToleranceSquare:function(n,t){var i=!1,r=!1;return this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!i||!r)||!!n.equals(this._pt)||!!t.equals(this._pt))))},addSnappedNode:function(n,t){var i=n.getCoordinate(t),r=n.getCoordinate(t+1);return!!this.intersects(i,r)&&(n.addIntersection(this.getCoordinate(),t),!0)},interfaces_:function(){return[]},getClass:function(){return nc}});nc.SAFE_ENV_EXPANSION_FACTOR=.75;t(rp.prototype,{snap:function(){var n;if(1===arguments.length)return n=arguments[0],this.snap(n,null,-1);if(3===arguments.length){var t=arguments[0],u=arguments[1],f=arguments[2],i=t.getSafeEnvelope(),r=new fa(t,u,f);return this._index.query(i,{interfaces_:function(){return[as]},visitItem:function(n){n.select(i,r)}}),r.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return rp}});v(fa,yo);t(fa.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof fy))return yo.prototype.select.apply(this,arguments);var i=arguments[0],n=arguments[1],t=i.getContext();if(null!==this._parentEdge&&t===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(t,n)},interfaces_:function(){return[]},getClass:function(){return fa}});rp.HotPixelSnapAction=fa;t(vb.prototype,{processIntersections:function(n,t,i,r){var u;if(n===i&&t===r)return null;var f=n.getCoordinates()[t],e=n.getCoordinates()[t+1],o=i.getCoordinates()[r],s=i.getCoordinates()[r+1];if(this._li.computeIntersection(f,e,o,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));n.addIntersections(this._li,t,0);i.addIntersections(this._li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this._interiorIntersections},interfaces_:function(){return[ia]},getClass:function(){return vb}});t(yb.prototype,{checkCorrectness:function(n){var t=new ua(df.getNodedSubstrings(n));try{t.checkValid()}catch(n){if(!(n instanceof ov))throw n;n.printStackTrace()}},getNodedSubstrings:function(){return df.getNodedSubstrings(this._nodedSegStrings)},snapRound:function(n,t){var i=this.findInteriorIntersections(n,t);this.computeIntersectionSnaps(i);this.computeVertexSnaps(n)},findInteriorIntersections:function(n,t){var i=new vb(t);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(n),i.getInteriorIntersections()},computeVertexSnaps:function(){var t,u,f;if(h(arguments[0],at))for(t=arguments[0].iterator();t.hasNext();)u=t.next(),this.computeVertexSnaps(u);else if(arguments[0]instanceof df)for(var i=arguments[0],r=i.getCoordinates(),n=0;n<r.length;n++)f=new nc(r[n],this._scaleFactor,this._li),this._pointSnapper.snap(f,i,n)&&i.addIntersection(r[n],n)},computeNodes:function(n){this._nodedSegStrings=n;this._noder=new ts;this._pointSnapper=new rp(this._noder.getIndex());this.snapRound(n,this._li)},computeIntersectionSnaps:function(n){for(var i,t=n.iterator();t.hasNext();)i=new nc(t.next(),this._scaleFactor,this._li),this._pointSnapper.snap(i)},interfaces_:function(){return[bl]},getClass:function(){return yb}});t(yi.prototype,{bufferFixedPrecision:function(n){var i=new dl(new yb(new ht(1)),n.getScale()),t=new us(this._bufParams);t.setWorkingPrecisionModel(n);t.setNoder(i);this._resultGeometry=t.buffer(this._argGeom,this._distance)},bufferReducedPrecision:function(){var n,t,i;if(0===arguments.length){for(n=yi.MAX_PRECISION_DIGITS;0<=n;n--){try{this.bufferReducedPrecision(n)}catch(n){if(!(n instanceof gr))throw n;this._saveException=n}if(null!==this._resultGeometry)return null}throw this._saveException;}1===arguments.length&&(t=arguments[0],i=new ht(yi.precisionScaleFactor(this._argGeom,this._distance,t)),this.bufferFixedPrecision(i))},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var n=this._argGeom.getFactory().getPrecisionModel();n.getType()===ht.FIXED?this.bufferFixedPrecision(n):this.bufferReducedPrecision()},setQuadrantSegments:function(n){this._bufParams.setQuadrantSegments(n)},bufferOriginalPrecision:function(){try{var n=new us(this._bufParams);this._resultGeometry=n.buffer(this._argGeom,this._distance)}catch(n){if(!(n instanceof pi))throw n;this._saveException=n}},getResultGeometry:function(n){return this._distance=n,this.computeGeometry(),this._resultGeometry},setEndCapStyle:function(n){this._bufParams.setEndCapStyle(n)},interfaces_:function(){return[]},getClass:function(){return yi}});yi.bufferOp=function(){var t,i,r,u;if(2===arguments.length)return t=arguments[0],i=arguments[1],new yi(t).getResultGeometry(i);if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof s&&"number"==typeof arguments[1]){var f=arguments[0],e=arguments[1],o=arguments[2];return(n=new yi(f)).setQuadrantSegments(o),n.getResultGeometry(e)}if(arguments[2]instanceof ut&&arguments[0]instanceof s&&"number"==typeof arguments[1])return r=arguments[0],u=arguments[1],(n=new yi(r,arguments[2])).getResultGeometry(u)}else if(4===arguments.length){var n,h=arguments[0],c=arguments[1],l=arguments[2],a=arguments[3];return(n=new yi(h)).setQuadrantSegments(l),n.setEndCapStyle(a),n.getResultGeometry(c)}};yi.precisionScaleFactor=function(n,t,i){var r=n.getEnvelopeInternal(),u=pr.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<t?t:0),f=i-Math.trunc(Math.log(u)/Math.log(10)+1);return Math.pow(10,f)};yi.CAP_ROUND=ut.CAP_ROUND;yi.CAP_BUTT=ut.CAP_FLAT;yi.CAP_FLAT=ut.CAP_FLAT;yi.CAP_SQUARE=ut.CAP_SQUARE;yi.MAX_PRECISION_DIGITS=12;pd=Object.freeze({BufferOp:yi,BufferParameters:ut});t(th.prototype,{filter:function(n){n instanceof st&&this._comps.add(n)},interfaces_:function(){return[ue]},getClass:function(){return th}});th.getPolygons=function(){var i,n,t;return 1===arguments.length?(i=arguments[0],th.getPolygons(i,new u)):2===arguments.length?(n=arguments[0],t=arguments[1],n instanceof st?t.add(n):n instanceof g&&n.apply(new th(t)),t):void 0};t(tu.prototype,{isInsideArea:function(){return this._segIndex===tu.INSIDE_AREA},getCoordinate:function(){return this._pt},getGeometryComponent:function(){return this._component},getSegmentIndex:function(){return this._segIndex},interfaces_:function(){return[]},getClass:function(){return tu}});tu.INSIDE_AREA=-1;t(ih.prototype,{filter:function(n){n instanceof dt&&this._pts.add(n)},interfaces_:function(){return[ue]},getClass:function(){return ih}});ih.getPoints=function(){var t,n,i;return 1===arguments.length?(t=arguments[0],t instanceof dt?gu.singletonList(t):ih.getPoints(t,new u)):2===arguments.length?(n=arguments[0],i=arguments[1],n instanceof dt?i.add(n):n instanceof g&&n.apply(new ih(i)),i):void 0};t(ea.prototype,{filter:function(n){(n instanceof dt||n instanceof k||n instanceof st)&&this._locations.add(new tu(n,0,n.getCoordinate()))},interfaces_:function(){return[ue]},getClass:function(){return ea}});ea.getLocations=function(n){var t=new u;return n.apply(new ea(t)),t};t(uf.prototype,{computeContainmentDistance:function(){var t,f,e,c,v,n;if(0===arguments.length){if(t=new Array(2).fill(null),this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var r=arguments[0],u=arguments[1],s=this._geom[r];if(s.getDimension()<2)return null;if(f=1-r,e=th.getPolygons(s),0<e.size()&&(c=ea.getLocations(this._geom[f]),this.computeContainmentDistance(c,e,u),this._minDistance<=this._terminateDistance))return this._minDistanceLocation[f]=u[0],this._minDistanceLocation[r]=u[1],null}else if(3===arguments.length)if(arguments[2]instanceof Array&&h(arguments[0],li)&&h(arguments[1],li)){for(var l=arguments[0],a=arguments[1],k=arguments[2],o=0;o<l.size();o++)for(v=l.get(o),n=0;n<a.size();n++)if(this.computeContainmentDistance(v,a.get(n),k),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof tu&&arguments[1]instanceof st){var y=arguments[0],p=arguments[1],w=arguments[2],b=y.getCoordinate();if(i.EXTERIOR!==this._ptLocator.locate(b,p))return w[this._minDistance=0]=y,w[1]=new tu(p,b),null}},computeMinDistanceLinesPoints:function(n,t,i){for(var f,u,e,r=0;r<n.size();r++)for(f=n.get(r),u=0;u<t.size();u++)if(e=t.get(u),this.computeMinDistance(f,e,i),this._minDistance<=this._terminateDistance)return null},computeFacetDistance:function(){var n=new Array(2).fill(null),t=gi.getLines(this._geom[0]),i=gi.getLines(this._geom[1]),r=ih.getPoints(this._geom[0]),u=ih.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,i,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(t,u,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(i,r,n),this.updateMinDistance(n,!0),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistancePoints(r,u,n),void this.updateMinDistance(n,!1))))},nearestLocations:function(){return this.computeMinDistance(),this._minDistanceLocation},updateMinDistance:function(n,t){if(null===n[0])return null;t?(this._minDistanceLocation[0]=n[1],this._minDistanceLocation[1]=n[0]):(this._minDistanceLocation[0]=n[0],this._minDistanceLocation[1]=n[1])},nearestPoints:function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){var l,r,i,u;if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof k&&arguments[1]instanceof dt){var f=arguments[0],e=arguments[1],c=arguments[2];if(f.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var t=f.getCoordinates(),o=e.getCoordinate(),n=0;n<t.length-1;n++)if((u=ti.pointToSegment(o,t[n],t[n+1]))<this._minDistance&&(this._minDistance=u,l=new b(t[n],t[n+1]).closestPoint(o),c[0]=new tu(f,n,l),c[1]=new tu(e,0,o)),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof k&&arguments[1]instanceof k){var s=arguments[0],h=arguments[1],a=arguments[2];if(s.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(t=s.getCoordinates(),r=h.getCoordinates(),n=0;n<t.length-1;n++)for(i=0;i<r.length-1;i++){if((u=ti.segmentToSegment(t[n],t[n+1],r[i],r[i+1]))<this._minDistance){this._minDistance=u;var y=new b(t[n],t[n+1]),p=new b(r[i],r[i+1]),v=y.closestPoints(p);a[0]=new tu(s,n,v[0]);a[1]=new tu(h,i,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},computeMinDistancePoints:function(n,t,i){for(var u,f,e,o,r=0;r<n.size();r++)for(u=n.get(r),f=0;f<t.size();f++)if(e=t.get(f),o=u.getCoordinate().distance(e.getCoordinate()),o<this._minDistance&&(this._minDistance=o,i[0]=new tu(u,0,u.getCoordinate()),i[1]=new tu(e,0,e.getCoordinate())),this._minDistance<=this._terminateDistance)return null},distance:function(){if(null===this._geom[0]||null===this._geom[1])throw new tt("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},computeMinDistanceLines:function(n,t,i){for(var f,u,e,r=0;r<n.size();r++)for(f=n.get(r),u=0;u<t.size();u++)if(e=t.get(u),this.computeMinDistance(f,e,i),this._minDistance<=this._terminateDistance)return null},interfaces_:function(){return[]},getClass:function(){return uf}});uf.distance=function(n,t){return new uf(n,t).distance()};uf.isWithinDistance=function(n,t,i){return!(i<n.getEnvelopeInternal().distance(t.getEnvelopeInternal()))&&new uf(n,t,i).distance()<=i};uf.nearestPoints=function(n,t){return new uf(n,t).nearestPoints()};wd=Object.freeze({DistanceOp:uf});t(pb.prototype,{getCoordinates:function(){var n;if(null===this._coordinates){for(var t=0,i=0,r=new ni,u=this._directedEdges.iterator();u.hasNext();)n=u.next(),n.getEdgeDirection()?t++:i++,r.add(n.getEdge().getLine().getCoordinates(),!1,n.getEdgeDirection());this._coordinates=r.toCoordinateArray();t<i&&w.reverse(this._coordinates)}return this._coordinates},toLineString:function(){return this._factory.createLineString(this.getCoordinates())},add:function(n){this._directedEdges.add(n)},interfaces_:function(){return[]},getClass:function(){return pb}});t(vu.prototype,{setVisited:function(n){this._isVisited=n},isMarked:function(){return this._isMarked},setData:function(n){this._data=n},getData:function(){return this._data},setMarked:function(n){this._isMarked=n},getContext:function(){return this._data},isVisited:function(){return this._isVisited},setContext:function(n){this._data=n},interfaces_:function(){return[]},getClass:function(){return vu}});vu.getComponentWithVisitedState=function(n,t){for(;n.hasNext();){var i=n.next();if(i.isVisited()===t)return i}return null};vu.setVisited=function(n,t){for(;n.hasNext();)n.next().setVisited(t)};vu.setMarked=function(n,t){for(;n.hasNext();)n.next().setMarked(t)};v(uu,vu);t(uu.prototype,{isRemoved:function(){return null===this._parentEdge},compareDirection:function(n){return this._quadrant>n._quadrant?1:this._quadrant<n._quadrant?-1:p.index(n._p0,n._p1,this._p1)},getCoordinate:function(){return this._from.getCoordinate()},print:function(n){var t=this.getClass().getName(),i=t.lastIndexOf("."),r=t.substring(i+1);n.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)},getDirectionPt:function(){return this._p1},getAngle:function(){return this._angle},compareTo:function(n){var t=n;return this.compareDirection(t)},getFromNode:function(){return this._from},getSym:function(){return this._sym},setEdge:function(n){this._parentEdge=n},remove:function(){this._sym=null;this._parentEdge=null},getEdge:function(){return this._parentEdge},getQuadrant:function(){return this._quadrant},setSym:function(n){this._sym=n},getToNode:function(){return this._to},getEdgeDirection:function(){return this._edgeDirection},interfaces_:function(){return[or]},getClass:function(){return uu}});uu.toEdges=function(n){for(var t=new u,i=n.iterator();i.hasNext();)t.add(i.next()._parentEdge);return t};v(oa,uu);t(oa.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(c.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return oa}});v(ne,vu);t(ne.prototype,{isRemoved:function(){return null===this._dirEdge},setDirectedEdges:function(n,t){this._dirEdge=[n,t];n.setEdge(this);t.setEdge(this);n.setSym(t);t.setSym(n);n.getFromNode().addOutEdge(n);t.getFromNode().addOutEdge(t)},getDirEdge:function(){var t,n;return Number.isInteger(arguments[0])?(t=arguments[0],this._dirEdge[t]):arguments[0]instanceof ve?(n=arguments[0],this._dirEdge[0].getFromNode()===n?this._dirEdge[0]:this._dirEdge[1].getFromNode()===n?this._dirEdge[1]:null):void 0},remove:function(){this._dirEdge=null},getOppositeNode:function(n){return this._dirEdge[0].getFromNode()===n?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===n?this._dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return ne}});t(wb.prototype,{getNextEdge:function(n){var t=this.getIndex(n);return this._outEdges.get(this.getIndex(t+1))},getCoordinate:function(){var n=this.iterator();return n.hasNext()?n.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this._outEdges.iterator()},sortEdges:function(){this._sorted||(gu.sort(this._outEdges),this._sorted=!0)},remove:function(n){this._outEdges.remove(n)},getEdges:function(){return this.sortEdges(),this._outEdges},getNextCWEdge:function(n){var t=this.getIndex(n);return this._outEdges.get(this.getIndex(t-1))},getIndex:function(){var i,n,r,t;if(arguments[0]instanceof ne){for(i=arguments[0],this.sortEdges(),n=0;n<this._outEdges.size();n++)if(this._outEdges.get(n).getEdge()===i)return n;return-1}if(arguments[0]instanceof uu){for(r=arguments[0],this.sortEdges(),n=0;n<this._outEdges.size();n++)if(this._outEdges.get(n)===r)return n;return-1}if(Number.isInteger(arguments[0]))return t=arguments[0]%this._outEdges.size(),t<0&&(t+=this._outEdges.size()),t},add:function(n){this._outEdges.add(n);this._sorted=!1},getDegree:function(){return this._outEdges.size()},interfaces_:function(){return[]},getClass:function(){return wb}});v(ve,vu);t(ve.prototype,{isRemoved:function(){return null===this._pt},addOutEdge:function(n){this._deStar.add(n)},getCoordinate:function(){return this._pt},getOutEdges:function(){return this._deStar},remove:function(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){var n=arguments[0];this._deStar.remove(n)}},getIndex:function(n){return this._deStar.getIndex(n)},getDegree:function(){return this._deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return ve}});ve.getEdgesBetween=function(n,t){var i=new wi(uu.toEdges(n.getOutEdges().getEdges())),r=uu.toEdges(t.getOutEdges().getEdges());return i.retainAll(r),i};v(up,ne);t(up.prototype,{getLine:function(){return this._line},interfaces_:function(){return[]},getClass:function(){return up}});t(bb.prototype,{find:function(n){return this._nodeMap.get(n)},iterator:function(){return this._nodeMap.values().iterator()},remove:function(n){return this._nodeMap.remove(n)},values:function(){return this._nodeMap.values()},add:function(n){return this._nodeMap.put(n.getCoordinate(),n),n},interfaces_:function(){return[]},getClass:function(){return bb}});t(tc.prototype,{findNodesOfDegree:function(n){for(var r,t=new u,i=this.nodeIterator();i.hasNext();)r=i.next(),r.getDegree()===n&&t.add(r);return t},dirEdgeIterator:function(){return this._dirEdges.iterator()},edgeIterator:function(){return this._edges.iterator()},remove:function(){var t,n,i,f,r,u,e;if(arguments[0]instanceof ne)t=arguments[0],this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove();else if(arguments[0]instanceof uu)n=arguments[0],null!==(r=n.getSym())&&r.setSym(null),n.getFromNode().remove(n),n.remove(),this._dirEdges.remove(n);else if(arguments[0]instanceof ve){for(i=arguments[0],f=i.getOutEdges().getEdges().iterator();f.hasNext();)u=f.next(),null!==(r=u.getSym())&&this.remove(r),this._dirEdges.remove(u),e=u.getEdge(),null!==e&&this._edges.remove(e);this._nodeMap.remove(i.getCoordinate());i.remove()}},findNode:function(n){return this._nodeMap.find(n)},getEdges:function(){return this._edges},nodeIterator:function(){return this._nodeMap.iterator()},contains:function(){var n,t;return arguments[0]instanceof ne?(n=arguments[0],this._edges.contains(n)):arguments[0]instanceof uu?(t=arguments[0],this._dirEdges.contains(t)):void 0},add:function(){var t,n,i;arguments[0]instanceof ve?(t=arguments[0],this._nodeMap.add(t)):arguments[0]instanceof ne?(n=arguments[0],this._edges.add(n),this.add(n.getDirEdge(0)),this.add(n.getDirEdge(1))):arguments[0]instanceof uu&&(i=arguments[0],this._dirEdges.add(i))},getNodes:function(){return this._nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return tc}});v(fp,tc);t(fp.prototype,{addEdge:function(n){var t;if(n.isEmpty()||(t=w.removeRepeatedPoints(n.getCoordinates()),t.length<=1))return null;var f=t[0],e=t[t.length-1],i=this.getNode(f),r=this.getNode(e),o=new oa(i,r,t[1],!0),s=new oa(r,i,t[t.length-2],!1),u=new up(n);u.setDirectedEdges(o,s);this.add(u)},getNode:function(n){var t=this.findNode(n);return null===t&&(t=new ve(n),this.add(t)),t},interfaces_:function(){return[]},getClass:function(){return fp}});t(kb.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var n,t=this._graph.getNodes().iterator();t.hasNext();)n=t.next(),n.isMarked()||(c.isTrue(2===n.getDegree()),this.buildEdgeStringsStartingAt(n),n.setMarked(!0))},buildEdgeStringsForNonDegree2Nodes:function(){for(var n,t=this._graph.getNodes().iterator();t.hasNext();)n=t.next(),2!==n.getDegree()&&(this.buildEdgeStringsStartingAt(n),n.setMarked(!0))},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this._mergedLineStrings},buildEdgeStringsStartingAt:function(n){for(var i,t=n.getOutEdges().iterator();t.hasNext();)i=t.next(),i.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(i))},merge:function(){var n,t;if(null!==this._mergedLineStrings)return null;for(vu.setMarked(this._graph.nodeIterator(),!1),vu.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new u,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new u,n=this._edgeStrings.iterator();n.hasNext();)t=n.next(),this._mergedLineStrings.add(t.toLineString())},buildEdgeStringStartingWith:function(n){for(var i=new pb(this._factory),t=n;i.add(t),t.getEdge().setMarked(!0),null!==(t=t.getNext())&&t!==n;);return i},add:function(){var i,n,r,t;if(arguments[0]instanceof s)arguments[0].apply({interfaces_:function(){return[bu]},filter:function(n){n instanceof k&&this.add(n)}});else if(h(arguments[0],at))for(i=arguments[0],this._mergedLineStrings=null,n=i.iterator();n.hasNext();)r=n.next(),this.add(r);else arguments[0]instanceof k&&(t=arguments[0],null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t))},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return kb}});bd=Object.freeze({LineMerger:kb});t(db.prototype,{getCoordinates:function(){return this._pts},size:function(){return this._pts.length},getCoordinate:function(n){return this._pts[n]},isClosed:function(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function(n){return n===this._pts.length-1?-1:kh.octant(this.getCoordinate(n),this.getCoordinate(n+1))},setData:function(n){this._data=n},getData:function(){return this._data},toString:function(){return bi.toLineString(new cu(this._pts))},interfaces_:function(){return[pl]},getClass:function(){return db}});t(io.prototype,{getInteriorIntersection:function(){return this._interiorIntersection},setCheckEndSegmentsOnly:function(n){this._isCheckEndSegmentsOnly=n},getIntersectionSegments:function(){return this._intSegments},count:function(){return this._intersectionCount},getIntersections:function(){return this._intersections},setFindAllIntersections:function(n){this._findAllIntersections=n},setKeepIntersections:function(n){this._keepIntersections=n},processIntersections:function(n,t,i,r){if(!this._findAllIntersections&&this.hasIntersection()||n===i&&t===r||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(n,t)||this.isEndSegment(i,r)))return null;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=u,this._intSegments[1]=f,this._intSegments[2]=e,this._intSegments[3]=o,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},isEndSegment:function(n,t){return 0===t||t>=n.size()-2},hasIntersection:function(){return null!==this._interiorIntersection},isDone:function(){return!this._findAllIntersections&&null!==this._interiorIntersection},interfaces_:function(){return[ia]},getClass:function(){return io}});io.createAllIntersectionsFinder=function(n){var t=new io(n);return t.setFindAllIntersections(!0),t};io.createAnyIntersectionFinder=function(n){return new io(n)};io.createIntersectionCounter=function(n){var t=new io(n);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};t(sa.prototype,{execute:function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},getIntersections:function(){return this._segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(n){this._findAllIntersections=n},checkInteriorIntersections:function(){this._isValid=!0;this._segInt=new io(this._li);this._segInt.setFindAllIntersections(this._findAllIntersections);var n=new ts;if(n.setSegmentIntersector(this._segInt),n.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new gr(this.getErrorMessage(),this._segInt.getInteriorIntersection());},getErrorMessage:function(){if(this._isValid)return"no intersections found";var n=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+bi.toLineString(n[0],n[1])+" and "+bi.toLineString(n[2],n[3])},interfaces_:function(){return[]},getClass:function(){return sa}});sa.computeIntersections=function(n){var t=new sa(n);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};t(rh.prototype,{checkValid:function(){this._nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return rh}});rh.toSegmentStrings=function(n){for(var r,t=new u,i=n.iterator();i.hasNext();)r=i.next(),t.add(new db(r.getCoordinates(),r));return t};rh.checkValid=function(n){new rh(n).checkValid()};t(ic.prototype,{map:function(n){for(var r,i=new u,t=0;t<n.getNumGeometries();t++)r=this._mapOp.map(n.getGeometryN(t)),r.isEmpty()||i.add(r);return n.getFactory().createGeometryCollection(nt.toGeometryArray(i))},interfaces_:function(){return[]},getClass:function(){return ic}});ic.map=function(n,t){return new ic(t).map(n)};t(gb.prototype,{collectLines:function(n){for(var i,t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();)i=t.next(),this.collectLineEdge(i,n,this._lineEdgesList),this.collectBoundaryTouchEdge(i,n,this._lineEdgesList)},labelIsolatedLine:function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._op.getArgGeometry(t));n.getLabel().setLocation(t,i)},build:function(n){return this.findCoveredLineEdges(),this.collectLines(n),this.buildLines(n),this._resultLineList},collectLineEdge:function(n,t,i){var u=n.getLabel(),r=n.getEdge();n.isLineEdge()&&(n.isVisited()||!a.isResultOfOp(u,t)||r.isCovered()||(i.add(r),n.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var i,n,r,u,t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();)n=i.next(),r=n.getEdge(),n.isLineEdge()&&!r.isCoveredSet()&&(u=this._op.isCoveredByA(n.getCoordinate()),r.setCovered(u))},labelIsolatedLines:function(n){for(var t,r,i=n.iterator();i.hasNext();)t=i.next(),r=t.getLabel(),t.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))},buildLines:function(){for(var n,i,t=this._lineEdgesList.iterator();t.hasNext();)n=t.next(),i=(n.getLabel(),this._geometryFactory.createLineString(n.getCoordinates())),this._resultLineList.add(i),n.setInResult(!0)},collectBoundaryTouchEdge:function(n,t,i){var r=n.getLabel();return n.isLineEdge()?null:n.isVisited()?null:n.isInteriorAreaEdge()?null:n.getEdge().isInResult()?null:(c.isTrue(!(n.isInResult()||n.getSym().isInResult())||!n.getEdge().isInResult()),void(a.isResultOfOp(r,t)&&t===a.INTERSECTION&&(i.add(n.getEdge()),n.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return gb}});t(nk.prototype,{filterCoveredNodeToPoint:function(n){var t=n.getCoordinate(),i;this._op.isCoveredByLA(t)||(i=this._geometryFactory.createPoint(t),this._resultPointList.add(i))},extractNonCoveredResultNodes:function(n){for(var t,r,i=this._op.getGraph().getNodes().iterator();i.hasNext();)t=i.next(),t.isInResult()||t.isIncidentEdgeInResult()||0!==t.getEdges().getDegree()&&n!==a.INTERSECTION||(r=t.getLabel(),a.isResultOfOp(r,n)&&this.filterCoveredNodeToPoint(t))},build:function(n){return this.extractNonCoveredResultNodes(n),this._resultPointList},interfaces_:function(){return[]},getClass:function(){return nk}});t(rc.prototype,{snapVertices:function(n,t){for(var e,u,f=this._isClosed?n.size()-1:n.size(),i=0;i<f;i++)e=n.get(i),u=this.findSnapForVertex(e,t),null!==u&&(n.set(i,new r(u)),0===i&&this._isClosed&&n.set(n.size()-1,new r(u)))},findSnapForVertex:function(n,t){for(var i=0;i<t.length;i++){if(n.equals2D(t[i]))return null;if(n.distance(t[i])<this._snapTolerance)return t[i]}return null},snapTo:function(n){var t=new ni(this._srcPts);return this.snapVertices(t,n),this.snapSegments(t,n),t.toCoordinateArray()},snapSegments:function(n,t){var u,i,f,e;if(0===t.length)return null;for(u=t.length,t[0].equals2D(t[t.length-1])&&(u=t.length-1),i=0;i<u;i++)f=t[i],e=this.findSegmentIndexToSnap(f,n),0<=e&&n.add(e+1,new r(f),!1)},findSegmentIndexToSnap:function(n,t){for(var r,u=l.MAX_VALUE,f=-1,i=0;i<t.size()-1;i++){if(this._seg.p0=t.get(i),this._seg.p1=t.get(i+1),this._seg.p0.equals2D(n)||this._seg.p1.equals2D(n)){if(this._allowSnappingToSourceVertices)continue;return-1}r=this._seg.distance(n);r<this._snapTolerance&&r<u&&(u=r,f=i)}return f},setAllowSnappingToSourceVertices:function(n){this._allowSnappingToSourceVertices=n},interfaces_:function(){return[]},getClass:function(){return rc}});rc.isClosed=function(n){return!(n.length<=1)&&n[0].equals2D(n[n.length-1])};t(er.prototype,{snapTo:function(n,t){return new ha(t,this.extractTargetCoordinates(n)).transform(this._srcGeom)},snapToSelf:function(n,t){var r=new ha(n,this.extractTargetCoordinates(this._srcGeom),!0).transform(this._srcGeom),i=r;return t&&h(i,fe)&&(i=r.buffer(0)),i},computeSnapTolerance:function(n){return this.computeMinimumSegmentLength(n)/10},extractTargetCoordinates:function(n){for(var i=new hr,r=n.getCoordinates(),t=0;t<r.length;t++)i.add(r[t]);return i.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(n){for(var r,i=l.MAX_VALUE,t=0;t<n.length-1;t++)r=n[t].distance(n[t+1]),r<i&&(i=r);return i},interfaces_:function(){return[]},getClass:function(){return er}});er.snap=function(n,t,i){var r=new Array(2).fill(null),f=new er(n),u;return r[0]=f.snapTo(t,i),u=new er(t),r[1]=u.snapTo(r[0],i),r};er.computeOverlaySnapTolerance=function(){var t,u,f;if(1===arguments.length){var i=arguments[0],n=er.computeSizeBasedSnapTolerance(i),r=i.getPrecisionModel();return r.getType()===ht.FIXED&&(t=2/r.getScale()/1.415,n<t&&(n=t)),n}if(2===arguments.length)return u=arguments[0],f=arguments[1],Math.min(er.computeOverlaySnapTolerance(u),er.computeOverlaySnapTolerance(f))};er.computeSizeBasedSnapTolerance=function(n){var t=n.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*er.SNAP_PRECISION_FACTOR};er.snapToSelf=function(n,t,i){return new er(n).snapToSelf(t,i)};er.SNAP_PRECISION_FACTOR=1e-9;v(ha,lr);t(ha.prototype,{snapLine:function(n,t){var i=new rc(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(t)},transformCoordinates:function(n){var t=n.toCoordinateArray(),i=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return ha}});t(fu.prototype,{getCommon:function(){return l.longBitsToDouble(this._commonBits)},add:function(n){var t=l.doubleToLongBits(n);return this._isFirst?(this._commonBits=t,this._commonSignExp=fu.signExpBits(this._commonBits),this._isFirst=!1,null):fu.signExpBits(t)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=fu.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=fu.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],r=l.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+fo.toBinaryString(t),n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+r+" ]"}},interfaces_:function(){return[]},getClass:function(){return fu}});fu.getBit=function(n,t){var i=1<<t%32;return t<32?0!=(n.low&i)?1:0:0!=(n.high&i)?1:0};fu.signExpBits=function(n){return n.high>>>20};fu.zeroLowerBits=function(n,t){var i="low",r;return(32<t&&(n.low=0,t%=32,i="high"),0<t)&&(r=t<32?~((1<<t)-1):0,n[i]&=r),n};fu.numCommonMostSigMantissaBits=function(n,t){for(var r=0,i=52;0<=i;i--){if(fu.getBit(n,i)!==fu.getBit(t,i))return r;r++}return 52};t(ca.prototype,{addCommonBits:function(n){var t=new la(this._commonCoord);n.apply(t);n.geometryChanged()},removeCommonBits:function(n){var t,i;return 0===this._commonCoord.x&&0===this._commonCoord.y?n:(t=new r(this._commonCoord),t.x=-t.x,t.y=-t.y,i=new la(t),n.apply(i),n.geometryChanged(),n)},getCommonCoordinate:function(){return this._commonCoord},add:function(n){n.apply(this._ccFilter);this._commonCoord=this._ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return ca}});t(ep.prototype,{filter:function(n){this._commonBitsX.add(n.x);this._commonBitsY.add(n.y)},getCommonCoordinate:function(){return new r(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},interfaces_:function(){return[pe]},getClass:function(){return ep}});t(la.prototype,{filter:function(n,t){var i=n.getOrdinate(t,0)+this.trans.x,r=n.getOrdinate(t,1)+this.trans.y;n.setOrdinate(t,0,i);n.setOrdinate(t,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ho]},getClass:function(){return la}});ca.CommonCoordinateFilter=ep;ca.Translater=la;t(yu.prototype,{selfSnap:function(n){return new er(n).snapTo(n,this._snapTolerance)},removeCommonBits:function(n){this._cbr=new ca;this._cbr.add(n[0]);this._cbr.add(n[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(n[0].copy()),t[1]=this._cbr.removeCommonBits(n[1].copy()),t},prepareResult:function(n){return this._cbr.addCommonBits(n),n},getResultGeometry:function(n){var t=this.snap(this._geom),i=a.overlayOp(t[0],t[1],n);return this.prepareResult(i)},checkValid:function(n){n.isValid()||pt.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this._snapTolerance=er.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},snap:function(n){var t=this.removeCommonBits(n);return er.snap(t[0],t[1],this._snapTolerance)},interfaces_:function(){return[]},getClass:function(){return yu}});yu.overlayOp=function(n,t,i){return new yu(n,t).getResultGeometry(i)};yu.union=function(n,t){return yu.overlayOp(n,t,a.UNION)};yu.intersection=function(n,t){return yu.overlayOp(n,t,a.INTERSECTION)};yu.symDifference=function(n,t){return yu.overlayOp(n,t,a.SYMDIFFERENCE)};yu.difference=function(n,t){return yu.overlayOp(n,t,a.DIFFERENCE)};t(hi.prototype,{getResultGeometry:function(n){var t=null,i=!1,r=null;try{t=a.overlayOp(this._geom[0],this._geom[1],n);i=!0}catch(n){if(!(n instanceof pi))throw n;r=n}if(!i)try{t=yu.overlayOp(this._geom[0],this._geom[1],n)}catch(n){throw n instanceof pi?r:n;}return t},interfaces_:function(){return[]},getClass:function(){return hi}});hi.overlayOp=function(n,t,i){return new hi(n,t).getResultGeometry(i)};hi.union=function(n,t){return hi.overlayOp(n,t,a.UNION)};hi.intersection=function(n,t){return hi.overlayOp(n,t,a.INTERSECTION)};hi.symDifference=function(n,t){return hi.overlayOp(n,t,a.SYMDIFFERENCE)};hi.difference=function(n,t){return hi.overlayOp(n,t,a.DIFFERENCE)};t(fs.prototype,{getArgGeometry:function(n){return this._arg[n].getGeometry()},setComputationPrecision:function(n){this._resultPrecisionModel=n;this._li.setPrecisionModel(this._resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return fs}});v(a,fs);t(a.prototype,{insertUniqueEdge:function(n){var t=this._edgeList.findEqualEdge(n),u,i,r;null!==t?(u=t.getLabel(),i=n.getLabel(),t.isPointwiseEqual(n)||(i=new ri(n.getLabel())).flip(),r=t.getDepth(),r.isNull()&&r.add(u),r.add(i),u.merge(i)):this._edgeList.add(n)},getGraph:function(){return this._graph},cancelDuplicateResultEdges:function(){for(var n,i,t=this._graph.getEdgeEnds().iterator();t.hasNext();)n=t.next(),i=n.getSym(),n.isInResult()&&i.isInResult()&&(n.setInResult(!1),i.setInResult(!1))},isCoveredByLA:function(n){return!!this.isCovered(n,this._resultLineList)||!!this.isCovered(n,this._resultPolyList)},computeGeometry:function(n,t,i,r){var f=new u;return f.addAll(n),f.addAll(t),f.addAll(i),f.isEmpty()?a.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},mergeSymLabels:function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().mergeSymLabels()},isCovered:function(n,t){for(var u,r=t.iterator();r.hasNext();)if(u=r.next(),this._ptLocator.locate(n,u)!==i.EXTERIOR)return!0;return!1},replaceCollapsedEdges:function(){for(var i,t=new u,n=this._edgeList.iterator();n.hasNext();)i=n.next(),i.isCollapsed()&&(n.remove(),t.add(i.getCollapsedEdge()));this._edgeList.addAll(t)},updateNodeLabelling:function(){for(var t,i,n=this._graph.getNodes().iterator();n.hasNext();)t=n.next(),i=t.getEdges().getLabel(),t.getLabel().merge(i)},getResultGeometry:function(n){return this.computeOverlay(n),this._resultGeom},insertUniqueEdges:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this.insertUniqueEdge(i)},computeOverlay:function(n){var t,i,r,f;this.copyPoints(0);this.copyPoints(1);this._arg[0].computeSelfNodes(this._li,!1);this._arg[1].computeSelfNodes(this._li,!1);this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);t=new u;this._arg[0].computeSplitEdges(t);this._arg[1].computeSplitEdges(t);this.insertUniqueEdges(t);this.computeLabelsFromDepths();this.replaceCollapsedEdges();rh.checkValid(this._edgeList.getEdges());this._graph.addEdges(this._edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(n);this.cancelDuplicateResultEdges();i=new dy(this._geomFact);i.add(this._graph);this._resultPolyList=i.getPolygons();r=new gb(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(n);f=new nk(this,this._geomFact,this._ptLocator);this._resultPointList=f.build(n);this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},labelIncompleteNode:function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[t].getGeometry());n.getLabel().setLocation(t,i)},copyPoints:function(n){for(var i,t=this._arg[n].getNodeIterator();t.hasNext();)i=t.next(),this._graph.addNode(i.getCoordinate()).setLabel(n,i.getLabel().getLocation(n))},findResultAreaEdges:function(n){for(var t,i,r=this._graph.getEdgeEnds().iterator();r.hasNext();)t=r.next(),i=t.getLabel(),i.isArea()&&!t.isInteriorAreaEdge()&&a.isResultOfOp(i.getLocation(0,o.RIGHT),i.getLocation(1,o.RIGHT),n)&&t.setInResult(!0)},computeLabelsFromDepths:function(){for(var n,r=this._edgeList.iterator();r.hasNext();){var u=r.next(),i=u.getLabel(),t=u.getDepth();if(!t.isNull())for(t.normalize(),n=0;n<2;n++)i.isNull(n)||!i.isArea()||t.isNull(n)||(0===t.getDelta(n)?i.toLine(n):(c.isTrue(!t.isNull(n,o.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(n,o.LEFT,t.getLocation(n,o.LEFT)),c.isTrue(!t.isNull(n,o.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(n,o.RIGHT,t.getLocation(n,o.RIGHT))))}},computeLabelling:function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels();this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var n,i,t=this._graph.getNodes().iterator();t.hasNext();)n=t.next(),i=n.getLabel(),n.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)},isCoveredByA:function(n){return!!this.isCovered(n,this._resultPolyList)},interfaces_:function(){return[]},getClass:function(){return a}});a.overlayOp=function(n,t,i){return new a(n,t).getResultGeometry(i)};a.union=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return a.createEmptyResult(a.UNION,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}if(n.isGeometryCollection()||t.isGeometryCollection())throw new tt("This method does not support GeometryCollection arguments");return hi.overlayOp(n,t,a.UNION)};a.intersection=function(n,t){if(n.isEmpty()||t.isEmpty())return a.createEmptyResult(a.INTERSECTION,n,t,n.getFactory());if(n.isGeometryCollection()){var i=t;return ic.map(n,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(i)}})}if(n.isGeometryCollection()||t.isGeometryCollection())throw new tt("This method does not support GeometryCollection arguments");return hi.overlayOp(n,t,a.INTERSECTION)};a.symDifference=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return a.createEmptyResult(a.SYMDIFFERENCE,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}if(n.isGeometryCollection()||t.isGeometryCollection())throw new tt("This method does not support GeometryCollection arguments");return hi.overlayOp(n,t,a.SYMDIFFERENCE)};a.resultDimension=function(n,t,i){var u=t.getDimension(),f=i.getDimension(),r=-1;switch(n){case a.INTERSECTION:r=Math.min(u,f);break;case a.UNION:r=Math.max(u,f);break;case a.DIFFERENCE:r=u;break;case a.SYMDIFFERENCE:r=Math.max(u,f)}return r};a.createEmptyResult=function(n,t,i,r){var u=null;switch(a.resultDimension(n,t,i)){case-1:u=r.createGeometryCollection();break;case 0:u=r.createPoint();break;case 1:u=r.createLineString();break;case 2:u=r.createPolygon()}return u};a.difference=function(n,t){if(n.isEmpty())return a.createEmptyResult(a.DIFFERENCE,n,t,n.getFactory());if(t.isEmpty())return n.copy();if(n.isGeometryCollection()||t.isGeometryCollection())throw new tt("This method does not support GeometryCollection arguments");return hi.overlayOp(n,t,a.DIFFERENCE)};a.isResultOfOp=function(){if(2===arguments.length){var r=arguments[0],u=arguments[1],f=r.getLocation(0),e=r.getLocation(1);return a.isResultOfOp(f,e,u)}if(3===arguments.length){var n=arguments[0],t=arguments[1],o=arguments[2];switch(n===i.BOUNDARY&&(n=i.INTERIOR),t===i.BOUNDARY&&(t=i.INTERIOR),o){case a.INTERSECTION:return n===i.INTERIOR&&t===i.INTERIOR;case a.UNION:return n===i.INTERIOR||t===i.INTERIOR;case a.DIFFERENCE:return n===i.INTERIOR&&t!==i.INTERIOR;case a.SYMDIFFERENCE:return n===i.INTERIOR&&t!==i.INTERIOR||n!==i.INTERIOR&&t===i.INTERIOR}return!1}};a.INTERSECTION=1;a.UNION=2;a.DIFFERENCE=3;a.SYMDIFFERENCE=4;kd=Object.freeze({OverlayOp:a});v(aa,uu);t(aa.prototype,{getNext:function(){return this._next},isInRing:function(){return null!==this._edgeRing},setRing:function(n){this._edgeRing=n},setLabel:function(n){this._label=n},getLabel:function(){return this._label},setNext:function(n){this._next=n},getRing:function(){return this._edgeRing},interfaces_:function(){return[]},getClass:function(){return aa}});v(op,ne);t(op.prototype,{getLine:function(){return this._line},interfaces_:function(){return[]},getClass:function(){return op}});t(ff.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){var n,t,i,r;if(null===this._ringPts){for(n=new ni,t=this._deList.iterator();t.hasNext();)i=t.next(),r=i.getEdge(),ff.addEdge(r.getLine().getCoordinates(),i.getEdgeDirection(),n);this._ringPts=n.toCoordinateArray()}return this._ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),this._ring.isValid())},build:function(n){for(var t=n;this.add(t),t.setRing(this),t=t.getNext(),c.isTrue(null!==t,"found null DE in ring"),c.isTrue(t===n||!t.isInRing(),"found DE already in ring"),t!==n;);},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null,n;if(null!==this._holes)for(t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n);return this._factory.createPolygon(this._ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){var t,n,i;arguments[0]instanceof ii?(t=arguments[0],null===this._holes&&(this._holes=new u),this._holes.add(t)):arguments[0]instanceof ff&&(n=arguments[0],n.setShell(this),i=n.getRing(),null===this._holes&&(this._holes=new u),this._holes.add(i))},setIncluded:function(n){this._isIncluded=n;this._isIncludedSet=!0},getOuterHole:function(){var n,t;if(this.isHole())return null;for(n=0;n<this._deList.size();n++)if(t=this._deList.get(n).getSym().getRing(),t.isOuterHole())return t;return null},computeHole:function(){var n=this.getRing();this._isHole=p.isCCW(n.getCoordinates())},hasShell:function(){return null!==this._shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)},toString:function(){return bi.toLineString(new cu(this.getCoordinates()))},getShell:function(){return this.isHole()?this._shell:this},add:function(n){this._deList.add(n)},getRing:function(){if(null!==this._ring)return this._ring;this.getCoordinates();this._ringPts.length<3&&pt.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(n){if(!(n instanceof ov))throw n;pt.out.println(this._ringPts)}return this._ring},updateIncluded:function(){var n,t;if(this.isHole())return null;for(n=0;n<this._deList.size();n++)if(t=this._deList.get(n).getSym().getRing().getShell(),null!==t&&t.isIncludedSet())return this.setIncluded(!t.isIncluded()),null},setShell:function(n){this._shell=n},setProcessed:function(n){this._isProcessed=n},interfaces_:function(){return[]},getClass:function(){return ff}});ff.findDirEdgesInRing=function(n){for(var t=n,i=new u;i.add(t),t=t.getNext(),c.isTrue(null!==t,"found null DE in ring"),c.isTrue(t===n||!t.isInRing(),"found DE already in ring"),t!==n;);return i};ff.addEdge=function(n,t,i){if(t)for(var r=0;r<n.length;r++)i.add(n[r],!1);else for(r=n.length-1;0<=r;r--)i.add(n[r],!1)};ff.findEdgeRingContaining=function(n,t){for(var e,i=n.getRing(),o=i.getEnvelopeInternal(),s=i.getCoordinateN(0),r=null,h=null,c=t.iterator();c.hasNext();){var l=c.next(),u=l.getRing(),f=u.getEnvelopeInternal();!f.equals(o)&&f.contains(o)&&(s=w.ptNotInList(i.getCoordinates(),u.getCoordinates()),e=!1,ur.isInRing(s,u.getCoordinates())&&(e=!0),e&&(null===r||h.contains(f))&&(h=(r=l).getRing().getEnvelopeInternal()))}return r};t(tk.prototype,{compare:function(n,t){var i=t;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[eo]},getClass:function(){return tk}});ff.EnvelopeComparator=tk;v(oi,tc);t(oi.prototype,{findEdgeRing:function(n){var t=new ff(this._factory);return t.build(n),t},computeDepthParity:function(){if(0===arguments.length)for(;;)return null},computeNextCWEdges:function(){for(var t,n=this.nodeIterator();n.hasNext();)t=n.next(),oi.computeNextCWEdges(t)},addEdge:function(n){var t;if(n.isEmpty()||(t=w.removeRepeatedPoints(n.getCoordinates()),t.length<2))return null;var f=t[0],e=t[t.length-1],i=this.getNode(f),r=this.getNode(e),o=new aa(i,r,t[1],!0),s=new aa(r,i,t[t.length-2],!1),u=new op(n);u.setDirectedEdges(o,s);this.add(u)},deleteCutEdges:function(){var t,i,n,r,f;for(this.computeNextCWEdges(),oi.findLabeledEdgeRings(this._dirEdges),t=new u,i=this._dirEdges.iterator();i.hasNext();)n=i.next(),n.isMarked()||(r=n.getSym(),n.getLabel()===r.getLabel()&&(n.setMarked(!0),r.setMarked(!0),f=n.getEdge(),t.add(f.getLine())));return t},getEdgeRings:function(){var r,t,i,n,f;for(this.computeNextCWEdges(),oi.label(this._dirEdges,-1),r=oi.findLabeledEdgeRings(this._dirEdges),this.convertMaximalToMinimalEdgeRings(r),t=new u,i=this._dirEdges.iterator();i.hasNext();)n=i.next(),n.isMarked()||n.isInRing()||(f=this.findEdgeRing(n),t.add(f));return t},getNode:function(n){var t=this.findNode(n);return null===t&&(t=new ve(n),this.add(t)),t},convertMaximalToMinimalEdgeRings:function(n){for(var i,e,t=n.iterator();t.hasNext();){var r=t.next(),u=r.getLabel(),f=oi.findIntersectionNodes(r,u);if(null!==f)for(i=f.iterator();i.hasNext();)e=i.next(),oi.computeNextCCWEdges(e,u)}},deleteDangles:function(){for(var r,t,u,o,f,s=this.findNodesOfDegree(1),e=new wi,i=new cr,n=s.iterator();n.hasNext();)i.push(n.next());for(;!i.isEmpty();)for(r=i.pop(),oi.deleteAllEdges(r),n=r.getOutEdges().getEdges().iterator();n.hasNext();)t=n.next(),t.setMarked(!0),u=t.getSym(),null!==u&&u.setMarked(!0),o=t.getEdge(),e.add(o.getLine()),f=t.getToNode(),1===oi.getDegreeNonDeleted(f)&&i.push(f);return e},interfaces_:function(){return[]},getClass:function(){return oi}});oi.findLabeledEdgeRings=function(n){for(var t,e,i=new u,r=1,f=n.iterator();f.hasNext();)t=f.next(),t.isMarked()||0<=t.getLabel()||(i.add(t),e=ff.findDirEdgesInRing(t),oi.label(e,r),r++);return i};oi.getDegreeNonDeleted=function(n){for(var t=0,i=n.getOutEdges().getEdges().iterator();i.hasNext();)i.next().isMarked()||t++;return t};oi.deleteAllEdges=function(n){for(var i,r,t=n.getOutEdges().getEdges().iterator();t.hasNext();)i=t.next(),i.setMarked(!0),r=i.getSym(),null!==r&&r.setMarked(!0)};oi.label=function(n,t){for(var i=n.iterator();i.hasNext();)i.next().setLabel(t)};oi.computeNextCWEdges=function(n){for(var i,r=null,t=null,u=n.getOutEdges().getEdges().iterator();u.hasNext();)i=u.next(),i.isMarked()||((null===r&&(r=i),null!==t)&&t.getSym().setNext(i),t=i);null!==t&&t.getSym().setNext(r)};oi.computeNextCCWEdges=function(n,t){for(var u,f=null,i=null,s=n.getOutEdges().getEdges(),e=s.size()-1;0<=e;e--){var o=s.get(e),h=o.getSym(),r=null;o.getLabel()===t&&(r=o);u=null;h.getLabel()===t&&(u=h);null===r&&null===u||(null!==u&&(i=u),null!==r&&(null!==i&&(i.setNext(r),i=null),null===f&&(f=r)))}null!==i&&(c.isTrue(null!==f),i.setNext(f))};oi.getDegree=function(n,t){for(var i=0,r=n.getOutEdges().getEdges().iterator();r.hasNext();)r.next().getLabel()===t&&i++;return i};oi.findIntersectionNodes=function(n,t){var i=n,r=null,f;do f=i.getFromNode(),1<oi.getDegree(f,t)&&(null===r&&(r=new u),r.add(f)),i=i.getNext(),c.isTrue(null!==i,"found null DE in ring"),c.isTrue(i===n||!i.isInRing(),"found DE already in ring");while(i!==n);return r};t(iu.prototype,{getGeometry:function(){return null===this._geomFactory&&(this._geomFactory=new nt),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(nt.toGeometryArray(this._polyList))},getInvalidRingLines:function(){return this.polygonize(),this._invalidRingLines},findValidRings:function(n,t,i){for(var r,u=n.iterator();u.hasNext();)r=u.next(),r.isValid()?t.add(r):i.add(r.getLineString())},polygonize:function(){var t,n,i;if(null!==this._polyList||(this._polyList=new u,null===this._graph))return null;this._dangles=this._graph.deleteDangles();this._cutEdges=this._graph.deleteCutEdges();t=this._graph.getEdgeRings();n=new u;this._invalidRingLines=new u;this._isCheckingRingsValid?this.findValidRings(t,n,this._invalidRingLines):n=t;this.findShellsAndHoles(n);iu.assignHolesToShells(this._holeList,this._shellList);gu.sort(this._shellList,new ff.EnvelopeComparator);i=!0;this._extractOnlyPolygonal&&(iu.findDisjointShells(this._shellList),i=!1);this._polyList=iu.extractPolygons(this._shellList,i)},getDangles:function(){return this.polygonize(),this._dangles},getCutEdges:function(){return this.polygonize(),this._cutEdges},getPolygons:function(){return this.polygonize(),this._polyList},add:function(){var n,i,t;if(h(arguments[0],at))for(n=arguments[0].iterator();n.hasNext();)i=n.next(),this.add(i);else arguments[0]instanceof k?(t=arguments[0],this._geomFactory=t.getFactory(),null===this._graph&&(this._graph=new oi(this._geomFactory)),this._graph.addEdge(t)):arguments[0]instanceof s&&arguments[0].apply(this._lineStringAdder)},setCheckRingsValid:function(n){this._isCheckingRingsValid=n},findShellsAndHoles:function(n){var i,t;for(this._holeList=new u,this._shellList=new u,i=n.iterator();i.hasNext();)t=i.next(),t.computeHole(),t.isHole()?this._holeList.add(t):this._shellList.add(t)},interfaces_:function(){return[]},getClass:function(){return iu}});iu.findOuterShells=function(n){for(var r,t,i=n.iterator();i.hasNext();)r=i.next(),t=r.getOuterHole(),null===t||t.isProcessed()||(r.setIncluded(!0),t.setProcessed(!0))};iu.extractPolygons=function(n,t){for(var f,i=new u,r=n.iterator();r.hasNext();)f=r.next(),(t||f.isIncluded())&&i.add(f.getPolygon());return i};iu.assignHolesToShells=function(n,t){for(var r,i=n.iterator();i.hasNext();)r=i.next(),iu.assignHoleToShell(r,t)};iu.assignHoleToShell=function(n,t){var i=ff.findEdgeRingContaining(n,t);null!==i&&i.addHole(n)};iu.findDisjointShells=function(n){var t,r,i;iu.findOuterShells(n);t=null;do for(t=!1,r=n.iterator();r.hasNext();)i=r.next(),i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(t=!0));while(t)};t(sp.prototype,{filter:function(n){n instanceof k&&this.p.add(n)},interfaces_:function(){return[bu]},getClass:function(){return sp}});iu.LineStringAdder=sp;dd=Object.freeze({Polygonizer:iu});t(hp.prototype,{createEdgeEndForNext:function(n,t,i,r){var f=i.segmentIndex+1,u,e;if(f>=n.getNumPoints()&&null===r)return null;u=n.getCoordinate(f);null!==r&&r.segmentIndex===i.segmentIndex&&(u=r.coord);e=new yf(n,i.coord,u,new ri(n.getLabel()));t.add(e)},createEdgeEndForPrev:function(n,t,i,r){var u=i.segmentIndex,f,e,o;if(0===i.dist){if(0===u)return null;u--}f=n.getCoordinate(u);null!==r&&r.segmentIndex>=u&&(f=r.coord);e=new ri(n.getLabel());e.flip();o=new yf(n,i.coord,f,e);t.add(o)},computeEdgeEnds:function(){var o,t;if(1===arguments.length){for(var l=arguments[0],f=new u,e=l;e.hasNext();)o=e.next(),this.computeEdgeEnds(o,f);return f}if(2===arguments.length){var r=arguments[0],s=arguments[1],h=r.getEdgeIntersectionList();h.addEndpoints();var i=h.iterator(),c=null,n=null;if(!i.hasNext())return null;for(t=i.next();c=n,n=t,t=null,i.hasNext()&&(t=i.next()),null!==n&&(this.createEdgeEndForPrev(r,s,n,c),this.createEdgeEndForNext(r,s,n,t)),null!==n;);}},interfaces_:function(){return[]},getClass:function(){return hp}});v(va,yf);t(va.prototype,{insert:function(n){this._edgeEnds.add(n)},print:function(n){n.println("EdgeEndBundle--> Label: "+this._label);for(var t=this.iterator();t.hasNext();)t.next().print(n),n.println()},iterator:function(){return this._edgeEnds.iterator()},getEdgeEnds:function(){return this._edgeEnds},computeLabelOn:function(n,t){for(var r,u=0,f=!1,e=this.iterator();e.hasNext();)(r=e.next().getLabel().getLocation(n))===i.BOUNDARY&&u++,r===i.INTERIOR&&(f=!0);r=i.NONE;f&&(r=i.INTERIOR);0<u&&(r=ar.determineBoundary(t,u));this._label.setLocation(n,r)},computeLabelSide:function(n,t){for(var u,f,r=this.iterator();r.hasNext();)if(u=r.next(),u.getLabel().isArea()){if(f=u.getLabel().getLocation(n,t),f===i.INTERIOR)return this._label.setLocation(n,t,i.INTERIOR),null;f===i.EXTERIOR&&this._label.setLocation(n,t,i.EXTERIOR)}},getLabel:function(){return this._label},computeLabelSides:function(n){this.computeLabelSide(n,o.LEFT);this.computeLabelSide(n,o.RIGHT)},updateIM:function(n){lu.updateIM(this._label,n)},computeLabel:function(n){for(var t,r=!1,u=this.iterator();u.hasNext();)u.next().getLabel().isArea()&&(r=!0);for(this._label=r?new ri(i.NONE,i.NONE,i.NONE):new ri(i.NONE),t=0;t<2;t++)this.computeLabelOn(t,n),r&&this.computeLabelSides(t)},interfaces_:function(){return[]},getClass:function(){return va}});v(cp,nh);t(cp.prototype,{updateIM:function(n){for(var t=this.iterator();t.hasNext();)t.next().updateIM(n)},insert:function(n){var t=this._edgeMap.get(n);null===t?(t=new va(n),this.insertEdgeEnd(n,t)):t.insert(n)},interfaces_:function(){return[]},getClass:function(){return cp}});v(lp,ae);t(lp.prototype,{updateIMFromEdges:function(n){this._edges.updateIM(n)},computeIM:function(n){n.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return lp}});v(ya,ds);t(ya.prototype,{createNode:function(n){return new lp(n,new cp)},interfaces_:function(){return[]},getClass:function(){return ya}});t(ap.prototype,{insertEdgeEnds:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this._nodes.add(i)},computeProperIntersectionIM:function(n,t){var i=this._arg[0].getGeometry().getDimension(),r=this._arg[1].getGeometry().getDimension(),u=n.hasProperIntersection(),f=n.hasProperInteriorIntersection();2===i&&2===r?u&&t.setAtLeast("212101212"):2===i&&1===r?(u&&t.setAtLeast("FFF0FFFF2"),f&&t.setAtLeast("1FFFFF1FF")):1===i&&2===r?(u&&t.setAtLeast("F0FFFFFF2"),f&&t.setAtLeast("1F1FFFFFF")):1===i&&1===r&&f&&t.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(n,t){for(var i,r=this._arg[n].getEdgeIterator();r.hasNext();)i=r.next(),i.isIsolated()&&(this.labelIsolatedEdge(i,t,this._arg[t].getGeometry()),this._isolatedEdges.add(i))},labelIsolatedEdge:function(n,t,r){if(0<r.getDimension()){var u=this._ptLocator.locate(n.getCoordinate(),r);n.getLabel().setAllLocations(t,u)}else n.getLabel().setAllLocations(t,i.EXTERIOR)},computeIM:function(){var n=new et,r,t,u,f;return(n.set(i.EXTERIOR,i.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))?(this.computeDisjointIM(n),n):(this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),r=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1),this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(r,n),t=new hp,u=t.computeEdgeEnds(this._arg[0].getEdgeIterator()),this.insertEdgeEnds(u),f=t.computeEdgeEnds(this._arg[1].getEdgeIterator()),this.insertEdgeEnds(f),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(n),n)},labelNodeEdges:function(){for(var n=this._nodes.iterator();n.hasNext();)n.next().getEdges().computeLabelling(this._arg)},copyNodesAndLabels:function(n){for(var i,t=this._arg[n].getNodeIterator();t.hasNext();)i=t.next(),this._nodes.addNode(i.getCoordinate()).setLabel(n,i.getLabel().getLocation(n))},labelIntersectionNodes:function(n){for(var e,t,r=this._arg[n].getEdgeIterator();r.hasNext();)for(var u=r.next(),o=u.getLabel().getLocation(n),f=u.getEdgeIntersectionList().iterator();f.hasNext();)e=f.next(),t=this._nodes.find(e.coord),t.getLabel().isNull(n)&&(o===i.BOUNDARY?t.setLabelBoundary(n):t.setLabel(n,i.INTERIOR))},labelIsolatedNode:function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[t].getGeometry());n.getLabel().setAllLocations(t,i)},computeIntersectionNodes:function(n){for(var e,t,r=this._arg[n].getEdgeIterator();r.hasNext();)for(var u=r.next(),o=u.getLabel().getLocation(n),f=u.getEdgeIntersectionList().iterator();f.hasNext();)e=f.next(),t=this._nodes.addNode(e.coord),o===i.BOUNDARY?t.setLabelBoundary(n):t.getLabel().isNull(n)&&t.setLabel(n,i.INTERIOR)},labelIsolatedNodes:function(){for(var n,i,t=this._nodes.iterator();t.hasNext();)n=t.next(),i=n.getLabel(),c.isTrue(0<i.getGeometryCount(),"node with empty label found"),n.isIsolated()&&(i.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))},updateIM:function(n){for(var i,r,t=this._isolatedEdges.iterator();t.hasNext();)t.next().updateIM(n);for(i=this._nodes.iterator();i.hasNext();)r=i.next(),r.updateIM(n),r.updateIMFromEdges(n)},computeDisjointIM:function(n){var r=this._arg[0].getGeometry(),t;r.isEmpty()||(n.set(i.INTERIOR,i.EXTERIOR,r.getDimension()),n.set(i.BOUNDARY,i.EXTERIOR,r.getBoundaryDimension()));t=this._arg[1].getGeometry();t.isEmpty()||(n.set(i.EXTERIOR,i.INTERIOR,t.getDimension()),n.set(i.EXTERIOR,i.BOUNDARY,t.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return ap}});t(pa.prototype,{isContainedInBoundary:function(n){var t,i;if(n instanceof st)return!1;if(n instanceof dt)return this.isPointContainedInBoundary(n);if(n instanceof k)return this.isLineStringContainedInBoundary(n);for(t=0;t<n.getNumGeometries();t++)if(i=n.getGeometryN(t),!this.isContainedInBoundary(i))return!1;return!0},isLineSegmentContainedInBoundary:function(n,t){if(n.equals(t))return this.isPointContainedInBoundary(n);if(n.x===t.x){if(n.x===this._rectEnv.getMinX()||n.x===this._rectEnv.getMaxX())return!0}else if(n.y===t.y&&(n.y===this._rectEnv.getMinY()||n.y===this._rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(n){for(var i=n.getCoordinateSequence(),u=new r,f=new r,t=0;t<i.size()-1;t++)if(i.getCoordinate(t,u),i.getCoordinate(t+1,f),!this.isLineSegmentContainedInBoundary(u,f))return!1;return!0},isPointContainedInBoundary:function(){var t,n;return arguments[0]instanceof dt?(t=arguments[0],this.isPointContainedInBoundary(t.getCoordinate())):arguments[0]instanceof r?(n=arguments[0],n.x===this._rectEnv.getMinX()||n.x===this._rectEnv.getMaxX()||n.y===this._rectEnv.getMinY()||n.y===this._rectEnv.getMaxY()):void 0},contains:function(n){return!!this._rectEnv.contains(n.getEnvelopeInternal())&&!this.isContainedInBoundary(n)},interfaces_:function(){return[]},getClass:function(){return pa}});pa.contains=function(n,t){return new pa(n).contains(t)};t(ik.prototype,{intersects:function(n,t){var u=new y(n,t),r,i;return this._rectEnv.intersects(u)?this._rectEnv.intersects(n)?!0:this._rectEnv.intersects(t)?!0:(0<n.compareTo(t)&&(r=n,n=t,t=r),i=!1,t.y>n.y&&(i=!0),i?this._li.computeIntersection(n,t,this._diagDown0,this._diagDown1):this._li.computeIntersection(n,t,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()):!1},interfaces_:function(){return[]},getClass:function(){return ik}});t(es.prototype,{applyTo:function(n){for(var i,t=0;t<n.getNumGeometries()&&!this._isDone;t++)if(i=n.getGeometryN(t),i instanceof g)this.applyTo(i);else if(this.visit(i),this.isDone())return this._isDone=!0,null},interfaces_:function(){return[]},getClass:function(){return es}});t(uc.prototype,{intersects:function(n){var t,i,r;return this._rectEnv.intersects(n.getEnvelopeInternal())?(t=new vp(this._rectEnv),t.applyTo(n),t.intersects())?!0:(i=new yp(this._rectangle),i.applyTo(n),i.containsPoint())?!0:(r=new pp(this._rectangle),r.applyTo(n),!!r.intersects()):!1},interfaces_:function(){return[]},getClass:function(){return uc}});uc.intersects=function(n,t){return new uc(n).intersects(t)};v(vp,es);t(vp.prototype,{isDone:function(){return!0===this._intersects},visit:function(n){var t=n.getEnvelopeInternal();return this._rectEnv.intersects(t)?this._rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this._rectEnv.getMinX()&&t.getMaxX()<=this._rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this._rectEnv.getMinY()&&t.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return vp}});v(yp,es);t(yp.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(n){var u,t,i;if(!(n instanceof st)||(u=n.getEnvelopeInternal(),!this._rectEnv.intersects(u)))return null;for(t=new r,i=0;i<4;i++)if(this._rectSeq.getCoordinate(i,t),u.contains(t)&&fr.containsPointInPolygon(t,n))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return yp}});v(pp,es);t(pp.prototype,{intersects:function(){return this._hasIntersection},isDone:function(){return!0===this._hasIntersection},visit:function(n){var i=n.getEnvelopeInternal(),t;if(!this._rectEnv.intersects(i))return null;t=gi.getLines(n);this.checkIntersectionWithLineStrings(t)},checkIntersectionWithLineStrings:function(n){for(var i,t=n.iterator();t.hasNext();)if(i=t.next(),this.checkIntersectionWithSegments(i),this._hasIntersection)return null},checkIntersectionWithSegments:function(n){for(var i=n.getCoordinateSequence(),t=1;t<i.size();t++)if(i.getCoordinate(t-1,this._p0),i.getCoordinate(t,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return pp}});v(yt,fs);t(yt.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return yt}});yt.covers=function(n,t){return!(2===t.getDimension()&&n.getDimension()<2)&&!(1===t.getDimension()&&n.getDimension()<1&&0<t.getLength())&&!!n.getEnvelopeInternal().covers(t.getEnvelopeInternal())&&(!!n.isRectangle()||new yt(n,t).getIntersectionMatrix().isCovers())};yt.intersects=function(n,t){var i,r;if(!n.getEnvelopeInternal().intersects(t.getEnvelopeInternal()))return!1;if(n.isRectangle())return uc.intersects(n,t);if(t.isRectangle())return uc.intersects(t,n);if(n.isGeometryCollection()||t.isGeometryCollection()){for(i=0;i<n.getNumGeometries();i++)for(r=0;r<t.getNumGeometries();r++)if(n.getGeometryN(i).intersects(t.getGeometryN(r)))return!0;return!1}return new yt(n,t).getIntersectionMatrix().isIntersects()};yt.touches=function(n,t){return!!n.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new yt(n,t).getIntersectionMatrix().isTouches(n.getDimension(),t.getDimension())};yt.relate=function(){return 2===arguments.length?new yt(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new yt(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0};yt.overlaps=function(n,t){return!!n.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new yt(n,t).getIntersectionMatrix().isOverlaps(n.getDimension(),t.getDimension())};yt.crosses=function(n,t){return!!n.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new yt(n,t).getIntersectionMatrix().isCrosses(n.getDimension(),t.getDimension())};yt.contains=function(n,t){return!(2===t.getDimension()&&n.getDimension()<2)&&!(1===t.getDimension()&&n.getDimension()<1&&0<t.getLength())&&!!n.getEnvelopeInternal().contains(t.getEnvelopeInternal())&&(n.isRectangle()?pa.contains(n,t):new yt(n,t).getIntersectionMatrix().isContains())};gd=Object.freeze({RelateOp:yt});t(eu.prototype,{extractElements:function(n,t){var i,r;if(null===n)return null;for(i=0;i<n.getNumGeometries();i++)r=n.getGeometryN(i),this._skipEmpty&&r.isEmpty()||t.add(r)},combine:function(){for(var i,n=new u,t=this._inputGeoms.iterator();t.hasNext();)i=t.next(),this.extractElements(i,n);return 0===n.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(n)},interfaces_:function(){return[]},getClass:function(){return eu}});eu.combine=function(){var n,t;if(1===arguments.length)return new eu(arguments[0]).combine();if(2===arguments.length)return n=arguments[0],t=arguments[1],new eu(eu.createList(n,t)).combine();if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];return new eu(eu.createList(i,r,u)).combine()}};eu.extractFactory=function(n){return n.isEmpty()?null:n.iterator().next().getFactory()};eu.createList=function(){var t,i;if(2===arguments.length)return t=arguments[0],i=arguments[1],(n=new u).add(t),n.add(i),n;if(3===arguments.length){var n,r=arguments[0],f=arguments[1],e=arguments[2];return(n=new u).add(r),n.add(f),n.add(e),n}};t(wa.prototype,{union:function(){for(var u,f,n,e=new bs,t=new hr,r=0;r<this._pointGeom.getNumGeometries();r++)u=this._pointGeom.getGeometryN(r).getCoordinate(),e.locate(u,this._otherGeom)===i.EXTERIOR&&t.add(u);return 0===t.size()?this._otherGeom:(f=null,n=w.toCoordinateArray(t),f=1===n.length?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n),eu.combine(f,this._otherGeom))},interfaces_:function(){return[]},getClass:function(){return wa}});wa.union=function(n,t){return new wa(n,t).union()};t(ef.prototype,{filter:function(n){(null===this._geometryType||ef.isOfType(n,this._geometryType))&&this._comps.add(n)},interfaces_:function(){return[ue]},getClass:function(){return ef}});ef.isOfType=function(n,t){return n.getGeometryType()===t||t===s.TYPENAME_LINESTRING&&n.getGeometryType()===s.TYPENAME_LINEARRING};ef.extract=function(){var i,r;if(2===arguments.length)return i=arguments[0],r=arguments[1],ef.extract(i,r,new u);if(3===arguments.length){if(h(arguments[2],li)&&arguments[0]instanceof s&&"string"==typeof arguments[1]){var n=arguments[0],f=arguments[1],t=arguments[2];return n.getGeometryType()===f?t.add(n):n instanceof g&&n.apply(new ef(f,t)),t}if(h(arguments[2],li)&&arguments[0]instanceof s&&arguments[1]instanceof Class){var e=arguments[0],o=arguments[1],c=arguments[2];return ef.extract(e,ef.toGeometryType(o),c)}}};t(pu.prototype,{reduceToGeometries:function(n){for(var t,i,r=new u,f=n.iterator();f.hasNext();)t=f.next(),i=null,h(t,li)?i=this.unionTree(t):t instanceof s&&(i=t),r.add(i);return r},extractByEnvelope:function(n,t,i){for(var f,e=new u,r=0;r<t.getNumGeometries();r++)f=t.getGeometryN(r),f.getEnvelopeInternal().intersects(n)?e.add(f):i.add(f);return this._geomFactory.buildGeometry(e)},unionOptimized:function(n,t){var i=n.getEnvelopeInternal(),r=t.getEnvelopeInternal(),u;return i.intersects(r)?n.getNumGeometries()<=1&&t.getNumGeometries()<=1?this.unionActual(n,t):(u=i.intersection(r),this.unionUsingEnvelopeIntersection(n,t,u)):eu.combine(n,t)},union:function(){var n,t,i,r;if(null===this._inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;for(this._geomFactory=this._inputPolys.iterator().next().getFactory(),n=new bt(pu.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();)i=t.next(),n.insert(i.getEnvelopeInternal(),i);return this._inputPolys=null,r=n.itemsTree(),this.unionTree(r)},binaryUnion:function(){var u,r,f,e;if(1===arguments.length)return u=arguments[0],this.binaryUnion(u,0,u.size());if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];return i-n<=1?(r=pu.getGeometry(t,n),this.unionSafe(r,null)):i-n==2?this.unionSafe(pu.getGeometry(t,n),pu.getGeometry(t,n+1)):(f=Math.trunc((i+n)/2),e=(r=this.binaryUnion(t,n,f),this.binaryUnion(t,f,i)),this.unionSafe(r,e))}},repeatedUnion:function(n){for(var r,t=null,i=n.iterator();i.hasNext();)r=i.next(),t=null===t?r.copy():t.union(r);return t},unionSafe:function(n,t){return null===n&&null===t?null:null===n?t.copy():null===t?n.copy():this.unionOptimized(n,t)},unionActual:function(n,t){return pu.restrictToPolygons(n.union(t))},unionTree:function(n){var t=this.reduceToGeometries(n);return this.binaryUnion(t)},unionUsingEnvelopeIntersection:function(n,t,i){var r=new u,f=this.extractByEnvelope(i,n,r),e=this.extractByEnvelope(i,t,r),o=this.unionActual(f,e);return r.add(o),eu.combine(r)},bufferUnion:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],n.get(0).getFactory().buildGeometry(n).buffer(0)):2===arguments.length?(t=arguments[0],i=arguments[1],t.getFactory().createGeometryCollection([t,i]).buffer(0)):void 0},interfaces_:function(){return[]},getClass:function(){return pu}});pu.restrictToPolygons=function(n){if(h(n,fe))return n;var t=th.getPolygons(n);return 1===t.size()?t.get(0):n.getFactory().createMultiPolygon(nt.toPolygonArray(t))};pu.getGeometry=function(n,t){return t>=n.size()?null:n.get(t)};pu.union=function(n){return new pu(n).union()};pu.STRTREE_NODE_CAPACITY=4;t(os.prototype,{unionNoOpt:function(n){var t=this._geomFact.createPoint();return hi.overlayOp(n,t,a.UNION)},unionWithNull:function(n,t){return null===n&&null===t?null:null===t?n:null===n?t:n.union(t)},extract:function(){var t,i,n;if(h(arguments[0],at))for(t=arguments[0].iterator();t.hasNext();)i=t.next(),this.extract(i);else arguments[0]instanceof s&&(n=arguments[0],null===this._geomFact&&(this._geomFact=n.getFactory()),ef.extract(n,s.TYPENAME_POLYGON,this._polygons),ef.extract(n,s.TYPENAME_LINESTRING,this._lines),ef.extract(n,s.TYPENAME_POINT,this._points))},union:function(){var n,f,r,e,u,t,i;return null===this._geomFact?null:(n=null,0<this._points.size()&&(f=this._geomFact.buildGeometry(this._points),n=this.unionNoOpt(f)),r=null,0<this._lines.size()&&(e=this._geomFact.buildGeometry(this._lines),r=this.unionNoOpt(e)),u=null,0<this._polygons.size()&&(u=pu.union(this._polygons)),t=this.unionWithNull(r,u),i=null,i=null===n?t:null===t?n:wa.union(n,t),null===i?this._geomFact.createGeometryCollection():i)},interfaces_:function(){return[]},getClass:function(){return os}});os.union=function(){if(1===arguments.length){if(h(arguments[0],at)||arguments[0]instanceof s)return new os(arguments[0]).union()}else if(2===arguments.length)return new os(arguments[0],arguments[1]).union()};ng=Object.freeze({UnaryUnionOp:os});t(ba.prototype,{visitInteriorRing:function(n,t){var f=n.getCoordinates(),e=f[0],s=ba.findDifferentPoint(f,e),h=t.findEdgeInSameDirection(e,s),r=t.findEdgeEnd(h),u=null;r.getLabel().getLocation(0,o.RIGHT)===i.INTERIOR?u=r:r.getSym().getLabel().getLocation(0,o.RIGHT)===i.INTERIOR&&(u=r.getSym());c.isTrue(null!==u,"unable to find dirEdge with Interior on RHS");this.visitLinkedDirectedEdges(u)},visitShellInteriors:function(n,t){var i,u,r;if(n instanceof st&&(i=n,this.visitInteriorRing(i.getExteriorRing(),t)),n instanceof vi)for(u=n,r=0;r<u.getNumGeometries();r++)i=u.getGeometryN(r),this.visitInteriorRing(i.getExteriorRing(),t)},getCoordinate:function(){return this._disconnectedRingcoord},setInteriorEdgesInResult:function(n){for(var r,t=n.getEdgeEnds().iterator();t.hasNext();)r=t.next(),r.getLabel().getLocation(0,o.RIGHT)===i.INTERIOR&&r.setInResult(!0)},visitLinkedDirectedEdges:function(n){for(var i=n,t=n;c.isTrue(null!==t,"found null Directed Edge"),t.setVisited(!0),(t=t.getNext())!==i;);},buildEdgeRings:function(n){for(var t,f,e,i=new u,r=n.iterator();r.hasNext();)t=r.next(),t.isInResult()&&null===t.getEdgeRing()&&(f=new gl(t,this._geometryFactory),f.linkDirectedEdgesForMinimalEdgeRings(),e=f.buildMinimalRings(),i.addAll(e));return i},hasUnvisitedShellEdge:function(n){for(var e,r,u,f,t=0;t<n.size();t++)if(e=n.get(t),!e.isHole()&&(r=e.getEdges(),u=r.get(0),u.getLabel().getLocation(0,o.RIGHT)===i.INTERIOR))for(f=0;f<r.size();f++)if(!(u=r.get(f)).isVisited())return this._disconnectedRingcoord=u.getCoordinate(),!0;return!1},isInteriorsConnected:function(){var t=new u,n,i;return this._geomGraph.computeSplitEdges(t),n=new pf(new gh),n.addEdges(t),this.setInteriorEdgesInResult(n),n.linkResultDirectedEdges(),i=this.buildEdgeRings(n.getEdgeEnds()),this.visitShellInteriors(this._geomGraph.getGeometry(),n),!this.hasUnvisitedShellEdge(i)},interfaces_:function(){return[]},getClass:function(){return ba}});ba.findDifferentPoint=function(n,t){for(var i=0;i<n.length;i++)if(!n[i].equals(t))return n[i];return null};t(rk.prototype,{insertEdgeEnds:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this._nodes.add(i)},getNodeIterator:function(){return this._nodes.iterator()},copyNodesAndLabels:function(n,t){for(var r,i=n.getNodeIterator();i.hasNext();)r=i.next(),this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))},build:function(n){this.computeIntersectionNodes(n,0);this.copyNodesAndLabels(n,0);var t=(new hp).computeEdgeEnds(n.getEdgeIterator());this.insertEdgeEnds(t)},computeIntersectionNodes:function(n,t){for(var o,r,u=n.getEdgeIterator();u.hasNext();)for(var f=u.next(),s=f.getLabel().getLocation(t),e=f.getEdgeIntersectionList().iterator();e.hasNext();)o=e.next(),r=this._nodes.addNode(o.coord),s===i.BOUNDARY?r.setLabelBoundary(t):r.getLabel().isNull(t)&&r.setLabel(t,i.INTERIOR)},interfaces_:function(){return[]},getClass:function(){return rk}});t(wp.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t,n=this._nodeGraph.getNodeIterator();n.hasNext();)if(t=n.next(),!t.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=t.getCoordinate().copy(),!1;return!0},getInvalidPoint:function(){return this._invalidPoint},hasDuplicateRings:function(){for(var t,i,n=this._nodeGraph.getNodeIterator();n.hasNext();)for(t=n.next().getEdges().iterator();t.hasNext();)if(i=t.next(),1<i.getEdgeEnds().size())return this._invalidPoint=i.getEdge().getCoordinate(0),!0;return!1},isNodeConsistentArea:function(){var n=this._geomGraph.computeSelfNodes(this._li,!0,!0);return n.hasProperIntersection()?(this._invalidPoint=n.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return wp}});t(uk.prototype,{buildIndex:function(){var n,t,i;for(this._index=new bt,n=0;n<this._rings.size();n++)t=this._rings.get(n),i=t.getEnvelopeInternal(),this._index.insert(i,t)},getNestedPoint:function(){return this._nestedPt},isNonNested:function(){var t,n,e,r;for(this.buildIndex(),t=0;t<this._rings.size();t++)for(var i=this._rings.get(t),o=i.getCoordinates(),f=this._index.query(i.getEnvelopeInternal()),u=0;u<f.size();u++)if(n=f.get(u),e=n.getCoordinates(),i!==n&&i.getEnvelopeInternal().intersects(n.getEnvelopeInternal())&&(r=ou.findPtNotNode(o,n,this._graph),null!==r&&ur.isInRing(r,e)))return this._nestedPt=r,!1;return!0},add:function(n){this._rings.add(n);this._totalEnv.expandToInclude(n.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return uk}});t(it.prototype,{getErrorType:function(){return this._errorType},getMessage:function(){return it.errMsg[this._errorType]},getCoordinate:function(){return this._pt},toString:function(){var n="";return null!==this._pt&&(n=" at or near point "+this._pt),this.getMessage()+n},interfaces_:function(){return[]},getClass:function(){return it}});it.ERROR=0;it.REPEATED_POINT=1;it.HOLE_OUTSIDE_SHELL=2;it.NESTED_HOLES=3;it.DISCONNECTED_INTERIOR=4;it.SELF_INTERSECTION=5;it.RING_SELF_INTERSECTION=6;it.NESTED_SHELLS=7;it.DUPLICATE_RINGS=8;it.TOO_FEW_POINTS=9;it.INVALID_COORDINATE=10;it.RING_NOT_CLOSED=11;it.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];t(ou.prototype,{checkInvalidCoordinates:function(){var t,n,i;if(arguments[0]instanceof Array){for(t=arguments[0],n=0;n<t.length;n++)if(!ou.isValid(t[n]))return this._validErr=new it(it.INVALID_COORDINATE,t[n]),null}else if(arguments[0]instanceof st){if(i=arguments[0],this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(n=0;n<i.getNumInteriorRing();n++)if(this.checkInvalidCoordinates(i.getInteriorRingN(n).getCoordinates()),null!==this._validErr)return null}},checkHolesNotNested:function(n,t){for(var u,i=new uk(t),r=0;r<n.getNumInteriorRing();r++)u=n.getInteriorRingN(r),i.add(u);i.isNonNested()||(this._validErr=new it(it.NESTED_HOLES,i.getNestedPoint()))},checkConsistentArea:function(n){var t=new wp(n);if(!t.isNodeConsistentArea())return this._validErr=new it(it.SELF_INTERSECTION,t.getInvalidPoint()),null;t.hasDuplicateRings()&&(this._validErr=new it(it.DUPLICATE_RINGS,t.getInvalidPoint()))},isValid:function(){return this.checkValid(this._parentGeometry),null===this._validErr},checkShellInsideHole:function(n,t,i){var f=n.getCoordinates(),e=t.getCoordinates(),u=ou.findPtNotNode(f,t,i),r;return null!==u&&!ur.isInRing(u,e)?u:(r=ou.findPtNotNode(e,n,i),null!==r?ur.isInRing(r,f)?r:null:(c.shouldNeverReachHere("points in shell and hole appear to be equal"),null))},checkNoSelfIntersectingRings:function(n){for(var i,t=n.getEdgeIterator();t.hasNext();)if(i=t.next(),this.checkNoSelfIntersectingRing(i.getEdgeIntersectionList()),null!==this._validErr)return null},checkConnectedInteriors:function(n){var t=new ba(n);t.isInteriorsConnected()||(this._validErr=new it(it.DISCONNECTED_INTERIOR,t.getCoordinate()))},checkNoSelfIntersectingRing:function(n){for(var t,i=new hr,r=!0,u=n.iterator();u.hasNext();)if(t=u.next(),r)r=!1;else{if(i.contains(t.coord))return this._validErr=new it(it.RING_SELF_INTERSECTION,t.coord),null;i.add(t.coord)}},checkHolesInShell:function(n,t){for(var e,r,f=n.getExteriorRing(),o=new vs(f),u=0;u<n.getNumInteriorRing();u++){if(e=n.getInteriorRingN(u),r=ou.findPtNotNode(e.getCoordinates(),f,t),null===r)return null;if(i.EXTERIOR===o.locate(r))return this._validErr=new it(it.HOLE_OUTSIDE_SHELL,r),null}},checkTooFewPoints:function(n){if(n.hasTooFewPoints())return this._validErr=new it(it.TOO_FEW_POINTS,n.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this._parentGeometry),this._validErr},checkValid:function(){var c,l,e,n,a,o,f,r,i,u,h,v,t;if(arguments[0]instanceof dt)c=arguments[0],this.checkInvalidCoordinates(c.getCoordinates());else if(arguments[0]instanceof wr)l=arguments[0],this.checkInvalidCoordinates(l.getCoordinates());else if(arguments[0]instanceof ii){if((e=arguments[0],this.checkInvalidCoordinates(e.getCoordinates()),null!==this._validErr)||(this.checkClosedRing(e),null!==this._validErr)||(n=new ar(0,e),this.checkTooFewPoints(n),null!==this._validErr))return null;a=new fi;n.computeSelfNodes(a,!0,!0);this.checkNoSelfIntersectingRings(n)}else if(arguments[0]instanceof k){if(o=arguments[0],this.checkInvalidCoordinates(o.getCoordinates()),null!==this._validErr)return null;n=new ar(0,o);this.checkTooFewPoints(n)}else if(arguments[0]instanceof st){if((f=arguments[0],this.checkInvalidCoordinates(f),null!==this._validErr)||(this.checkClosedRings(f),null!==this._validErr)||(n=new ar(0,f),this.checkTooFewPoints(n),null!==this._validErr)||(this.checkConsistentArea(n),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(n),null!==this._validErr)||(this.checkHolesInShell(f,n),null!==this._validErr)||(this.checkHolesNotNested(f,n),null!==this._validErr))return null;this.checkConnectedInteriors(n)}else if(arguments[0]instanceof vi){for(r=arguments[0],i=0;i<r.getNumGeometries();i++)if((u=r.getGeometryN(i),this.checkInvalidCoordinates(u),null!==this._validErr)||(this.checkClosedRings(u),null!==this._validErr))return null;if((n=new ar(0,r),this.checkTooFewPoints(n),null!==this._validErr)||(this.checkConsistentArea(n),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(n),null!==this._validErr))return null;for(i=0;i<r.getNumGeometries();i++)if(u=r.getGeometryN(i),this.checkHolesInShell(u,n),null!==this._validErr)return null;for(i=0;i<r.getNumGeometries();i++)if(u=r.getGeometryN(i),this.checkHolesNotNested(u,n),null!==this._validErr)return null;if(this.checkShellsNotNested(r,n),null!==this._validErr)return null;this.checkConnectedInteriors(n)}else if(arguments[0]instanceof g){for(h=arguments[0],i=0;i<h.getNumGeometries();i++)if(v=h.getGeometryN(i),this.checkValid(v),null!==this._validErr)return null}else if(arguments[0]instanceof s){if(t=arguments[0],this._validErr=null,t.isEmpty())return null;if(t instanceof dt)this.checkValid(t);else if(t instanceof wr)this.checkValid(t);else if(t instanceof ii)this.checkValid(t);else if(t instanceof k)this.checkValid(t);else if(t instanceof st)this.checkValid(t);else if(t instanceof vi)this.checkValid(t);else{if(!(t instanceof g))throw new UnsupportedOperationException(t.getClass().getName());this.checkValid(t)}}},setSelfTouchingRingFormingHoleValid:function(n){this._isSelfTouchingRingFormingHoleValid=n},checkShellNotNested:function(n,t,i){var s=n.getCoordinates(),e=t.getExteriorRing(),h=e.getCoordinates(),u=ou.findPtNotNode(s,e,i),f,r,o;if(null===u||!ur.isInRing(u,h))return null;if(t.getNumInteriorRing()<=0)return this._validErr=new it(it.NESTED_SHELLS,u),null;for(f=null,r=0;r<t.getNumInteriorRing();r++)if(o=t.getInteriorRingN(r),null===(f=this.checkShellInsideHole(n,o,i)))return null;this._validErr=new it(it.NESTED_SHELLS,f)},checkClosedRings:function(n){if(this.checkClosedRing(n.getExteriorRing()),null!==this._validErr)return null;for(var t=0;t<n.getNumInteriorRing();t++)if(this.checkClosedRing(n.getInteriorRingN(t)),null!==this._validErr)return null},checkClosedRing:function(n){if(!n.isClosed()){var t=null;1<=n.getNumPoints()&&(t=n.getCoordinateN(0));this._validErr=new it(it.RING_NOT_CLOSED,t)}},checkShellsNotNested:function(n,t){for(var u,r,f,i=0;i<n.getNumGeometries();i++)for(u=n.getGeometryN(i).getExteriorRing(),r=0;r<n.getNumGeometries();r++)if(i!==r&&(f=n.getGeometryN(r),this.checkShellNotNested(u,f,t),null!==this._validErr))return null},interfaces_:function(){return[]},getClass:function(){return ou}});ou.findPtNotNode=function(n,t,i){for(var u,f=i.findEdge(t).getEdgeIntersectionList(),r=0;r<n.length;r++)if(u=n[r],!f.isIntersection(u))return u;return null};ou.isValid=function(){if(arguments[0]instanceof s)return new ou(arguments[0]).isValid();if(arguments[0]instanceof r){var n=arguments[0];return!l.isNaN(n.x)&&!l.isInfinite(n.x)&&!l.isNaN(n.y)&&!l.isInfinite(n.y)}};tg=Object.freeze({IsValidOp:ou,ConsistentAreaTester:wp});ig=Object.freeze({BoundaryOp:we,IsSimpleOp:is,buffer:pd,distance:wd,linemerge:bd,overlay:kd,polygonize:dd,relate:gd,union:ng,valid:tg});v(bp,br.CoordinateOperation);t(bp.prototype,{edit:function(){var n,f,i,t,e,o,u,h;if(2===arguments.length&&arguments[1]instanceof s&&arguments[0]instanceof Array){if(n=arguments[0],f=arguments[1],0===n.length)return null;for(i=new Array(n.length).fill(null),t=0;t<n.length;t++)e=new r(n[t]),this._targetPM.makePrecise(e),i[t]=e;return o=new ni(i,!1).toCoordinateArray(),u=0,f instanceof k&&(u=2),f instanceof ii&&(u=4),h=i,this._removeCollapsed&&(h=null),o.length<u?h:o}return br.CoordinateOperation.prototype.edit.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return bp}});t(uh.prototype,{fixPolygonalTopology:function(n){var r=n,i,t;return this._changePrecisionModel||(r=this.changePM(n,this._targetPM)),i=yi.bufferOp(r,0),t=i,this._changePrecisionModel||(t=i.copy(),this.changePM(t,n.getPrecisionModel())),t},reducePointwise:function(n){var i=null,t;return i=this._changePrecisionModel?new br(this.createFactory(n.getFactory(),this._targetPM)):new br,t=this._removeCollapsed,2<=n.getDimension()&&(t=!0),i.edit(n,new bp(this._targetPM,t))},changePM:function(n,t){return this.createEditor(n.getFactory(),t).edit(n,new br.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(n){this._removeCollapsed=n},createFactory:function(n,t){return new nt(t,n.getSRID(),n.getCoordinateSequenceFactory())},setChangePrecisionModel:function(n){this._changePrecisionModel=n},reduce:function(n){var t=this.reducePointwise(n);return this._isPointwise?t:h(t,fe)?ou.isValid(t)?t:this.fixPolygonalTopology(t):t},setPointwise:function(n){this._isPointwise=n},createEditor:function(n,t){return n.getPrecisionModel()===t?new br:new br(this.createFactory(n,t))},interfaces_:function(){return[]},getClass:function(){return uh}});uh.reduce=function(n,t){return new uh(t).reduce(n)};uh.reducePointwise=function(n,t){var i=new uh(t);return i.setPointwise(!0),i.reduce(n)};rg=Object.freeze({GeometryPrecisionReducer:uh});t(ka.prototype,{simplifySection:function(n,t){var f;if(n+1===t)return null;this._seg.p0=this._pts[n];this._seg.p1=this._pts[t];for(var r=-1,u=n,i=n+1;i<t;i++)f=this._seg.distance(this._pts[i]),r<f&&(r=f,u=i);if(r<=this._distanceTolerance)for(i=n+1;i<t;i++)this._usePt[i]=!1;else this.simplifySection(n,u),this.simplifySection(u,t)},setDistanceTolerance:function(n){this._distanceTolerance=n},simplify:function(){var n,t;for(this._usePt=new Array(this._pts.length).fill(null),n=0;n<this._pts.length;n++)this._usePt[n]=!0;for(this.simplifySection(0,this._pts.length-1),t=new ni,n=0;n<this._pts.length;n++)this._usePt[n]&&t.add(new r(this._pts[n]));return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return ka}});ka.simplify=function(n,t){var i=new ka(n);return i.setDistanceTolerance(t),i.simplify()};t(fc.prototype,{setEnsureValid:function(n){this._isEnsureValidTopology=n},getResultGeometry:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new da(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)},setDistanceTolerance:function(n){if(n<0)throw new tt("Tolerance must be non-negative");this._distanceTolerance=n},interfaces_:function(){return[]},getClass:function(){return fc}});fc.simplify=function(n,t){var i=new fc(n);return i.setDistanceTolerance(t),i.getResultGeometry()};v(da,lr);t(da.prototype,{transformPolygon:function(n,t){if(n.isEmpty())return null;var i=lr.prototype.transformPolygon.call(this,n,t);return t instanceof vi?i:this.createValidArea(i)},createValidArea:function(n){return this._isEnsureValidTopology?n.buffer(0):n},transformCoordinates:function(n){var t=n.toCoordinateArray(),i=null;return i=0===t.length?new Array(0).fill(null):ka.simplify(t,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(n,t){var i=lr.prototype.transformMultiPolygon.call(this,n,t);return this.createValidArea(i)},transformLinearRing:function(n,t){var r=t instanceof st,i=lr.prototype.transformLinearRing.call(this,n,t);return!r||i instanceof ii?i:null},interfaces_:function(){return[]},getClass:function(){return da}});fc.DPTransformer=da;v(ga,b);t(ga.prototype,{getIndex:function(){return this._index},getParent:function(){return this._parent},interfaces_:function(){return[]},getClass:function(){return ga}});t(ro.prototype,{addToResult:function(n){this._resultSegs.add(n)},asLineString:function(){return this._parentLine.getFactory().createLineString(ro.extractCoordinates(this._resultSegs))},getResultSize:function(){var n=this._resultSegs.size();return 0===n?0:n+1},getParent:function(){return this._parentLine},getSegment:function(n){return this._segs[n]},getParentCoordinates:function(){return this._parentLine.getCoordinates()},getMinimumSize:function(){return this._minimumSize},asLinearRing:function(){return this._parentLine.getFactory().createLinearRing(ro.extractCoordinates(this._resultSegs))},getSegments:function(){return this._segs},init:function(){var t=this._parentLine.getCoordinates(),n,i;for(this._segs=new Array(t.length-1).fill(null),n=0;n<t.length-1;n++)i=new ga(t[n],t[n+1],this._parentLine,n),this._segs[n]=i},getResultCoordinates:function(){return ro.extractCoordinates(this._resultSegs)},interfaces_:function(){return[]},getClass:function(){return ro}});ro.extractCoordinates=function(n){for(var t=new Array(n.size()+1).fill(null),r=null,i=0;i<n.size();i++)r=n.get(i),t[i]=r.p0;return t[t.length-1]=r.p1,t};t(ec.prototype,{remove:function(n){this._index.remove(new y(n.p0,n.p1),n)},add:function(){var i,n,r,t;if(arguments[0]instanceof ro)for(i=arguments[0].getSegments(),n=0;n<i.length;n++)r=i[n],this.add(r);else arguments[0]instanceof b&&(t=arguments[0],this._index.insert(new y(t.p0,t.p1),t))},query:function(n){var i=new y(n.p0,n.p1),t=new fk(n);return this._index.query(i,t),t.getItems()},interfaces_:function(){return[]},getClass:function(){return ec}});t(fk.prototype,{visitItem:function(n){var t=n;y.intersects(t.p0,t.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(n)},getItems:function(){return this._items},interfaces_:function(){return[as]},getClass:function(){return fk}});t(nv.prototype,{flatten:function(n,t){var i=new b(this._linePts[n],this._linePts[t]);return this.remove(this._line,n,t),this._outputIndex.add(i),i},hasBadIntersection:function(n,t,i){return!!this.hasBadOutputIntersection(i)||!!this.hasBadInputIntersection(n,t,i)},setDistanceTolerance:function(n){this._distanceTolerance=n},simplifySection:function(n,t,i){var u,f,r,o,s,e;if(i+=1,u=new Array(2).fill(null),n+1===t)return f=this._line.getSegment(n),this._line.addToResult(f),null;if(r=!0,this._line.getResultSize()<this._line.getMinimumSize()&&i+1<this._line.getMinimumSize()&&(r=!1),o=new Array(1).fill(null),s=this.findFurthestPoint(this._linePts,n,t,o),o[0]>this._distanceTolerance&&(r=!1),e=new b,e.p0=this._linePts[n],e.p1=this._linePts[t],u[0]=n,u[1]=t,this.hasBadIntersection(this._line,u,e)&&(r=!1),r)return f=this.flatten(n,t),this._line.addToResult(f),null;this.simplifySection(n,s,i);this.simplifySection(s,t,i)},hasBadOutputIntersection:function(n){for(var i,t=this._outputIndex.query(n).iterator();t.hasNext();)if(i=t.next(),this.hasInteriorIntersection(i,n))return!0;return!1},findFurthestPoint:function(n,t,i,r){var f=new b,h,o;f.p0=n[t];f.p1=n[i];for(var e=-1,s=t,u=t+1;u<i;u++)h=n[u],o=f.distance(h),e<o&&(e=o,s=u);return r[0]=e,s},simplify:function(n){this._line=n;this._linePts=n.getParentCoordinates();this.simplifySection(0,this._linePts.length-1,0)},remove:function(n,t,i){for(var u,r=t;r<i;r++)u=n.getSegment(r),this._inputIndex.remove(u)},hasInteriorIntersection:function(n,t){return this._li.computeIntersection(n.p0,n.p1,t.p0,t.p1),this._li.isInteriorIntersection()},hasBadInputIntersection:function(n,t,i){for(var u,r=this._inputIndex.query(i).iterator();r.hasNext();)if(u=r.next(),this.hasInteriorIntersection(u,i)){if(nv.isInLineSection(n,t,u))continue;return!0}return!1},interfaces_:function(){return[]},getClass:function(){return nv}});nv.isInLineSection=function(n,t,i){if(i.getParent()!==n.getParent())return!1;var r=i.getIndex();return r>=t[0]&&r<t[1]};t(ek.prototype,{setDistanceTolerance:function(n){this._distanceTolerance=n},simplify:function(n){for(var i,t=n.iterator();t.hasNext();)this._inputIndex.add(t.next());for(t=n.iterator();t.hasNext();)i=new nv(this._inputIndex,this._outputIndex),i.setDistanceTolerance(this._distanceTolerance),i.simplify(t.next())},interfaces_:function(){return[]},getClass:function(){return ek}});t(fh.prototype,{getResultGeometry:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new ke,this._inputGeom.apply(new kp(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new tv(this._linestringMap).transform(this._inputGeom))},setDistanceTolerance:function(n){if(n<0)throw new tt("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(n)},interfaces_:function(){return[]},getClass:function(){return fh}});fh.simplify=function(n,t){var i=new fh(n);return i.setDistanceTolerance(t),i.getResultGeometry()};v(tv,lr);t(tv.prototype,{transformCoordinates:function(n,t){if(0===n.size())return null;if(t instanceof k){var i=this._linestringMap.get(t);return this.createCoordinateSequence(i.getResultCoordinates())}return lr.prototype.transformCoordinates.call(this,n,t)},interfaces_:function(){return[]},getClass:function(){return tv}});t(kp.prototype,{filter:function(n){var t,i;if(n instanceof k){if(t=n,t.isEmpty())return null;i=new ro(t,t.isClosed()?4:2);this.tps._linestringMap.put(t,i)}},interfaces_:function(){return[bu]},getClass:function(){return kp}});fh.LineStringTransformer=tv;fh.LineStringMapBuilderFilter=kp;ug=Object.freeze({DouglasPeuckerSimplifier:fc,TopologyPreservingSimplifier:fh});t(oc.prototype,{splitAt:function(){var n,t;if(1===arguments.length){if(n=arguments[0],t=this._minimumLen/this._segLen,n.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(t),null;if(n.distance(this._seg.p1)<this._minimumLen)return this._splitPt=oc.pointAlongReverse(this._seg,t),null;this._splitPt=n}else if(2===arguments.length){var r=arguments[0],u=arguments[1],i=this.getConstrainedLength(r)/this._segLen;this._splitPt=u.equals2D(this._seg.p0)?this._seg.pointAlong(i):oc.pointAlongReverse(this._seg,i)}},setMinimumLength:function(n){this._minimumLen=n},getConstrainedLength:function(n){return n<this._minimumLen?this._minimumLen:n},getSplitPoint:function(){return this._splitPt},interfaces_:function(){return[]},getClass:function(){return oc}});oc.pointAlongReverse=function(n,t){var i=new r;return i.x=n.p1.x-t*(n.p1.x-n.p0.x),i.y=n.p1.y-t*(n.p1.y-n.p0.y),i};t(ok.prototype,{findSplitPoint:function(){},interfaces_:function(){return[]},getClass:function(){return ok}});t(iv.prototype,{findSplitPoint:function(n,t){var u=n.getLineSegment(),f=u.getLength()/2,i=new oc(u),e=iv.projectedSplitPoint(n,t),r=2*e.distance(t)*.8;return f<r&&(r=f),i.setMinimumLength(r),i.splitAt(e),i.getSplitPoint()},interfaces_:function(){return[ok]},getClass:function(){return iv}});iv.projectedSplitPoint=function(n,t){return n.getLineSegment().project(t)};t(kt.prototype,{interfaces_:function(){return[]},getClass:function(){return kt}});kt.triArea=function(n,t,i){return(t.x-n.x)*(i.y-n.y)-(t.y-n.y)*(i.x-n.x)};kt.isInCircleDDNormalized=function(n,t,i,r){var u=f.valueOf(n.x).selfSubtract(r.x),e=f.valueOf(n.y).selfSubtract(r.y),o=f.valueOf(t.x).selfSubtract(r.x),s=f.valueOf(t.y).selfSubtract(r.y),h=f.valueOf(i.x).selfSubtract(r.x),c=f.valueOf(i.y).selfSubtract(r.y),l=u.multiply(s).selfSubtract(o.multiply(e)),a=o.multiply(c).selfSubtract(h.multiply(s)),v=h.multiply(e).selfSubtract(u.multiply(c)),y=u.multiply(u).selfAdd(e.multiply(e)),p=o.multiply(o).selfAdd(s.multiply(s)),w=h.multiply(h).selfAdd(c.multiply(c));return 0<y.selfMultiply(a).selfAdd(p.selfMultiply(v)).selfAdd(w.selfMultiply(l)).doubleValue()};kt.checkRobustInCircle=function(n,t,i,r){var f=kt.isInCircleNonRobust(n,t,i,r),e=kt.isInCircleDDSlow(n,t,i,r),o=kt.isInCircleCC(n,t,i,r),u=lt.circumcentre(n,t,i);pt.out.println("p radius diff a = "+Math.abs(r.distance(u)-n.distance(u))/n.distance(u));f===e&&f===o||(pt.out.println("inCircle robustness failure (double result = "+f+", DD result = "+e+", CC result = "+o+")"),pt.out.println(bi.toLineString(new cu([n,t,i,r]))),pt.out.println("Circumcentre = "+bi.toPoint(u)+" radius = "+n.distance(u)),pt.out.println("p radius diff a = "+Math.abs(r.distance(u)/n.distance(u)-1)),pt.out.println("p radius diff b = "+Math.abs(r.distance(u)/t.distance(u)-1)),pt.out.println("p radius diff c = "+Math.abs(r.distance(u)/i.distance(u)-1)),pt.out.println())};kt.isInCircleDDFast=function(n,t,i,r){var u=f.sqr(n.x).selfAdd(f.sqr(n.y)).selfMultiply(kt.triAreaDDFast(t,i,r)),e=f.sqr(t.x).selfAdd(f.sqr(t.y)).selfMultiply(kt.triAreaDDFast(n,i,r)),o=f.sqr(i.x).selfAdd(f.sqr(i.y)).selfMultiply(kt.triAreaDDFast(n,t,r)),s=f.sqr(r.x).selfAdd(f.sqr(r.y)).selfMultiply(kt.triAreaDDFast(n,t,i));return 0<u.selfSubtract(e).selfAdd(o).selfSubtract(s).doubleValue()};kt.isInCircleCC=function(n,t,i,r){var u=lt.circumcentre(n,t,i),f=n.distance(u);return r.distance(u)-f<=0};kt.isInCircleNormalized=function(n,t,i,r){var u=n.x-r.x,f=n.y-r.y,e=t.x-r.x,o=t.y-r.y,s=i.x-r.x,h=i.y-r.y;return 0<(u*u+f*f)*(e*h-s*o)+(e*e+o*o)*(s*f-u*h)+(s*s+h*h)*(u*o-e*f)};kt.isInCircleDDSlow=function(n,t,i,r){var u=f.valueOf(r.x),e=f.valueOf(r.y),o=f.valueOf(n.x),s=f.valueOf(n.y),h=f.valueOf(t.x),c=f.valueOf(t.y),l=f.valueOf(i.x),a=f.valueOf(i.y),v=o.multiply(o).add(s.multiply(s)).multiply(kt.triAreaDDSlow(h,c,l,a,u,e)),y=h.multiply(h).add(c.multiply(c)).multiply(kt.triAreaDDSlow(o,s,l,a,u,e)),p=l.multiply(l).add(a.multiply(a)).multiply(kt.triAreaDDSlow(o,s,h,c,u,e)),w=u.multiply(u).add(e.multiply(e)).multiply(kt.triAreaDDSlow(o,s,h,c,l,a));return 0<v.subtract(y).add(p).subtract(w).doubleValue()};kt.isInCircleNonRobust=function(n,t,i,r){return 0<(n.x*n.x+n.y*n.y)*kt.triArea(t,i,r)-(t.x*t.x+t.y*t.y)*kt.triArea(n,i,r)+(i.x*i.x+i.y*i.y)*kt.triArea(n,t,r)-(r.x*r.x+r.y*r.y)*kt.triArea(n,t,i)};kt.isInCircleRobust=function(n,t,i,r){return kt.isInCircleNormalized(n,t,i,r)};kt.triAreaDDSlow=function(n,t,i,r,u,f){return i.subtract(n).multiply(f.subtract(t)).subtract(r.subtract(t).multiply(u.subtract(n)))};kt.triAreaDDFast=function(n,t,i){var r=f.valueOf(t.x).selfSubtract(n.x).selfMultiply(f.valueOf(i.y).selfSubtract(n.y)),u=f.valueOf(t.y).selfSubtract(n.y).selfMultiply(f.valueOf(i.x).selfSubtract(n.x));return r.selfSubtract(u)};t(ot.prototype,{circleCenter:function(n,t){var r=new ot(this.getX(),this.getY()),i=new yr(this.bisector(r,n),this.bisector(n,t)),u=null;try{u=new ot(i.getX(),i.getY())}catch(i){if(!(i instanceof te))throw i;pt.err.println("a: "+r+"  b: "+n+"  c: "+t);pt.err.println(i)}return u},dot:function(n){return this._p.x*n.getX()+this._p.y*n.getY()},magn:function(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)},getZ:function(){return this._p.z},bisector:function(n,t){var i=t.getX()-n.getX(),r=t.getY()-n.getY();return new yr(new yr(n.getX()+i/2,n.getY()+r/2,1),new yr(n.getX()-r+i/2,n.getY()+i+r/2,1))},equals:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this._p.x===n.getX()&&this._p.y===n.getY()):2===arguments.length?(t=arguments[0],i=arguments[1],this._p.distance(t.getCoordinate())<i):void 0},getCoordinate:function(){return this._p},isInCircle:function(n,t,i){return kt.isInCircleRobust(n._p,t._p,i._p,this._p)},interpolateZValue:function(n,t,i){var r=n.getX(),u=n.getY(),f=t.getX()-r,e=i.getX()-r,o=t.getY()-u,s=i.getY()-u,h=f*s-e*o,c=this.getX()-r,l=this.getY()-u,a=(s*c-e*l)/h,v=(-o*c+f*l)/h;return n.getZ()+a*(t.getZ()-n.getZ())+v*(i.getZ()-n.getZ())},midPoint:function(n){return new ot((this._p.x+n.getX())/2,(this._p.y+n.getY())/2,(this._p.z+n.getZ())/2)},rightOf:function(n){return this.isCCW(n.dest(),n.orig())},isCCW:function(n,t){return 0<(n._p.x-this._p.x)*(t._p.y-this._p.y)-(n._p.y-this._p.y)*(t._p.x-this._p.x)},getX:function(){return this._p.x},crossProduct:function(n){return this._p.x*n.getY()-this._p.y*n.getX()},setZ:function(n){this._p.z=n},times:function(n){return new ot(n*this._p.x,n*this._p.y)},cross:function(){return new ot(this._p.y,-this._p.x)},leftOf:function(n){return this.isCCW(n.orig(),n.dest())},toString:function(){return"POINT ("+this._p.x+" "+this._p.y+")"},sub:function(n){return new ot(this._p.x-n.getX(),this._p.y-n.getY())},getY:function(){return this._p.y},classify:function(n,t){var i=t.sub(n),r=this.sub(n),u=i.crossProduct(r);return 0<u?ot.LEFT:u<0?ot.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?ot.BEHIND:i.magn()<r.magn()?ot.BEYOND:n.equals(this)?ot.ORIGIN:t.equals(this)?ot.DESTINATION:ot.BETWEEN},sum:function(n){return new ot(this._p.x+n.getX(),this._p.y+n.getY())},distance:function(n,t){return Math.sqrt(Math.pow(t.getX()-n.getX(),2)+Math.pow(t.getY()-n.getY(),2))},circumRadiusRatio:function(n,t){var u=this.circleCenter(n,t),f=this.distance(u,n),i=this.distance(this,n),r=this.distance(n,t);return r<i&&(i=r),(r=this.distance(t,this))<i&&(i=r),f/i},interfaces_:function(){return[]},getClass:function(){return ot}});ot.interpolateZ=function(){if(3===arguments.length){var p=arguments[0],t=arguments[1],e=arguments[2],w=t.distance(e),b=p.distance(t),k=e.z-t.z;return t.z+k*(b/w)}if(4===arguments.length){var o=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],u=n.x,f=n.y,s=i.x-u,h=r.x-u,c=i.y-f,l=r.y-f,a=s*l-h*c,v=o.x-u,y=o.y-f,d=(l*v-h*y)/a,g=(-c*v+s*y)/a;return n.z+d*(i.z-n.z)+g*(r.z-n.z)}};ot.LEFT=0;ot.RIGHT=1;ot.BEYOND=2;ot.BEHIND=3;ot.BETWEEN=4;ot.ORIGIN=5;ot.DESTINATION=6;v(ss,ot);t(ss.prototype,{getConstraint:function(){return this._constraint},setOnConstraint:function(n){this._isOnConstraint=n},merge:function(n){n._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=n._constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(n){this._isOnConstraint=!0;this._constraint=n},interfaces_:function(){return[]},getClass:function(){return ss}});t(gt.prototype,{equalsNonOriented:function(n){return!!this.equalsOriented(n)||!!this.equalsOriented(n.sym())},toLineSegment:function(){return new b(this._vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this._next},equalsOriented:function(n){return!(!this.orig().getCoordinate().equals2D(n.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(n.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this._next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot._next._rot},sym:function(){return this._rot._rot},setOrig:function(n){this._vertex=n},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(n){this.sym().setOrig(n)},setData:function(n){this._data=n},getData:function(){return this._data},"delete":function(){this._rot=null},orig:function(){return this._vertex},rNext:function(){return this._rot._next.invRot()},toString:function(){var n=this._vertex.getCoordinate(),t=this.dest().getCoordinate();return bi.toLineString(n,t)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(n){this._next=n},interfaces_:function(){return[]},getClass:function(){return gt}});gt.makeEdge=function(n,t){var i=new gt,u=new gt,f=new gt,e=new gt,r;return((((i._rot=u)._rot=f)._rot=e)._rot=i).setNext(i),u.setNext(e),f.setNext(f),e.setNext(u),r=i,r.setOrig(n),r.setDest(t),r};gt.swap=function(n){var t=n.oPrev(),i=n.sym().oPrev();gt.splice(n,t);gt.splice(n.sym(),i);gt.splice(n,t.lNext());gt.splice(n.sym(),i.lNext());n.setOrig(t.dest());n.setDest(i.dest())};gt.splice=function(n,t){var i=n.oNext().rot(),r=t.oNext().rot(),u=t.oNext(),f=n.oNext(),e=r.oNext(),o=i.oNext();n.setNext(u);t.setNext(f);i.setNext(e);r.setNext(o)};gt.connect=function(n,t){var i=gt.makeEdge(n.dest(),t.orig());return gt.splice(i,n.lNext()),gt.splice(i.sym(),t),i};t(rv.prototype,{insertSite:function(n){var t=this._subdiv.locate(n),i,r,u;if(this._subdiv.isVertexOfEdge(t,n))return t;for(this._subdiv.isOnEdge(t,n.getCoordinate())&&(t=t.oPrev(),this._subdiv.delete(t.oNext())),i=this._subdiv.makeEdge(t.orig(),n),gt.splice(i,t),r=i;(t=(i=this._subdiv.connect(t,i.sym())).oPrev()).lNext()!==r;);for(;;)if(u=t.oPrev(),u.dest().rightOf(t)&&n.isInCircle(t.orig(),u.dest(),t.dest()))gt.swap(t),t=t.oPrev();else{if(t.oNext()===r)return i;t=t.oNext().lPrev()}},insertSites:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this.insertSite(i)},interfaces_:function(){return[]},getClass:function(){return rv}});t(sk.prototype,{locate:function(){},interfaces_:function(){return[]},getClass:function(){return sk}});t(dp.prototype,{init:function(){this._lastEdge=this.findEdge()},locate:function(n){this._lastEdge.isLive()||this.init();var t=this._subdiv.locateFromEdge(n,this._lastEdge);return this._lastEdge=t},findEdge:function(){return this._subdiv.getEdges().iterator().next()},interfaces_:function(){return[sk]},getClass:function(){return dp}});v(sc,pi);t(sc.prototype,{getSegment:function(){return this._seg},interfaces_:function(){return[]},getClass:function(){return sc}});sc.msgWithSpatial=function(n,t){return null!==t?n+" [ "+t+" ]":n};t(hc.prototype,{visit:function(){},interfaces_:function(){return[]},getClass:function(){return hc}});t(su.prototype,{getTriangleVertices:function(n){var t=new tw;return this.visitTriangles(t,n),t.getTriangleVertices()},isFrameVertex:function(n){return!!n.equals(this._frameVertex[0])||!!n.equals(this._frameVertex[1])||!!n.equals(this._frameVertex[2])},isVertexOfEdge:function(n,t){return!(!t.equals(n.orig(),this._tolerance)&&!t.equals(n.dest(),this._tolerance))},connect:function(n,t){var i=gt.connect(n,t);return this._quadEdges.add(i),i},getVoronoiCellPolygon:function(n,t){var r=new u,f=n,e,i;do e=n.rot().orig().getCoordinate(),r.add(e),n=n.oPrev();while(n!==f);i=new ni;i.addAll(r,!1);i.closeRing();i.size()<4&&(pt.out.println(i),i.add(i.get(i.size()-1),!0));var s=i.toCoordinateArray(),o=t.createPolygon(t.createLinearRing(s)),h=f.orig();return o.setUserData(h.getCoordinate()),o},setLocator:function(n){this._locator=n},initSubdiv:function(){var n=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),i=this.makeEdge(this._frameVertex[1],this._frameVertex[2]),t;return gt.splice(n.sym(),i),t=this.makeEdge(this._frameVertex[2],this._frameVertex[0]),gt.splice(i.sym(),t),gt.splice(t.sym(),n),n},isFrameBorderEdge:function(n){var u=new Array(3).fill(null),t,i,r;return(su.getTriangleEdges(n,u),t=new Array(3).fill(null),su.getTriangleEdges(n.sym(),t),i=n.lNext().dest(),this.isFrameVertex(i))?!0:(r=n.sym().lNext().dest(),!!this.isFrameVertex(r))},makeEdge:function(n,t){var i=gt.makeEdge(n,t);return this._quadEdges.add(i),i},visitTriangles:function(n,t){var i,r,u,f;for(this._visitedKey++,i=new cr,i.push(this._startingEdge),r=new wi;!i.empty();)u=i.pop(),r.contains(u)||(f=this.fetchTriangleToVisit(u,i,t,r),null!==f&&n.visit(f))},isFrameEdge:function(n){return!(!this.isFrameVertex(n.orig())&&!this.isFrameVertex(n.dest()))},isOnEdge:function(n,t){return this._seg.setCoordinates(n.orig().getCoordinate(),n.dest().getCoordinate()),this._seg.distance(t)<this._edgeCoincidenceTolerance},getEnvelope:function(){return new y(this._frameEnv)},createFrame:function(n){var i=n.getWidth(),r=n.getHeight(),t=0;t=r<i?10*i:10*r;this._frameVertex[0]=new ot((n.getMaxX()+n.getMinX())/2,n.getMaxY()+t);this._frameVertex[1]=new ot(n.getMinX()-t,n.getMinY()-t);this._frameVertex[2]=new ot(n.getMaxX()+t,n.getMinY()-t);this._frameEnv=new y(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate());this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())},getTriangleCoordinates:function(n){var t=new iw;return this.visitTriangles(t,n),t.getTriangles()},getVertices:function(n){for(var r,u,f,t=new wi,i=this._quadEdges.iterator();i.hasNext();)r=i.next(),u=r.orig(),!n&&this.isFrameVertex(u)||t.add(u),f=r.dest(),!n&&this.isFrameVertex(f)||t.add(f);return t},fetchTriangleToVisit:function(n,t,i,r){var u=n,e=0,o=!1,f;do this._triEdges[e]=u,this.isFrameEdge(u)&&(o=!0),f=u.sym(),r.contains(f)||t.push(f),r.add(u),e++,u=u.lNext();while(u!==n);return o&&!i?null:this._triEdges},getEdges:function(){var n;if(0===arguments.length)return this._quadEdges;if(1===arguments.length){for(var t=arguments[0],i=this.getPrimaryEdges(!1),r=new Array(i.size()).fill(null),f=0,u=i.iterator();u.hasNext();)n=u.next(),r[f++]=t.createLineString([n.orig().getCoordinate(),n.dest().getCoordinate()]);return t.createMultiLineString(r)}},getVertexUniqueEdges:function(n){for(var i,r,o,f,e=new u,t=new wi,s=this._quadEdges.iterator();s.hasNext();)i=s.next(),r=i.orig(),t.contains(r)||(t.add(r),!n&&this.isFrameVertex(r)||e.add(i)),o=i.sym(),f=o.orig(),t.contains(f)||(t.add(f),!n&&this.isFrameVertex(f)||e.add(o));return e},getTriangleEdges:function(n){var t=new nw;return this.visitTriangles(t,n),t.getTriangleEdges()},getPrimaryEdges:function(n){var f,i,r,t,e;for(this._visitedKey++,f=new u,i=new cr,i.push(this._startingEdge),r=new wi;!i.empty();)t=i.pop(),r.contains(t)||(e=t.getPrimary(),!n&&this.isFrameEdge(e)||f.add(e),i.push(t.oNext()),i.push(t.sym().oNext()),r.add(t),r.add(t.sym()));return f},"delete":function(n){gt.splice(n,n.oPrev());gt.splice(n.sym(),n.sym().oPrev());var t=n.sym(),i=n.rot(),r=n.rot().sym();this._quadEdges.remove(n);this._quadEdges.remove(t);this._quadEdges.remove(i);this._quadEdges.remove(r);n.delete();t.delete();i.delete();r.delete()},locateFromEdge:function(n,t){for(var r=0,u=this._quadEdges.size(),i=t;;){if(u<++r)throw new sc(i.toLineSegment());if(n.equals(i.orig())||n.equals(i.dest()))break;if(n.rightOf(i))i=i.sym();else if(n.rightOf(i.oNext())){if(n.rightOf(i.dPrev()))break;i=i.dPrev()}else i=i.oNext()}return i},getTolerance:function(){return this._tolerance},getVoronoiCellPolygons:function(n){var t,i,r;for(this.visitTriangles(new gp,!0),t=new u,i=this.getVertexUniqueEdges(!1).iterator();i.hasNext();)r=i.next(),t.add(this.getVoronoiCellPolygon(r,n));return t},getVoronoiDiagram:function(n){var t=this.getVoronoiCellPolygons(n);return n.createGeometryCollection(nt.toGeometryArray(t))},getTriangles:function(n){for(var u,t=this.getTriangleCoordinates(!1),i=new Array(t.size()).fill(null),f=0,r=t.iterator();r.hasNext();)u=r.next(),i[f++]=n.createPolygon(n.createLinearRing(u));return n.createGeometryCollection(i)},insertSite:function(n){var t=this.locate(n),i,r;if(n.equals(t.orig(),this._tolerance)||n.equals(t.dest(),this._tolerance))return t;for(i=this.makeEdge(t.orig(),n),gt.splice(i,t),r=i;(t=(i=this.connect(t,i.sym())).oPrev()).lNext()!==r;);return r},locate:function(){var u,f,i,n;if(1===arguments.length){if(arguments[0]instanceof ot)return u=arguments[0],this._locator.locate(u);if(arguments[0]instanceof r)return f=arguments[0],this._locator.locate(new ot(f))}else if(2===arguments.length){var e=arguments[0],o=arguments[1],t=this._locator.locate(new ot(e));if(null===t)return null;i=t;t.dest().getCoordinate().equals2D(e)&&(i=t.sym());n=i;do{if(n.dest().getCoordinate().equals2D(o))return n;n=n.oNext()}while(n!==i);return null}},interfaces_:function(){return[]},getClass:function(){return su}});su.getTriangleEdges=function(n,t){if(t[0]=n,t[1]=t[0].lNext(),t[2]=t[1].lNext(),t[2].lNext()!==t[0])throw new tt("Edges do not form a triangle");};t(gp.prototype,{visit:function(n){for(var i=n[0].orig().getCoordinate(),r=n[1].orig().getCoordinate(),u=n[2].orig().getCoordinate(),f=new ot(lt.circumcentre(i,r,u)),t=0;t<3;t++)n[t].rot().setOrig(f)},interfaces_:function(){return[hc]},getClass:function(){return gp}});t(nw.prototype,{getTriangleEdges:function(){return this._triList},visit:function(n){this._triList.add(n)},interfaces_:function(){return[hc]},getClass:function(){return nw}});t(tw.prototype,{visit:function(n){this._triList.add([n[0].orig(),n[1].orig(),n[2].orig()])},getTriangleVertices:function(){return this._triList},interfaces_:function(){return[hc]},getClass:function(){return tw}});t(iw.prototype,{checkTriangleSize:function(n){2<=n.length?bi.toLineString(n[0],n[1]):1<=n.length&&bi.toPoint(n[0])},visit:function(n){var t,r,i;for(this._coordList.clear(),t=0;t<3;t++)r=n[t].orig(),this._coordList.add(r.getCoordinate());if(0<this._coordList.size()){if(this._coordList.closeRing(),i=this._coordList.toCoordinateArray(),4!==i.length)return null;this._triCoords.add(i)}},getTriangles:function(){return this._triCoords},interfaces_:function(){return[hc]},getClass:function(){return iw}});su.TriangleCircumcentreVisitor=gp;su.TriangleEdgesListVisitor=nw;su.TriangleVertexListVisitor=tw;su.TriangleCoordinatesVisitor=iw;su.EDGE_COINCIDENCE_TOL_FACTOR=1e3;t(eh.prototype,{getLineSegment:function(){return this._ls},getEndZ:function(){return this._ls.getCoordinate(1).z},getStartZ:function(){return this._ls.getCoordinate(0).z},intersection:function(n){return this._ls.intersection(n.getLineSegment())},getStart:function(){return this._ls.getCoordinate(0)},getEnd:function(){return this._ls.getCoordinate(1)},getEndY:function(){return this._ls.getCoordinate(1).y},getStartX:function(){return this._ls.getCoordinate(0).x},equalsTopo:function(n){return this._ls.equalsTopo(n.getLineSegment())},getStartY:function(){return this._ls.getCoordinate(0).y},setData:function(n){this._data=n},getData:function(){return this._data},getEndX:function(){return this._ls.getCoordinate(1).x},toString:function(){return this._ls.toString()},interfaces_:function(){return[]},getClass:function(){return eh}});t(hs.prototype,{getInitialVertices:function(){return this._initialVertices},getKDT:function(){return this._kdt},enforceConstraints:function(){this.addConstraintVertices();for(var n=0;0<this.enforceGabriel(this._segments)&&++n<hs.MAX_SPLIT_ITER;);},insertSites:function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this.insertSite(i)},getVertexFactory:function(){return this._vertexFactory},getPointArray:function(){for(var n,i,t=new Array(this._initialVertices.size()+this._segVertices.size()).fill(null),r=0,u=this._initialVertices.iterator();u.hasNext();)n=u.next(),t[r++]=n.getCoordinate();for(i=this._segVertices.iterator();i.hasNext();)n=i.next(),t[r++]=n.getCoordinate();return t},setConstraints:function(n,t){this._segments=n;this._segVertices=t},computeConvexHull:function(){var n=new nt,t=new se(this.getPointArray(),n);this._convexHull=t.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull();this.insertSites(this._segVertices)},findNonGabrielPoint:function(n){var i=n.getStart(),f=n.getEnd(),e=new r((i.x+f.x)/2,(i.y+f.y)/2),s=i.distance(e),h=new y(e),t,u;h.expandBy(s);for(var v=this._kdt.query(h),o=null,c=l.MAX_VALUE,a=v.iterator();a.hasNext();)t=a.next().getCoordinate(),t.equals2D(i)||t.equals2D(f)||(u=e.distance(t),u<s&&(null===o||u<c)&&(o=t,c=u));return o},getConstraintSegments:function(){return this._segments},setSplitPointFinder:function(n){this._splitFinder=n},getConvexHull:function(){return this._convexHull},getTolerance:function(){return this._tolerance},enforceGabriel:function(n){for(var t,f,i,h,c,r=new u,e=0,o=new u,s=n.iterator();s.hasNext();)t=s.next(),f=this.findNonGabrielPoint(t),null!==f&&(this._splitPt=this._splitFinder.findSplitPoint(t,f),i=this.createVertex(this._splitPt,t),this.insertSite(i).getCoordinate().equals2D(this._splitPt),h=new eh(t.getStartX(),t.getStartY(),t.getStartZ(),i.getX(),i.getY(),i.getZ(),t.getData()),c=new eh(i.getX(),i.getY(),i.getZ(),t.getEndX(),t.getEndY(),t.getEndZ(),t.getData()),r.add(h),r.add(c),o.add(t),e+=1);return n.removeAll(o),n.addAll(r),e},createVertex:function(){var t,n,i,r;return 1===arguments.length?(t=arguments[0],n=null,null!==this._vertexFactory?this._vertexFactory.createVertex(t,null):new ss(t)):2===arguments.length?(i=arguments[0],r=arguments[1],n=null,(n=null!==this._vertexFactory?this._vertexFactory.createVertex(i,r):new ss(i)).setOnConstraint(!0),n):void 0},getSubdivision:function(){return this._subdiv},computeBoundingBox:function(){var t=hs.computeVertexEnvelope(this._initialVertices),i=hs.computeVertexEnvelope(this._segVertices),n=new y(t);n.expandToInclude(i);var r=.2*n.getWidth(),u=.2*n.getHeight(),f=Math.max(r,u);this._computeAreaEnv=new y(n);this._computeAreaEnv.expandBy(f)},setVertexFactory:function(n){this._vertexFactory=n},formInitialDelaunay:function(){this.computeBoundingBox();this._subdiv=new su(this._computeAreaEnv,this._tolerance);this._subdiv.setLocator(new dp(this._subdiv));this._incDel=new rv(this._subdiv);this.insertSites(this._initialVertices)},insertSite:function(){var n,t,i,u;if(arguments[0]instanceof ss)return(n=arguments[0],t=this._kdt.insert(n.getCoordinate(),n),t.isRepeated())?(i=t.getData(),i.merge(n),i):(this._incDel.insertSite(n),n);arguments[0]instanceof r&&(u=arguments[0],this.insertSite(this.createVertex(u)))},interfaces_:function(){return[]},getClass:function(){return hs}});hs.computeVertexEnvelope=function(n){for(var r,t=new y,i=n.iterator();i.hasNext();)r=i.next(),t.expandToInclude(r.getCoordinate());return t};hs.MAX_SPLIT_ITER=99;t(tr.prototype,{create:function(){if(null!==this._subdiv)return null;var n=tr.envelope(this._siteCoords),t=tr.toVertices(this._siteCoords);this._subdiv=new su(n,this._tolerance);new rv(this._subdiv).insertSites(t)},setTolerance:function(n){this._tolerance=n},setSites:function(){var n,t;arguments[0]instanceof s?(n=arguments[0],this._siteCoords=tr.extractUniqueCoordinates(n)):h(arguments[0],at)&&(t=arguments[0],this._siteCoords=tr.unique(w.toCoordinateArray(t)))},getEdges:function(n){return this.create(),this._subdiv.getEdges(n)},getSubdivision:function(){return this.create(),this._subdiv},getTriangles:function(n){return this.create(),this._subdiv.getTriangles(n)},interfaces_:function(){return[]},getClass:function(){return tr}});tr.extractUniqueCoordinates=function(n){if(null===n)return new ni;var t=n.getCoordinates();return tr.unique(t)};tr.envelope=function(n){for(var r,t=new y,i=n.iterator();i.hasNext();)r=i.next(),t.expandToInclude(r);return t};tr.unique=function(n){var t=w.copyDeep(n);return re.sort(t),new ni(t,!1)};tr.toVertices=function(n){for(var r,t=new u,i=n.iterator();i.hasNext();)r=i.next(),t.add(new ot(r));return t};t(cc.prototype,{createSiteVertices:function(n){for(var r,t=new u,i=n.iterator();i.hasNext();)r=i.next(),this._constraintVertexMap.containsKey(r)||t.add(new ss(r));return t},create:function(){var i,t,n;if(null!==this._subdiv)return null;i=tr.envelope(this._siteCoords);t=new u;null!==this._constraintLines&&(i.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),t=cc.createConstraintSegments(this._constraintLines));n=new hs(this.createSiteVertices(this._siteCoords),this._tolerance);n.setConstraints(t,new u(this._constraintVertexMap.values()));n.formInitialDelaunay();n.enforceConstraints();this._subdiv=n.getSubdivision()},setTolerance:function(n){this._tolerance=n},setConstraints:function(n){this._constraintLines=n},setSites:function(n){this._siteCoords=tr.extractUniqueCoordinates(n)},getEdges:function(n){return this.create(),this._subdiv.getEdges(n)},getSubdivision:function(){return this.create(),this._subdiv},getTriangles:function(n){return this.create(),this._subdiv.getTriangles(n)},createVertices:function(n){for(var r,i=n.getCoordinates(),t=0;t<i.length;t++)r=new ss(i[t]),this._constraintVertexMap.put(i[t],r)},interfaces_:function(){return[]},getClass:function(){return cc}});cc.createConstraintSegments=function(){var r;if(1===arguments.length){for(var f=arguments[0],e=gi.getLines(f),i=new u,n=e.iterator();n.hasNext();)r=n.next(),cc.createConstraintSegments(r,i);return i}if(2===arguments.length){var o=arguments[0],s=arguments[1],t=o.getCoordinates();for(n=1;n<t.length;n++)s.add(new eh(t[n-1],t[n]))}};t(uv.prototype,{create:function(){var n,t,i;if(null!==this._subdiv)return null;n=tr.envelope(this._siteCoords);this._diagramEnv=n;t=Math.max(this._diagramEnv.getWidth(),this._diagramEnv.getHeight());this._diagramEnv.expandBy(t);null!==this._clipEnv&&this._diagramEnv.expandToInclude(this._clipEnv);i=tr.toVertices(this._siteCoords);this._subdiv=new su(n,this._tolerance);new rv(this._subdiv).insertSites(i)},getDiagram:function(n){this.create();var t=this._subdiv.getVoronoiDiagram(n);return uv.clipGeometryCollection(t,this._diagramEnv)},setTolerance:function(n){this._tolerance=n},setSites:function(){var n,t;arguments[0]instanceof s?(n=arguments[0],this._siteCoords=tr.extractUniqueCoordinates(n)):h(arguments[0],at)&&(t=arguments[0],this._siteCoords=tr.unique(w.toCoordinateArray(t)))},setClipEnvelope:function(n){this._clipEnv=n},getSubdivision:function(){return this.create(),this._subdiv},interfaces_:function(){return[]},getClass:function(){return uv}});uv.clipGeometryCollection=function(n,t){for(var i,r,o=n.getFactory().toGeometry(t),e=new u,f=0;f<n.getNumGeometries();f++)i=n.getGeometryN(f),r=null,t.contains(i.getEnvelopeInternal())?r=i:t.intersects(i.getEnvelopeInternal())&&(r=o.intersection(i)).setUserData(i.getUserData()),null===r||r.isEmpty()||e.add(r);return n.getFactory().createGeometryCollection(nt.toGeometryArray(e))};fg=Object.freeze({Vertex:ot});eg=Object.freeze({ConformingDelaunayTriangulationBuilder:cc,DelaunayTriangulationBuilder:tr,VoronoiDiagramBuilder:uv,quadedge:fg});t(ci.prototype,{getSegmentIndex:function(){return this._segmentIndex},getComponentIndex:function(){return this._componentIndex},isEndpoint:function(n){var t=n.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex>=t||this._segmentIndex===t&&1<=this._segmentFraction},isValid:function(n){if(this._componentIndex<0||this._componentIndex>=n.getNumGeometries())return!1;var t=n.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>t.getNumPoints())&&(this._segmentIndex!==t.getNumPoints()||0===this._segmentFraction)&&!(this._segmentFraction<0||1<this._segmentFraction)},normalize:function(){this._segmentFraction<0&&(this._segmentFraction=0);1<this._segmentFraction&&(this._segmentFraction=1);this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0);this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0);1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)},toLowest:function(n){var t=n.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex<t?this:new ci(this._componentIndex,t,1,!1)},getCoordinate:function(n){var t=n.getGeometryN(this._componentIndex),i=t.getCoordinateN(this._segmentIndex),r;return this._segmentIndex>=t.getNumPoints()-1?i:(r=t.getCoordinateN(this._segmentIndex+1),ci.pointAlongSegmentByFraction(i,r,this._segmentFraction))},getSegmentFraction:function(){return this._segmentFraction},getSegment:function(n){var t=n.getGeometryN(this._componentIndex),i=t.getCoordinateN(this._segmentIndex);return this._segmentIndex>=t.getNumPoints()-1?new b(t.getCoordinateN(t.getNumPoints()-2),i):new b(i,t.getCoordinateN(this._segmentIndex+1))},clamp:function(n){if(this._componentIndex>=n.getNumGeometries())return this.setToEnd(n),null;if(this._segmentIndex>=n.getNumPoints()){var t=n.getGeometryN(this._componentIndex);this._segmentIndex=t.getNumPoints()-1;this._segmentFraction=1}},setToEnd:function(n){this._componentIndex=n.getNumGeometries()-1;var t=n.getGeometryN(this._componentIndex);this._segmentIndex=t.getNumPoints()-1;this._segmentFraction=1},compareTo:function(n){var t=n;return this._componentIndex<t._componentIndex?-1:this._componentIndex>t._componentIndex?1:this._segmentIndex<t._segmentIndex?-1:this._segmentIndex>t._segmentIndex?1:this._segmentFraction<t._segmentFraction?-1:this._segmentFraction>t._segmentFraction?1:0},copy:function(){return new ci(this._componentIndex,this._segmentIndex,this._segmentFraction)},toString:function(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"},isOnSameSegment:function(n){return this._componentIndex===n._componentIndex&&(this._segmentIndex===n._segmentIndex||n._segmentIndex-this._segmentIndex==1&&0===n._segmentFraction||this._segmentIndex-n._segmentIndex==1&&0===this._segmentFraction)},snapToVertex:function(n,t){if(this._segmentFraction<=0||1<=this._segmentFraction)return null;var u=this.getSegmentLength(n),i=this._segmentFraction*u,r=u-i;i<=r&&i<t?this._segmentFraction=0:r<=i&&r<t&&(this._segmentFraction=1)},compareLocationValues:function(n,t,i){return this._componentIndex<n?-1:this._componentIndex>n?1:this._segmentIndex<t?-1:this._segmentIndex>t?1:this._segmentFraction<i?-1:this._segmentFraction>i?1:0},getSegmentLength:function(n){var t=n.getGeometryN(this._componentIndex),i=this._segmentIndex,r,u;return this._segmentIndex>=t.getNumPoints()-1&&(i=t.getNumPoints()-2),r=t.getCoordinateN(i),u=t.getCoordinateN(i+1),r.distance(u)},isVertex:function(){return this._segmentFraction<=0||1<=this._segmentFraction},interfaces_:function(){return[or]},getClass:function(){return ci}});ci.getEndLocation=function(n){var t=new ci;return t.setToEnd(n),t};ci.pointAlongSegmentByFraction=function(n,t,i){return i<=0?n:1<=i?t:new r((t.x-n.x)*i+n.x,(t.y-n.y)*i+n.y,(t.z-n.z)*i+n.z)};ci.compareLocationValues=function(n,t,i,r,u,f){return n<r?-1:r<n?1:t<u?-1:u<t?1:i<f?-1:f<i?1:0};t(of.prototype,{getComponentIndex:function(){return this._componentIndex},getLine:function(){return this._currentLine},getVertexIndex:function(){return this._vertexIndex},getSegmentEnd:function(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null},next:function(){if(!this.hasNext())return null;this._vertexIndex++;this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)},loadCurrentLine:function(){if(this._componentIndex>=this._numLines)return this._currentLine=null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)},getSegmentStart:function(){return this._currentLine.getCoordinateN(this._vertexIndex)},isEndOfLine:function(){return!(this._componentIndex>=this._numLines)&&!(this._vertexIndex<this._currentLine.getNumPoints()-1)},hasNext:function(){return!(this._componentIndex>=this._numLines)&&!(this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())},interfaces_:function(){return[]},getClass:function(){return of}});of.segmentEndVertexIndex=function(n){return 0<n.getSegmentFraction()?n.getSegmentIndex()+1:n.getSegmentIndex()};t(ye.prototype,{indexOf:function(n){return this.indexOfFromStart(n,null)},indexOfFromStart:function(n,t){for(var u=l.MAX_VALUE,f=0,e=0,o=-1,r=new b,i=new of(this._linearGeom);i.hasNext();i.next())if(!i.isEndOfLine()){r.p0=i.getSegmentStart();r.p1=i.getSegmentEnd();var s=r.distance(n),h=r.segmentFraction(n),c=i.getComponentIndex(),a=i.getVertexIndex();s<u&&(null===t||t.compareLocationValues(c,a,h)<0)&&(f=c,e=a,o=h,u=s)}return u===l.MAX_VALUE?new ci(t):new ci(f,e,o)},indexOfAfter:function(n,t){var i,r;return null===t?this.indexOf(n):(i=ci.getEndLocation(this._linearGeom),i.compareTo(t)<=0)?i:(r=this.indexOfFromStart(n,t),c.isTrue(0<=r.compareTo(t),"computed location is before specified minimum location"),r)},interfaces_:function(){return[]},getClass:function(){return ye}});ye.indexOf=function(n,t){return new ye(n).indexOf(t)};ye.indexOfAfter=function(n,t,i){return new ye(n).indexOfAfter(t,i)};t(lc.prototype,{indicesOf:function(n){var u=n.getGeometryN(0).getCoordinateN(0),i=n.getGeometryN(n.getNumGeometries()-1),f=i.getCoordinateN(i.getNumPoints()-1),r=new ye(this._linearGeom),t=new Array(2).fill(null);return t[0]=r.indexOf(u),t[1]=0===n.getLength()?t[0].copy():r.indexOfAfter(f,t[0]),t},interfaces_:function(){return[]},getClass:function(){return lc}});lc.indicesOf=function(n,t){return new lc(n).indicesOf(t)};t(rw.prototype,{getGeometry:function(){return this.endLine(),this._geomFact.buildGeometry(this._lines)},getLastCoordinate:function(){return this._lastPt},endLine:function(){var n,i,t;if(null===this._coordList)return null;if(this._ignoreInvalidLines&&this._coordList.size()<2)return this._coordList=null;n=this._coordList.toCoordinateArray();i=n;this._fixInvalidLines&&(i=this.validCoordinateSequence(n));t=this._coordList=null;try{t=this._geomFact.createLineString(i)}catch(n){if(!(n instanceof tt))throw n;if(!this._ignoreInvalidLines)throw n;}null!==t&&this._lines.add(t)},setFixInvalidLines:function(n){this._fixInvalidLines=n},add:function(){var t,n,i;1===arguments.length?(t=arguments[0],this.add(t,!0)):2===arguments.length&&(n=arguments[0],i=arguments[1],null===this._coordList&&(this._coordList=new ni),this._coordList.add(n,i),this._lastPt=n)},setIgnoreInvalidLines:function(n){this._ignoreInvalidLines=n},validCoordinateSequence:function(n){return 2<=n.length?n:[n[0],n[0]]},interfaces_:function(){return[]},getClass:function(){return rw}});t(ac.prototype,{computeLinear:function(n,t){var r=new rw(this._line.getFactory()),i,u;for(r.setFixInvalidLines(!0),n.isVertex()||r.add(n.getCoordinate(this._line)),i=new of(this._line,n);i.hasNext()&&!(t.compareLocationValues(i.getComponentIndex(),i.getVertexIndex(),0)<0);i.next())u=i.getSegmentStart(),r.add(u),i.isEndOfLine()&&r.endLine();return t.isVertex()||r.add(t.getCoordinate(this._line)),r.getGeometry()},computeLine:function(n,t){var e=this._line.getCoordinates(),i=new ni,o=n.getSegmentIndex(),u,f,r;for(0<n.getSegmentFraction()&&(o+=1),u=t.getSegmentIndex(),1===t.getSegmentFraction()&&(u+=1),u>=e.length&&(u=e.length-1),n.isVertex()||i.add(n.getCoordinate(this._line)),f=o;f<=u;f++)i.add(e[f]);return t.isVertex()||i.add(t.getCoordinate(this._line)),i.size()<=0&&i.add(n.getCoordinate(this._line)),r=i.toCoordinateArray(),r.length<=1&&(r=[r[0],r[0]]),this._line.getFactory().createLineString(r)},extract:function(n,t){return t.compareTo(n)<0?this.reverse(this.computeLinear(t,n)):this.computeLinear(n,t)},reverse:function(n){return n instanceof k?n.reverse():n instanceof rr?n.reverse():(c.shouldNeverReachHere("non-linear geometry encountered"),null)},interfaces_:function(){return[]},getClass:function(){return ac}});ac.extract=function(n,t,i){return new ac(n).extract(t,i)};t(uw.prototype,{clampIndex:function(n){var t=n.copy();return t.clamp(this._linearGeom),t},project:function(n){return ye.indexOf(this._linearGeom,n)},checkGeometryType:function(){if(!(this._linearGeom instanceof k||this._linearGeom instanceof rr))throw new tt("Input geometry must be linear");},extractPoint:function(){if(1===arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2===arguments.length){var t=arguments[0],i=arguments[1],n=t.toLowest(this._linearGeom);return n.getSegment(this._linearGeom).pointAlongOffset(n.getSegmentFraction(),i)}},isValidIndex:function(n){return n.isValid(this._linearGeom)},getEndIndex:function(){return ci.getEndLocation(this._linearGeom)},getStartIndex:function(){return new ci},indexOfAfter:function(n,t){return ye.indexOfAfter(this._linearGeom,n,t)},extractLine:function(n,t){return ac.extract(this._linearGeom,n,t)},indexOf:function(n){return ye.indexOf(this._linearGeom,n)},indicesOf:function(n){return lc.indicesOf(this._linearGeom,n)},interfaces_:function(){return[]},getClass:function(){return uw}});t(uo.prototype,{indexOf:function(n){return this.indexOfFromStart(n,-1)},indexOfFromStart:function(n,t){for(var u,f,e=l.MAX_VALUE,o=t,s=0,i=new b,r=new of(this._linearGeom);r.hasNext();)r.isEndOfLine()||(i.p0=r.getSegmentStart(),i.p1=r.getSegmentEnd(),u=i.distance(n),f=this.segmentNearestMeasure(i,n,s),u<e&&t<f&&(o=f,e=u),s+=i.getLength()),r.next();return o},indexOfAfter:function(n,t){var i,r;return t<0?this.indexOf(n):(i=this._linearGeom.getLength(),i<t)?i:(r=this.indexOfFromStart(n,t),c.isTrue(t<=r,"computed index is before specified minimum index"),r)},segmentNearestMeasure:function(n,t,i){var r=n.projectionFactor(t);return r<=0?i:r<=1?i+r*n.getLength():i+n.getLength()},interfaces_:function(){return[]},getClass:function(){return uo}});uo.indexOf=function(n,t){return new uo(n).indexOf(t)};uo.indexOfAfter=function(n,t,i){return new uo(n).indexOfAfter(t,i)};t(hu.prototype,{getLength:function(n){for(var u,r,i=0,t=new of(this._linearGeom);t.hasNext();){if(!t.isEndOfLine()){if(u=t.getSegmentStart(),r=t.getSegmentEnd().distance(u),n.getComponentIndex()===t.getComponentIndex()&&n.getSegmentIndex()===t.getVertexIndex())return i+r*n.getSegmentFraction();i+=r}t.next()}return i},resolveHigher:function(n){if(!n.isEndpoint(this._linearGeom))return n;var t=n.getComponentIndex();if(t>=this._linearGeom.getNumGeometries()-1)return n;for(;++t<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(t).getLength(););return new ci(t,0,0)},getLocation:function(){var i,t;if(1===arguments.length)return i=arguments[0],this.getLocation(i,!0);if(2===arguments.length){var n=arguments[0],u=arguments[1],r=n;return n<0&&(r=this._linearGeom.getLength()+n),t=this.getLocationForward(r),u?t:this.resolveHigher(t)}},getLocationForward:function(n){var i,t,u,r,f;if(n<=0)return new ci;for(i=0,t=new of(this._linearGeom);t.hasNext();){if(t.isEndOfLine()){if(i===n)return new ci(t.getComponentIndex(),t.getVertexIndex(),0)}else{if(u=t.getSegmentStart(),r=t.getSegmentEnd().distance(u),n<i+r)return f=(n-i)/r,new ci(t.getComponentIndex(),t.getVertexIndex(),f);i+=r}t.next()}return ci.getEndLocation(this._linearGeom)},interfaces_:function(){return[]},getClass:function(){return hu}});hu.getLength=function(n,t){return new hu(n).getLength(t)};hu.getLocation=function(){var n,t;if(2===arguments.length)return n=arguments[0],t=arguments[1],new hu(n).getLocation(t);if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];return new hu(i).getLocation(r,u)}};t(hk.prototype,{clampIndex:function(n){var t=this.positiveIndex(n),r=this.getStartIndex(),i;return t<r?r:(i=this.getEndIndex(),i<t?i:t)},locationOf:function(){var n,t,i;return 1===arguments.length?(n=arguments[0],hu.getLocation(this._linearGeom,n)):2===arguments.length?(t=arguments[0],i=arguments[1],hu.getLocation(this._linearGeom,t,i)):void 0},project:function(n){return uo.indexOf(this._linearGeom,n)},positiveIndex:function(n){return 0<=n?n:this._linearGeom.getLength()+n},extractPoint:function(){var n;if(1===arguments.length)return n=arguments[0],hu.getLocation(this._linearGeom,n).getCoordinate(this._linearGeom);if(2===arguments.length){var i=arguments[0],r=arguments[1],t=hu.getLocation(this._linearGeom,i).toLowest(this._linearGeom);return t.getSegment(this._linearGeom).pointAlongOffset(t.getSegmentFraction(),r)}},isValidIndex:function(n){return n>=this.getStartIndex()&&n<=this.getEndIndex()},getEndIndex:function(){return this._linearGeom.getLength()},getStartIndex:function(){return 0},indexOfAfter:function(n,t){return uo.indexOfAfter(this._linearGeom,n,t)},extractLine:function(n,t){new uw(this._linearGeom);var i=this.clampIndex(n),r=this.clampIndex(t),u=i===r,f=this.locationOf(i,u),e=this.locationOf(r);return ac.extract(this._linearGeom,f,e)},indexOf:function(n){return uo.indexOf(this._linearGeom,n)},indicesOf:function(n){var t=lc.indicesOf(this._linearGeom,n);return[hu.getLength(this._linearGeom,t[0]),hu.getLength(this._linearGeom,t[1])]},interfaces_:function(){return[]},getClass:function(){return hk}});og=Object.freeze({LengthIndexedLine:hk,LengthLocationMap:hu,LinearGeometryBuilder:rw,LinearIterator:of,LinearLocation:ci,LocationIndexedLine:uw});t(fw.prototype,{interfaces_:function(){return[]},getClass:function(){return fw}});fw.union=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return a.createEmptyResult(a.UNION,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),hi.overlayOp(n,t,a.UNION)};t(s.prototype,{equalsTopo:function(n){return!!this.getEnvelopeInternal().equals(n.getEnvelopeInternal())&&yt.relate(this,n).isEquals(this.getDimension(),n.getDimension())},union:function(){if(0===arguments.length)return os.union(this);if(1===arguments.length){var n=arguments[0];return fw.union(this,n)}},isValid:function(){return ou.isValid(this)},intersection:function(n){if(this.isEmpty()||n.isEmpty())return a.createEmptyResult(a.INTERSECTION,this,n,this._factory);if(this.isGeometryCollection()){var t=n;return ic.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(t)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(n),hi.overlayOp(this,n,a.INTERSECTION)},covers:function(n){return yt.covers(this,n)},coveredBy:function(n){return yt.covers(n,this)},touches:function(n){return yt.touches(this,n)},intersects:function(n){return yt.intersects(this,n)},within:function(n){return yt.contains(n,this)},overlaps:function(n){return yt.overlaps(this,n)},disjoint:function(n){return yt.disjoint(this,n)},crosses:function(n){return yt.crosses(this,n)},buffer:function(){var n,t,i;if(1===arguments.length)return n=arguments[0],yi.bufferOp(this,n);if(2===arguments.length)return t=arguments[0],i=arguments[1],yi.bufferOp(this,t,i);if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];return yi.bufferOp(this,r,u,f)}},convexHull:function(){return new se(this).getConvexHull()},relate:function(){for(var i,r,u,t=arguments.length,f=Array(t),n=0;n<t;n++)f[n]=arguments[n];return 1===arguments.length?(i=arguments[0],yt.relate(this,i)):2===arguments.length?(r=arguments[0],u=arguments[1],yt.relate(this,r).matches(u)):void 0},getCentroid:function(){if(this.isEmpty())return this._factory.createPoint();var n=oe.getCentroid(this);return this.createPointFromInternalCoord(n,this)},getInteriorPoint:function(){if(this.isEmpty())return this._factory.createPoint();var n=null,t=this.getDimension();return n=0===t?new uy(this).getInteriorPoint():1===t?new ry(this).getInteriorPoint():new nf(this).getInteriorPoint(),this.createPointFromInternalCoord(n,this)},symDifference:function(n){if(this.isEmpty()||n.isEmpty()){if(this.isEmpty()&&n.isEmpty())return a.createEmptyResult(a.SYMDIFFERENCE,this,n,this._factory);if(this.isEmpty())return n.copy();if(n.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(n),hi.overlayOp(this,n,a.SYMDIFFERENCE)},createPointFromInternalCoord:function(n,t){return t.getPrecisionModel().makePrecise(n),t.getFactory().createPoint(n)},toText:function(){return(new bi).write(this)},toString:function(){this.toText()},contains:function(n){return yt.contains(this,n)},difference:function(n){return this.isEmpty()?a.createEmptyResult(a.DIFFERENCE,this,n,this._factory):n.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(n),hi.overlayOp(this,n,a.DIFFERENCE))},isSimple:function(){return new is(this).isSimple()},isWithinDistance:function(n,t){return!(t<this.getEnvelopeInternal().distance(n.getEnvelopeInternal()))&&uf.isWithinDistance(this,n,t)},distance:function(n){return uf.distance(this,n)},isEquivalentClass:function(n){return this.getClass()===n.getClass()}});n.version="1.6.1 (9be7f16)";n.algorithm=id;n.densify=rd;n.dissolve=ud;n.geom=dk;n.geomgraph=fd;n.index=pg;n.io=ad;n.noding=yd;n.operation=ig;n.precision=rg;n.simplify=ug;n.triangulate=eg;n.linearref=og;Object.defineProperty(n,"__esModule",{value:!0})});it=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){n[n.round=1]="round";n[n.flat=2]="flat";n[n.square=3]="square";n[n.Round=1]="Round";n[n.Flat=2]="Flat";n[n.Square=3]="Square"}(k||(k={}));var n=function(){function n(){}return n.point="Point",n.multiPoint="MultiPoint",n.lineString="LineString",n.linearRing="LinearRing",n.multiLineString="MultiLineString",n.polygon="Polygon",n.multiPolygon="MultiPolygon",n.geometryCollection="GeometryCollection",n}(),et=function(){function r(){}return r.area=function(n,i){var r=t.shapeToGeometry(n,!0,!0);return r?c.convertArea(r.getArea(),s.SquareMeters,i||s.SquareMeters):0},r.bounds=function(n){var t=this._getLocations(n);return t.length>1?p.fromLocations(t):t.length===1?new p(t[0],0,0):new p(new h(0,0),360,180)},r.buffer=function(n,r,u,e,o){var h,s,l;return u&&(r=c.convertDistance(r,u,i.Meters)),e=e||k.round,h=t.shapeToGeometry(n,!1,!0),s=null,h&&(l=h.buffer(r/f.metersPerLongtitudeDegree,10,e),s=t.geometryToShape(l,!1,this._clipShapesOnAntiMerdian),this._setShapeOptions(s,o)),s},r.centroid=function(n){var i=t.shapeToGeometry(n,!1,!0),r=null,u;return i&&(u=i.getCentroid(),r=t.coordinateToLocation(u.getCoordinate())),r},r.concaveHull=function(n,i,r,f){var o=t.shapeToGeometry(n,!1,!1),s=u.concaveHullBuilder(o,i,r),e=t.geometryToShape(s,!1,this._clipShapesOnAntiMerdian);return this._setShapeOptions(e,f),e},r.convexHull=function(n,i){var u=t.shapeToGeometry(n,!1,!1),r=null,f;return u&&(f=u.convexHull(),r=t.geometryToShape(f,!1,this._clipShapesOnAntiMerdian),this._setShapeOptions(r,i)),r},r.delaunayTriangles=function(n,i){var u=null,f=t.shapeToGeometry(n,!1,!1),r;return f&&(r=new jsts.triangulate.DelaunayTriangulationBuilder,r.setTolerance(1e-6),r.setSites(f),u=t.geometryToShape(r.getTriangles(f.getFactory()),!1,this._clipShapesOnAntiMerdian),this._setShapeOptions(u,i)),u},r.difference=function(i,r){var e=t.shapeToGeometry(i,!1,!0),o=t.shapeToGeometry(r,!1,!0),h,s,f;if(e){if(!o)return null}else return r;return h=e.getGeometryType()===n.geometryCollection||o.getGeometryType()===n.geometryCollection?u.difference(e,o):u.reduceIfNeededGeoOp([e,o],function(n,t){return n.difference(t)}),s=t.geometryToShape(h,!1,this._clipShapesOnAntiMerdian),this._copyShapeMetadata(i,s),f=[],i instanceof Array?f.push.apply(f,i):f.push(i),r instanceof Array?f.push.apply(f,r):f.push(r),this._setShapeOptions(s,this._getShapeOptions(f)),s},r.distance=function(n,t,i,r){var u=this.nearestLocations(n,t),f=0;return u&&(f=c.getDistanceTo(u[0],u[1],i,r)),f},r.intersection=function(i,r){var e=t.shapeToGeometry(i,!1,!0),o=t.shapeToGeometry(r,!1,!0),s=null,h,f;return e&&o&&(h=e.getGeometryType()===n.geometryCollection||o.getGeometryType()===n.geometryCollection?u.intersection(e,o):u.reduceIfNeededGeoOp([e,o],function(n,t){return n.intersection(t)}),s=t.geometryToShape(h,!1,this._clipShapesOnAntiMerdian),this._copyShapeMetadata(i,s),f=[],i instanceof Array?f.push.apply(f,i):f.push(i),r instanceof Array?f.push.apply(f,r):f.push(r),this._setShapeOptions(s,this._getShapeOptions(f))),s},r.intersects=function(i,r){var f=t.shapeToGeometry(i,!1,!0),e=t.shapeToGeometry(r,!1,!0),o=!0;return f&&e?o=f.getGeometryType()===n.geometryCollection||e.getGeometryType()===n.geometryCollection?u.intersects(f,e):f.intersects(e):(f||e)&&(o=!1),o},r.contains=function(i,r){var f=t.shapeToGeometry(i,!1,!0),e=t.shapeToGeometry(r,!1,!0),o=!0;return f&&e?o=f.getGeometryType()===n.geometryCollection||e.getGeometryType()===n.geometryCollection?u.contains(f,e):f.contains(e):(f||e)&&(o=!1),o},r.isValid=function(n){return y.isValid(t.shapeToGeometry(n,!1))},r.calculateLength=function(n,t,i){var u,e,r,f,o;if(!n||n instanceof v)return 0;if(u=0,n instanceof a)for(e=n.getRings(),r=0,f=e.length;r<f;r++)u+=c.getLengthOfPath(e[r],t,i);else if(n instanceof l)o=n.getLocations(),u=c.getLengthOfPath(o,t,i);else if(n instanceof Array)for(r=0,f=n.length;r<f;r++)u+=this.calculateLength(n[r],t,i);return u},r.makeValid=function(n){var r=t.shapeToGeometry(n,!1,!0),i=null;return r&&(i=t.geometryToShape(r,!1,this._clipShapesOnAntiMerdian),this._copyShapeMetadata(n,i),this._setShapeOptions(i,this._getShapeOptions(n))),i},r.nearestLocations=function(n,i){var o=t.shapeToGeometry(n,!1,!1),s=t.shapeToGeometry(i,!1,!1),u=null,r,f,h,e;if(o&&s&&(r=jsts.operation.distance.DistanceOp.nearestPoints(o,s),r&&r.length===2))for(u=[],f=0,h=r.length;f<h;f++)if(e=t.coordinateToLocation(r[f]),e)u.push(e);else{u=null;break}return u},r.reduce=function(n,i){var u=t.shapeToGeometry(n,!1,!0),e=jsts.simplify.DouglasPeuckerSimplifier.simplify(u,i/f.metersPerLongtitudeDegree),r=t.geometryToShape(e,!1,this._clipShapesOnAntiMerdian);return this._copyShapeMetadata(n,r),this._setShapeOptions(r,this._getShapeOptions(n)),r},r.rotate=function(n,t,i){var f,u,r,e;if(i=i||this.centroid(n),n instanceof v)f=this._rotateLocations([n.getLocation()],i,t),n.setLocation(f[0]);else if(n instanceof l)f=this._rotateLocations(n.getLocations(),i,t),n.setLocations(f);else if(n instanceof a){for(u=n.getRings(),r=0,e=u.length;r<e;r++)u[r]=this._rotateLocations(u[r],i,t);n.setRings(u)}else if(n instanceof Array)for(r=0,e=n.length;r<e;r++)this.rotate(n[r],t,i)},r.shortestLineTo=function(n,t,i){var r=this.nearestLocations(n,t);return r?new l(r,i):null},r.snapLocationsToShape=function(r,u,f,e){var s=!0,o,a,y;typeof f=="undefined"?s=!1:e&&(f=c.convertDistance(f,e,i.Meters));var h=t.shapeToGeometry(r,s,!1),v=t.shapeToGeometry(u,s,!1),l=null;if(h&&v)if(h.getGeometryType()===n.point)o=jsts.operation.distance.DistanceOp.nearestPoints(h,v),l=o&&o.length>=2&&o[1]&&(!s||o[0].distance(o[1])<=f)?t.coordinateToLocation(o[1],s):r;else if(h.getGeometryType()===n.multiPoint)for(l=[],a=0,y=h._geometries.length;a<y;a++)o=jsts.operation.distance.DistanceOp.nearestPoints(h._geometries[a],v),o&&o.length>=2&&o[1]&&(!s||o[0].distance(o[1])<=f)?l.push(t.coordinateToLocation(o[1],s)):l.push(r[a]);return l},r.snapShapeToShape=function(n,t,i,r){var f,h,e,o,u,s;if(n instanceof v)h=this.snapLocationsToShape(n.getLocation(),t,i,r),h&&n.setLocation(h);else if(n instanceof l)f=this.snapLocationsToShape(n.getLocations(),t,i,r),f&&n.setLocations(f);else if(n instanceof a){for(e=n.getRings(),o=[],u=0,s=e.length;u<s;u++)f=this.snapLocationsToShape(e[u],t,i,r),f?o.push(f):o.push(e[u]);n.setRings(o)}else if(n instanceof Array)for(u=0,s=n.length;u<s;u++)this.snapShapeToShape(n[u],t,i,r)},r.symDifference=function(i,r){var o=t.shapeToGeometry(i,!1),s=t.shapeToGeometry(r,!1),h,e,f;return h=o.getGeometryType()===n.geometryCollection||s.getGeometryType()===n.geometryCollection?u.symmetricDifference(o,s):u.reduceIfNeededGeoOp([o,s],function(n,t){return n.symDifference(t)}),e=t.geometryToShape(h,!1,this._clipShapesOnAntiMerdian),this._copyShapeMetadata(i,e),f=[],i instanceof Array?f.push.apply(f,i):f.push(i),r instanceof Array?f.push.apply(f,r):f.push(r),this._setShapeOptions(e,this._getShapeOptions(f)),e},r.union=function(n,i){var e=t.shapeToGeometry(n,!1,!0),o=t.shapeToGeometry(i,!1,!0),s=u.union(e,o),f=t.geometryToShape(s,!1,this._clipShapesOnAntiMerdian),r;return this._copyShapeMetadata(n,f),r=[],n instanceof Array?r.push.apply(r,n):r.push(n),i instanceof Array?r.push.apply(r,i):r.push(i),this._setShapeOptions(f,this._getShapeOptions(r)),f},r.unionAggregate=function(i){var f=null,r,e,o,s;if(i&&i instanceof Array&&i.length>0){for(r=t.shapeToGeometry(i[0],!1,!0),o=1,s=i.length;o<s;o++)e=t.shapeToGeometry(i[o],!1,!0),r=e.getGeometryType()===n.geometryCollection||r.getGeometryType()===n.geometryCollection?u.union(r,e):u.reduceIfNeededGeoOp([r,e],function(n,t){return n.union(t)});f=t.geometryToShape(r,!1,this._clipShapesOnAntiMerdian);this._copyShapeMetadata(i,f);this._setShapeOptions(f,this._getShapeOptions(i))}return f},r.voronoiDiagram=function(n,i,r){var o=t.shapeToGeometry(n,!1,!1),f,s,e;if(o)return i instanceof p?f=t.locationRectToEnvelope(i):i instanceof a&&(f=t.shapeToGeometry(i,!1)),s=u.voronoiDiagramBuilder(o,f),e=t.geometryToShape(s,!1,this._clipShapesOnAntiMerdian),this._setShapeOptions(e,r),e},r._getLocations=function(n){var t=[],u,i,r,f;if(n instanceof h)t=[n];else if(n instanceof v)t=[n.getLocation()];else if(n instanceof l)t=n.getLocations();else if(n instanceof a)for(u=n.getRings(),i=0,r=u.length;i<r;i++)t=t.concat(u[i]);else if(n instanceof Array)for(f=[],i=0,r=n.length;i<r;i++)f=this._getLocations(n[i]),t=t.concat(f);return t},r._rotateLocations=function(n,t,i){for(var u=[],f,e,r=0,o=n.length;r<o;r++)f=c.getDistanceTo(t,n[r]),e=c.getHeading(t,n[r]),u.push(c.getDestination(t,e+i,f));return u},r._copyShapeMetadata=function(n,t){var r,i,u;if(n&&!(n instanceof h)&&t)if(n instanceof Array&&n.length>0)this._copyShapeMetadata(n[0],t);else if(!(n instanceof Array)&&n.metadata)if(r=n.metadata,t instanceof Array)for(i=0,u=t.length;i<u;i++)t[i].metadata=r;else t.metadata=r},r._getPushpinOptions=function(n){return{anchor:n.getAnchor(),visible:n.getVisible(),icon:n.getIcon(),text:n.getText(),textOffset:n.getTextOffset(),title:n.getTitle(),subTitle:n.getSubTitle(),color:n.getColor(),cursor:n.getCursor()}},r._getPolylineOptions=function(n){return{strokeColor:n.getStrokeColor(),strokeDashArray:n.getStrokeDashArray(),strokeThickness:n.getStrokeThickness(),visible:n.getVisible()}},r._getPolygonOptions=function(n){var t=this._getPolylineOptions(n);return t.fillColor=n.getFillColor(),t},r._getShapeOptions=function(n){var t={},r,u,i;if(n)if(n instanceof v)t=this._getPushpinOptions(n);else if(n instanceof l)t=this._getPolylineOptions(n);else if(n instanceof a)t=this._getPolygonOptions(n);else if(n instanceof Array)for(r=0;r<n.length;r++){u=this._getShapeOptions(n[r]);for(i in u)u.hasOwnProperty(i)&&typeof t[i]=="undefined"&&(t[i]=u[i])}return t},r._setShapeOptions=function(n,t){if(n&&t)if(n instanceof v)n.setOptions(t);else if(n instanceof l)n.setOptions(t);else if(n instanceof a)n.setOptions(t);else if(n instanceof Array)for(var i=0,r=n.length;i<r;i++)this._setShapeOptions(n[i],t)},r._clipShapesOnAntiMerdian=!1,r}(),u=function(){function t(){}return t.concaveHullBuilder=function(t,i,r){var e,u,f,o,h,a;if(t.getGeometryType()===n.point)return t;if(e=t.getFactory(),f=new jsts.triangulate.DelaunayTriangulationBuilder,f.setSites(t),f.setTolerance(1e-6),o=f.getTriangles(e),o._geometries.length===0)u=f.getEdges(e),u._geometries.length===0&&(u=null);else if(o._geometries.length===1)u=o._geometries[0];else{for(var l=e.createMultiPointFromCoords(f._siteCoords.toCoordinateArray()),s=l.getEnvelopeInternal(),v=Math.sqrt(s.getWidth()*s.getWidth()+s.getHeight()*s.getHeight()),c=.1;c<=3;){if(u=this._concaveHullFactory(o,v,c,r),u&&u.covers(l)&&(i||!i&&!(u instanceof jsts.geom.MultiPolygon)))break;c+=.05}if((t.getGeometryType()===n.lineString||t.getGeometryType()===n.multiLineString)&&(t=t.buffer(1e-6)),(t.getGeometryType()===n.polygon||t.getGeometryType()===n.multiPolygon)&&(u=u?e.createGeometryCollection([t,u]).buffer(0):t,!r))if(u.getGeometryType()===n.polygon)u._holes=[];else if(u.getGeometryType()===n.multiPolygon)for(h=0,a=u._geometries.length;h<a;h++)u._geometries[h]._holes=[]}return u},t.difference=function(i,r){var u,o=[],f,e,s;if(r.getGeometryType()===n.geometryCollection)if(i.getGeometryType()===n.geometryCollection)for(f=0,e=i._geometries.length;f<e;f++)u=u?this.union(u,this.difference(i._geometries[f],r)):this.difference(i._geometries[f],r);else for(u=i,f=0,e=r._geometries.length;f<e;f++)if(u)if(u.getGeometryType()===n.geometryCollection)for(e=u._geometries.length,s=0;s<e;s++)u=this.union(u,this.difference(u._geometries[s],r));else u=t.reduceIfNeededGeoOp([u,r],function(n,t){return n.difference(t._geometries[f])});else return null;else if(i.getGeometryType()===n.geometryCollection){for(f=0,e=i._geometries.length;f<e;f++)u=t.reduceIfNeededGeoOp([i,r],function(n,t){return n._geometries[f].difference(t)}),this._addShapeToGeometryArray(u,o);switch(o.length){case 0:u=null;case 1:u=o[0];default:u=i.getFactory().createGeometryCollection(o)}}else u=t.reduceIfNeededGeoOp([i,r],function(n,t){return n.difference(t)});return u},t.envelopeToPolygon=function(n){var t=new jsts.geom.GeometryFactory;return t.createPolygon(t.createLinearRing([new jsts.geom.Coordinate(n.minx,n.miny),new jsts.geom.Coordinate(n.maxx,n.miny),new jsts.geom.Coordinate(n.maxx,n.maxy),new jsts.geom.Coordinate(n.minx,n.maxy),new jsts.geom.Coordinate(n.minx,n.miny)]))},t.intersection=function(i,r){var f,o,s,e=[],u,h,c,l;if(i.getGeometryType()===n.geometryCollection&&r.getGeometryType()===n.geometryCollection)for(u=0,h=i._geometries.length;u<h;u++)for(c=0,l=r._geometries.length;c<l;c++)s=t.reduceIfNeededGeoOp([i,r],function(n,t){return n._geometries[u].intersection(t._geometries[c])}),this._addShapeToGeometryArray(s,e);else if(i.getGeometryType()===n.geometryCollection)f=i,o=r;else if(r.getGeometryType()===n.geometryCollection)f=r,o=i;else return t.reduceIfNeededGeoOp([i,r],function(n,t){return n.intersection(t)});if(o&&f)for(u=0,h=f._geometries.length;u<h;u++)s=t.reduceIfNeededGeoOp([f,o],function(n,t){return n._geometries[u].intersection(t)}),this._addShapeToGeometryArray(s,e);switch(e.length){case 0:return null;case 1:return e[0];default:return i.getFactory().createGeometryCollection(e)}},t.intersects=function(t,i){var u,r,e,o,h,f,s;if(t||i){if(!t||!i)return!1}else return!0;if(u=!1,t.getGeometryType()===n.geometryCollection&&i.getGeometryType()===n.geometryCollection){for(r=0,e=t._geometries.length;r<e&&!u;r++)for(o=0,h=i._geometries.length;o<h;o++)if(t._geometries[r].intersects(i._geometries[o])){u=!0;break}}else if(t.getGeometryType()===n.geometryCollection?(f=t,s=i):i.getGeometryType()===n.geometryCollection&&(f=i,s=t),s&&f){for(r=0,e=f._geometries.length;r<e;r++)if(f._geometries[r].intersects(s)){u=!0;break}}else u=t.intersects(i);return u},t.contains=function(t,i){var u,r,f,e,o,s;if(t||i){if(!t||!i)return!1}else return!0;if(u=!0,t.getGeometryType()===n.geometryCollection&&i.getGeometryType()===n.geometryCollection)for(r=0,f=i._geometries.length;r<f&&u;r++){for(e=!1,o=0,s=t._geometries.length;o<s;o++)if(t._geometries[o].contains(i._geometries[r])){e=!0;break}if(!e){u=!1;break}}else if(t.getGeometryType()===n.geometryCollection){for(r=0,f=t._geometries.length;r<f;r++)if(e=!1,t._geometries[r].contains(i)){e=!0;break}e||(u=!1)}else if(i.getGeometryType()===n.geometryCollection){for(r=0,f=i._geometries.length;r<f;r++)if(!t.contains(i._geometries[r])){u=!1;break}}else u=t.contains(i);return u},t.symmetricDifference=function(i,r){if(!i||!r)return i?i:r;var u=null;return(i.getGeometryType()===n.geometryCollection||r.getGeometryType()===n.geometryCollection)&&(u=this.union(this.difference(i,r),this.difference(r,i))),u||t.reduceIfNeededGeoOp([i,r],function(n,t){return n.symDifference(t)})},t.union=function(i,r){var c=null,u,h,l,f,e,o,s;if(i)if(r)if(i.getGeometryType()===n.geometryCollection)if(r.getGeometryType()===n.geometryCollection){for(u=i._geometries[0],h=1,l=i._geometries.length;h<l;h++)u=this.union(u,this.union(i._geometries[h],r));c=u}else c=this.union(r,i);else if(r.getGeometryType()!==n.geometryCollection)c=t.reduceIfNeededGeoOp([i,r],function(n,t){return n.union(t)});else{for(i.getGeometryType()===n.point||i.getGeometryType()===n.multiPoint?f=i:i.getGeometryType()===n.lineString||i.getGeometryType()===n.multiLineString?e=i:(i.getGeometryType()===n.polygon||i.getGeometryType()===n.multiPolygon)&&(o=i),u=null,h=0,l=r._geometries.length;h<l;h++)u=r._geometries[h],u.getGeometryType()===n.point||u.getGeometryType()===n.multiPoint?f=f?t.reduceIfNeededGeoOp([f,u],function(n,t){return n.union(t)}):u:u.getGeometryType()===n.lineString||u.getGeometryType()===n.multiLineString?e=e?t.reduceIfNeededGeoOp([e,u],function(n,t){return n.union(t)}):u:(u.getGeometryType()===n.polygon||u.getGeometryType()===n.multiPolygon)&&(o=o?t.reduceIfNeededGeoOp([o,u],function(n,t){return n.union(t)}):u);if(s=[],f)if(e||o)f.getGeometryType()===n.point?s.push(f):s=s.concat(f._geometries);else return f;if(e)if(f||o)e.getGeometryType()===n.lineString?s.push(e):s=s.concat(e._geometries);else return e;if(o)if(f||e)o.getGeometryType()===n.polygon?s.push(o):s=s.concat(o._geometries);else return o;c=i.getFactory().createGeometryCollection(s)}else return i;else return r;return c},t.voronoiDiagramBuilder=function(n,i){var e=new jsts.triangulate.VoronoiDiagramBuilder,r,u,f;return e.setSites(n),r=null,i&&(u=null,i instanceof jsts.geom.Envelope?(u=i,r=t.envelopeToPolygon(u)):i instanceof jsts.geom.Geometry&&(r=i,u=r.getEnvelopeInternal()),e.setClipEnvelope(u)),f=e.getDiagram(n.getFactory()),f&&r&&(f=t.intersection(f,r)),f},t.reduceIfNeededGeoOp=function(n,i){var r=null,u;try{r=i.apply(this,n)}catch(f){try{u=[];n.forEach(function(n){u.push(n instanceof jsts.geom.Geometry?t.precisionReducer.reduce(n):n)});r=i.apply(this,u)}catch(e){throw f;}}return r},t._addShapeToGeometryArray=function(n,t){if(n instanceof jsts.geom.GeometryCollection)for(var i=0,r=n._geometries.length;i<r;i++)t.push(n._geometries[i]);else t.push(n)},t._concaveHullFactory=function(t,i,r,u){var o,h,a,s,f,c,l,e;if(u===void 0&&(u=!0),o=[],r===0)return null;if(t._geometries.length===1)return t;if(r<3)for(h=i*r,f=0,c=t._geometries.length;f<c;f++)a=t._geometries[f],s=t._geometries[f].getCoordinates(),a.getGeometryType()===n.polygon&&s.length>=3&&s[0].distance(s[1])<=h&&s[1].distance(s[2])<=h&&s[2].distance(s[0])<=h&&o.push(a);else o=t._geometries;if(l=null,o.length===1)u||(o[0]._holes=[]),l=o[0];else if(o.length>1){if(e=t.getFactory().createGeometryCollection(o),e=e.buffer(0),!u)if(e.getGeometryType()===n.polygon)e._holes=[];else if(e.getGeometryType()===n.multiPolygon)for(f=0,c=e._geometries.length;f<c;f++)e._geometries[f]._holes=[];l=e}return l},t.fixedPrecisionModel=new jsts.geom.PrecisionModel(1e6),t.precisionReducer=new jsts.precision.GeometryPrecisionReducer(t.fixedPrecisionModel),t}(),y=function(){function t(){}return t.isValid=function(t){var r=t.isValid(),i,u;if(r)switch(t.getGeometryType()){case n.lineString:r=this._isLineStringValid(t);break;case n.multiLineString:for(i=0,u=t._geometries.length;i<u;i++)if(!this._isLineStringValid(t._geometries[i])){r=!1;break}break;case n.polygon:r=this._isPolygonOrientationValid(t);break;case n.multiPolygon:for(i=0,u=t._geometries.length;i<u;i++)if(!this._isPolygonOrientationValid(t._geometries[i])){r=!1;break}break;case n.geometryCollection:for(i=0,u=t._geometries.length;i<u;i++)if(r=this.isValid(t._geometries[i]),!r)break}return r},t.makeValid=function(t){var r,i,u;if(!this.isValid(t))switch(t.getGeometryType()){case n.point:case n.multiPoint:if(t.getNumPoints()===0)return null;break;case n.lineString:case n.multiLineString:t=this._makeLineStringValid(t);break;case n.polygon:case n.multiPolygon:t=this._makePolygonValid(t);break;case n.geometryCollection:for(r=[],i=0,u=t._geometries.length;i<u;i++)r.push(this.makeValid(t._geometries[i]));t=t.getFactory().createGeometryCollection(r);break;default:return null}return t},t._isLineStringValid=function(i){var r=t._getExplicitSelfIntersectionLine(i);return r&&r.getGeometryType()===n.lineString&&r.getCoordinates().length>=2?!0:!1},t._isPolygonOrientationValid=function(n){var i=!0,t,r;if(this._isRingCCW(n._shell)){for(t=0,r=n._holes.length;t<r;t++)if(this._isRingCCW(n._holes[t])){i=!1;break}}else i=!1;return i},t._isRingCCW=function(n){var i=n.getCoordinates(),r=i.length,t,f,u,e,o;if(r===0||n.isClosed()&&r<4||!n.isClosed()&&r<3)return!1;for(t=i[0],f=0,u=1;u<r;u++)i[u].y>t.y&&(t=i[u],f=u);e=f-1;e<0&&(e=r-2);o=f+1;o>=r&&(o=0);var s=i[e],h=i[o],c=(h.x-t.x)*(s.y-t.y)-(h.y-t.y)*(s.x-t.x);return c===0?s.x>h.x:c>0},t._makeLineStringValid=function(i){var u=i,r;return i.normalize(),r=t._getExplicitSelfIntersectionLine(i),r&&r.getGeometryType()!==n.point?r.getGeometryType()===n.multiLineString&&(u=r):u=null,u},t._makePolygonValid=function(t){var r,u,i,f,e;if(t.normalize(),!t.isValid()){if(r=new jsts.operation.polygonize.Polygonizer,t.getGeometryType()===n.polygon)this._addPolygonToPolygonizer(t,r);else if(t.getGeometryType()===n.multiPolygon)for(u=t._geometries.length,i=0;i<u;i++)this._addPolygonToPolygonizer(t._geometries[i],r);f=r.getPolygons();switch(f.size()){case 0:return null;case 1:t=f.get(0);break;default:t=t.getFactory().createGeometryCollection(f.toArray());t=t.buffer(0)}}if(t.getGeometryType()===n.polygon)t=this._correctPolygonRingOrienation(t);else if(t.getGeometryType()===n.multiPolygon){for(e=[],u=t._geometries.length,i=0;i<u;i++)e.push(this._correctPolygonRingOrienation(t._geometries[i]));t=t.getFactory().createMultiPolygon(e)}return t},t._addPolygonToPolygonizer=function(n,t){this._addLineToPolygonizer(n._shell,t);for(var i=0,r=n._holes.length;i<r;i++)this._addLineToPolygonizer(n._holes[i],t)},t._addLineToPolygonizer=function(i,r){var u,f,e;if(i.getGeometryType()===n.linearRing&&(i=i.getFactory().createLineString(i.getCoordinates())),u=t._getExplicitSelfIntersectionLine(i),u.getGeometryType()===n.multiLineString)for(f=0,e=u._geometries.length;f<e;f++)r.add(u._geometries[f]);else r.add(u)},t._correctPolygonRingOrienation=function(n){var u=n._shell,i=[],r=n.getFactory(),t,f;for(this._isRingCCW(n._shell)||(u=r.createLinearRing(n._shell.getCoordinates().reverse())),t=0,f=n._holes.length;t<f;t++)this._isRingCCW(n._holes[t])?i.push(r.createLinearRing(n._holes[t].getCoordinates().reverse())):i.push(n._holes[t]);return r.createPolygon(u,i)},t._getExplicitSelfIntersectionLine=function(n){return u.reduceIfNeededGeoOp([n],function(n){return n.union(n.getFactory().createPoint(n.getCoordinateN(0)))})},t}(),i;(function(n){n[n.Meters=0]="Meters";n[n.Kilometers=1]="Kilometers";n[n.Miles=2]="Miles";n[n.Feet=3]="Feet";n[n.Yards=4]="Yards";n[n.NauticalMiles=5]="NauticalMiles"})(i||(i={})),function(n){n[n.SquareMeters=0]="SquareMeters";n[n.SquareKilometers=1]="SquareKilometers";n[n.SquareMiles=2]="SquareMiles";n[n.SquareFeet=3]="SquareFeet";n[n.SquareYards=4]="SquareYards";n[n.Acres=5]="Acres";n[n.Hectares=6]="Hectares"}(s||(s={}));var c=function(){function n(){}return n.convertArea=function(n,t,i){if(t===i)return n;switch(t){case s.SquareMeters:n/=1e6;break;case s.SquareFeet:n/=10763910.417;break;case s.SquareMiles:n/=.38610216;break;case s.SquareYards:n/=1195990.05;break;case s.Acres:n/=247.105381;break;case s.Hectares:n/=100}switch(i){case s.SquareMeters:n*=1e6;break;case s.SquareFeet:n*=10763910.417;break;case s.SquareMiles:n*=.38610216;break;case s.SquareYards:n*=1195990.05;break;case s.Acres:n*=247.105381;break;case s.Hectares:n*=100}return n},n.convertDistance=function(n,t,r){if(t===r)return n;switch(t){case i.Meters:n/=1e3;break;case i.Feet:n/=3280.8399;break;case i.Miles:n/=.62137119;break;case i.Yards:n/=1093.6133;break;case i.NauticalMiles:n/=.5399568}switch(r){case i.Meters:n*=1e3;break;case i.Feet:n*=3280.8399;break;case i.Miles:n*=.62137119;break;case i.Yards:n*=1093.6133;break;case i.NauticalMiles:n*=.5399568}return n},n.getDestination=function(n,t,u,f){var e;f=f||i.Meters;e=this.getEarthRadius(f);t=r.normalizeDegrees(t);var o=r.degreesToRadians(n.latitude),w=r.degreesToRadians(n.longitude),s=r.degreesToRadians(t),c=u/e,l=Math.sin(o),a=Math.sin(c),v=Math.cos(o),y=Math.cos(c),p=Math.asin(l*y+v*a*Math.cos(s)),b=w+Math.atan2(Math.sin(s)*a*v,y-l*Math.sin(p)),k=d._clamp(r.radiansToDegrees(p),-90,90),g=h.normalizeLongitude(r.radiansToDegrees(b));return new h(k,g)},n.getDistanceTo=function(n,t,r,u){var f=u?this._vincentyDistance(n,t):this._haversineDistance(n,t);return this.convertDistance(f,i.Meters,r||i.Meters)},n.getEarthRadius=function(n){return this.convertDistance(f.earthRadiusMajorAxis,i.Meters,n||i.Meters)},n.getGeodesicPath=function(n,t){var l,a,i,u,f,c;for((!t||t<=0)&&(t=15),l=n.length,a=[],l>0&&(i=r.degreesToRadians(n[0].latitude),u=r.degreesToRadians(n[0].longitude)),f=1;f<l;f++){var e=r.degreesToRadians(n[f].latitude),o=r.degreesToRadians(n[f].longitude),g=Math.sin(i),nt=Math.sin(e),tt=Math.sin(u),it=Math.sin(o),v=Math.cos(i),y=Math.cos(e),rt=Math.cos(u),ut=Math.cos(o),s=2*Math.asin(Math.sqrt(Math.pow(Math.sin((i-e)/2),2)+v*y*Math.pow(Math.sin((u-o)/2),2)));for(c=0;c<=t;c++){var b=c/t,p=Math.sin((1-b)*s)/Math.sin(s),w=Math.sin(b*s)/Math.sin(s),k=p*v*rt+w*y*ut,d=p*v*tt+w*y*it,ft=p*g+w*nt,et=Math.atan2(ft,Math.sqrt(Math.pow(k,2)+Math.pow(d,2))),ot=Math.atan2(d,k);a.push(new h(r.radiansToDegrees(et),r.radiansToDegrees(ot)))}i=e;u=o}return a},n.getHeading=function(n,t){var i=r.degreesToRadians(n.latitude),u=r.degreesToRadians(t.latitude),f=r.degreesToRadians(t.longitude-n.longitude),e=Math.cos(u),o=Math.sin(f)*e,s=Math.cos(i)*Math.sin(u)-Math.sin(i)*e*Math.cos(f);return(r.radiansToDegrees(Math.atan2(o,s))+360)%360},n.getLocationAlongPath=function(n,t,r){var o,s,u,e,f,h,c;if(r=r||i.Meters,o=0,u=n instanceof l?n.getLocations():n,e=null,u.length>=2){for(f=1,h=u.length;f<h;f++){if(s=this.getDistanceTo(u[f-1],u[f],r,!0),o+s>=t){c=this.getHeading(u[f-1],u[f]);e=this.getDestination(u[f-1],c,t-o,r);break}o+=s}e=e||u[h-1]}else u.length===1&&(e=u[0]);return e},n.getRegularPolygon=function(n,t,r,u,f){var e;u=u||i.Meters;f=f||0;var o=[],h=360/r,s=0;for(e=0;e<=r;e++)o.push(this.getDestination(n,(s+f)%360,t,u)),s+=h;return o},n.interpolate=function(n,t,r){r=r||.5;var u=this.getDistanceTo(n,t,i.Kilometers,!0),f=this.getHeading(n,t);return this.getDestination(n,f,u*r,i.Kilometers)},n.locationRectToPolygon=function(n){return new a([n.getNorthwest(),new h(n.getSouth(),n.getWest()),new h(n.getSouth(),n.center.longitude),n.getSoutheast(),new h(n.getNorth(),n.getEast()),new h(n.getNorth(),n.center.longitude),n.getNorthwest(),])},n.toDegMinSec=function(n){var t,i,r;return!n||!(n instanceof h)||isNaN(n.latitude)||isNaN(n.longitude)?"":(t=this._degreeToDegMinSec(n.latitude),i=t[0]+" "+t[1]+" "+t[2]+" ",i+=n.latitude<0?"S ":"N ",r=this._degreeToDegMinSec(n.longitude),i+=r[0]+" "+r[1]+" "+r[2]+" ",i+(n.longitude<0?"W":"E"))},n.tryParseDegMinSec=function(n){var i=null,t,f;if(typeof n=="string")if(n=n.trim(),t=n.search(/[NSEW]\s/i),t>=0){var e=n.slice(0,t+1),o=n.slice(t+2,n.length),r=this._tryParseDegMinSec(e),u=this._tryParseDegMinSec(o);isNaN(r)||isNaN(u)||(i=e.search(/[NS]/i)>=0?new h(r,u):new h(u,r))}else f=this._tryParseDegMinSec(n),i=isNaN(f)?null:f;return i},n.getLengthOfPath=function(n,t,r){var e=0,u,f;if(r)for(u=0,f=n.length-1;u<f;u++)e+=this._vincentyDistance(n[u],n[u+1]);else for(u=0,f=n.length-1;u<f;u++)e+=this._haversineDistance(n[u],n[u+1]);return this.convertDistance(e,i.Meters,t||i.Meters)},n.getLengthOfPathSegments=function(n,t,r){var f=0,e=0,o=new Array(n.length),h=i.Meters,c=t||i.Meters,u,s;if(o[0]={length:0,totalLength:0},r)for(u=1,s=n.length;u<s;u++)f=this.convertDistance(this._vincentyDistance(n[u-1],n[u]),h,c),e+=f,o[u]={length:f,totalLength:e};else for(u=1,s=n.length;u<s;u++)f=this.convertDistance(this._haversineDistance(n[u-1],n[u]),h,c),e+=f,o[u]={length:f,totalLength:e};return o},n.getCardinalSpline=function(n,t,i,r){var c,f,a,b,u,o;if(!n||n.length<=2)return n;t=typeof t!="number"?.5:t;(typeof i!="number"||i<=0)&&(i=15);c=n.length;f=n.slice(0);r?(Microsoft.Maps.Location.areEqual(f[0],f[c-1])&&(f.pop(),c--),f.unshift(n[c-1]),f.push(n[0]),f.push(n[1]),c++):(f.unshift(n[0]),f.push(n[c-1]));var w=f.length,l=new Array(w),e=new Array(w);for(u=0;u<w;u++)l[u]=f[u].latitude,e[u]=f[u].longitude;for(tt.worldWrapLongitudes(e),a=[],a.push([1,0,0,0]),u=1;u<i-1;u++){var o=u/i,v=o*o,p=o*v;a.push([2*p-3*v+1,-2*p+3*v,p-2*v+o,p-v])}for(a.push([0,1,0,0]),b=[],u=1;u<c;u++){var k=t*(e[u+1]-e[u-1]),d=t*(l[u+1]-l[u-1]),g=t*(e[u+2]-e[u]),nt=t*(l[u+2]-l[u]);for(o=0;o<i;o++){var s=a[o],it=s[0]*e[u]+s[1]*e[u+1]+s[2]*k+s[3]*g,y=s[0]*l[u]+s[1]*l[u+1]+s[2]*d+s[3]*nt;y=y>90?90:y<-90?-90:y;b.push(new h(y,it))}}return b},n._degreeToDegMinSec=function(n){var t=Math.abs(n)*3600,i=Math.floor(t/3600),r=Math.floor(t/60)%60,u=Math.round(t%60*1e3)/1e3;return[i,r,u]},n._haversineDistance=function(n,t){var u=r.degreesToRadians(t.latitude-n.latitude),e=r.degreesToRadians(t.longitude-n.longitude),i=Math.pow(Math.sin(u/2),2)+Math.cos(r.degreesToRadians(n.latitude))*Math.cos(r.degreesToRadians(t.latitude))*Math.pow(Math.sin(e/2),2),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return f.roundToInterval(f.earthRadiusMajorAxis*o,.01)},n._vincentyDistance=function(n,t){var d=r.degreesToRadians(t.longitude-n.longitude),g=Math.atan((1-this.FLATTENING_OF_ELLIPSOID)*Math.tan(r.degreesToRadians(n.latitude))),nt=Math.atan((1-this.FLATTENING_OF_ELLIPSOID)*Math.tan(r.degreesToRadians(t.latitude))),h=Math.sin(g),c=Math.cos(g),l=Math.sin(nt),o=Math.cos(nt),s=d,tt,it=100,y;do{var p=Math.sin(s),w=Math.cos(s),e=Math.sqrt(o*p*o*p+(c*l-h*o*w)*(c*l-h*o*w));if(e==0)return 0;var a=h*l+c*o*w,rt=Math.atan2(e,a),b=c*o*p/e,v=1-b*b,i=a-2*h*l/v;isNaN(i)&&(i=0);y=this.FLATTENING_OF_ELLIPSOID/16*v*(4+this.FLATTENING_OF_ELLIPSOID*(4-3*v));tt=s;s=d+(1-y)*this.FLATTENING_OF_ELLIPSOID*b*(rt+y*e*(i+y*a*(-1+2*i*i)))}while(Math.abs(s-tt)>1e-12&&--it>0);if(it==0)return NaN;var u=v*(f.earthRadiusMajorAxis*f.earthRadiusMajorAxis-f.earthRadiusMinorAxis*f.earthRadiusMinorAxis)/(f.earthRadiusMinorAxis*f.earthRadiusMinorAxis),ut=1+u/16384*(4096+u*(-768+u*(320-175*u))),k=u/1024*(256+u*(-128+u*(74-47*u))),ft=k*e*(i+k/4*(a*(-1+2*i*i)-k/6*i*(-3+4*e*e)*(-3+4*i*i))),et=f.earthRadiusMinorAxis*ut*(rt-ft);return f.roundToInterval(et,.001)},n._tryParseDegMinSec=function(n){var o=NaN,u,t,f,i,e,r;if(n&&(n=n.replace(/\s/g,""),u=1,/^-|[WS]$/i.test(n)&&(u=-1),t=n.replace(/[NSEW]$/i,"").split(/[^0-9.,]+/),t[t.length-1]==""&&(t.length-=1),f=t.length,f>=1&&f<=3)){for(i=0,e=1,r=0;r<t.length;r++)i=i+parseFloat(t[r])/e,e*=60;o=i*u}return o},n.FLATTENING_OF_ELLIPSOID=1/298.257223563,n}(),t=function(){function t(){}return t.shapeToGeometry=function(n,t,i){var u=null,f=n,r=n;return n?(f.latitude!==undefined&&f.longitude!==undefined?u=this._geomFactory.createPoint(this.locationToCoordinate(f,t)):r.geometryType===1?u=this._pushpinToPoint(r.crs,r.geometry,t):r.geometryType===2?u=this._polylineToGeometry(r.crs,r.geometry,t,i):r.geometryType===3?u=this._polygonToGeometry(r.crs,r.geometry,t,i):n instanceof Array&&(u=this._shapesToMultiGeometry(n,t,i)),u):null},t.locationToCoordinate=function(n,t){var i=t?f.longitudeDegreesToMeters(n.longitude):n.longitude,r=t?f.latitudeDegreesToMeters(n.latitude):n.latitude;return new jsts.geom.Coordinate(i,r)},t.locationRectToEnvelope=function(n,t){return new jsts.geom.Envelope(this.locationToCoordinate(n.getNorthwest(),t),this.locationToCoordinate(n.getSoutheast(),t))},t.geometryToShape=function(t,i,r){var u,s,e,o,f,h;r===void 0&&(r=!0);r&&(t=this._clipAntiMerdian(t,i));u=null;switch(t.getGeometryType()){case n.point:u=this._pointToPushpin(t,i);break;case n.lineString:u=this._lineStringToPolyline(t,i);break;case n.linearRing:s=this._linearRingToLocations(t,i);u=new l(s);break;case n.polygon:u=this._polygonGeometryToPolygon(t,i);break;case n.multiPoint:case n.multiLineString:case n.multiPolygon:case n.geometryCollection:for(e=[],f=0,h=t._geometries.length;f<h;f++)o=this.geometryToShape(t._geometries[f],i,r),o&&e.push(o);u=e}return u},t.coordinateToLocation=function(n,t){var r=t?f.metersToLongitudeDegrees(n.x):n.x,i=t?f.metersToLatitudeDegrees(n.y):n.y;return i=i>90?90:i<-90?-90:i,new h(i,r)},t.envelopeToLocationRect=function(n,t){var i=this.coordinateToLocation(new jsts.geom.Coordinate(n.minx,n.maxy),t),r=this.coordinateToLocation(new jsts.geom.Coordinate(n.maxx,n.miny),t);return p.fromCorners(i,r)},t._locationsToCoordinates=function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)r.push(this.locationToCoordinate(n[i],t));return r},t._pushpinToPoint=function(n,t,i){return this._geomFactory.createPoint(this.locationToCoordinate(ft.getLocation(n,t),i))},t._polylineToGeometry=function(n,t,i,r){var u=this._geomFactory.createLineString(this._locationsToCoordinates(tt.getLocations(n,t),i));return r&&!y.isValid(u)&&(u=y.makeValid(u)),u},t._polygonToGeometry=function(n,t,i,r){for(var f,a,e,o,s,h=ut.getRings(n,t),u=[this._geomFactory.createPolygon(this._geomFactory.createLinearRing(this._locationsToCoordinates(h[0],i)))],c,l=1,v=h.length;l<v;l++){for(o=this._geomFactory.createLinearRing(this._locationsToCoordinates(h[l],i)),c=this._geomFactory.createPolygon(o),s=!1,f=0,a=u.length;f<a;f++)if(u[f].covers(c)){u[f]._holes.push(o);s=!0;break}s||u.push(c)}return e=u.length===1?u[0]:this._geomFactory.createMultiPolygon(u),r&&!y.isValid(e)&&(e=y.makeValid(e)),e},t._shapesToMultiGeometry=function(t,i,r){for(var u,l,a,e=[],o=[],s=[],h=[],f,c=0,v=t.length;c<v;c++){f=this.shapeToGeometry(t[c],i,r);switch(f.getGeometryType()){case n.point:e.push(f);break;case n.lineString:o.push(f);break;case n.polygon:s.push(f);break;case n.multiPoint:e=e.concat(f._geometries);break;case n.multiLineString:o=o.concat(f._geometries);break;case n.multiPolygon:s=s.concat(f._geometries);break;case n.geometryCollection:h=h.concat(f._geometries)}}return(h.length>0?(h=h.concat(e).concat(o).concat(s),u=this._geomFactory.createGeometryCollection(h)):(e.length>0&&(u=e.length===1?e[0]:this._geomFactory.createMultiPoint(e)),o.length>0&&(l=o.length===1?o[0]:this._geomFactory.createMultiLineString(o),u=u?this._geomFactory.createGeometryCollection([u,l]):l),s.length>0&&(a=s.length===1?s[0]:this._geomFactory.createMultiPolygon(s),u=u?this._geomFactory.createGeometryCollection([u,a]):a)),r&&!y.isValid(u))?y.makeValid(u):u},t._linearRingToLocations=function(n,t){for(var r=[],u=n.getCoordinates(),i=0,f=u.length;i<f;i++)r.push(this.coordinateToLocation(u[i],t));return r},t._pointToPushpin=function(n,t){var i=n.getCoordinate(),r=null;return i&&(r=new v(this.coordinateToLocation(i,t))),r},t._lineStringToPolyline=function(n,t){return n.getCoordinates().length===0?null:new l(this._linearRingToLocations(n,t))},t._polygonGeometryToPolygon=function(n,t){var r,i;if(n._shell.getCoordinates().length===0)return null;for(r=[],r.push(this._linearRingToLocations(n._shell,t)),i=0;i<n._holes.length;i++)n._holes[i].getCoordinates().length>0&&r.push(this._linearRingToLocations(n._holes[i],t));return new a(r)},t._clipAntiMerdian=function(t,i){if(i&&!this._antiMerdianClipRegionMeters){var r=f.latitudeDegreesToMeters(90),e=f.latitudeDegreesToMeters(-90),o=f.longitudeDegreesToMeters(180),s=f.longitudeDegreesToMeters(-180);this._antiMerdianClipRegionMeters=this._geomFactory.createLineString([new jsts.geom.Coordinate(o,r),new jsts.geom.Coordinate(o,e)]).buffer(.01);this._negAntiMerdianClipRegionMeters=this._geomFactory.createLineString([new jsts.geom.Coordinate(s,r),new jsts.geom.Coordinate(s,e)]).buffer(.01)}else i||this._antiMerdianClipRegion||(this._antiMerdianClipRegion=this._geomFactory.createLineString([new jsts.geom.Coordinate(180,90),new jsts.geom.Coordinate(180,-90)]).buffer(1e-6),this._negAntiMerdianClipRegion=this._geomFactory.createLineString([new jsts.geom.Coordinate(-180,90),new jsts.geom.Coordinate(-180,-90)]).buffer(1e-6));if(t.getGeometryType()===n.geometryCollection){if(i){if(u.intersects(t,this._antiMerdianClipRegionMeters)||u.intersects(t,this._negAntiMerdianClipRegionMeters))return u.difference(u.difference(t,this._antiMerdianClipRegionMeters),this._negAntiMerdianClipRegionMeters)}else if(u.intersects(t,this._antiMerdianClipRegion)||u.intersects(t,this._negAntiMerdianClipRegion))return u.difference(u.difference(t,this._antiMerdianClipRegion),this._negAntiMerdianClipRegion)}else if(i){if(t.intersects(this._antiMerdianClipRegionMeters)||t.intersects(this._negAntiMerdianClipRegionMeters))return u.reduceIfNeededGeoOp([t,this._antiMerdianClipRegionMeters,this._negAntiMerdianClipRegionMeters],function(n,t,i){return n.difference(t).difference(i)})}else if(t.intersects(this._antiMerdianClipRegion)||t.intersects(this._negAntiMerdianClipRegion))return u.reduceIfNeededGeoOp([t,this._antiMerdianClipRegion,this._negAntiMerdianClipRegion],function(n,t,i){return n.difference(t).difference(i)});return t},t._antiMerdianClipRegion=null,t._antiMerdianClipRegionMeters=null,t._negAntiMerdianClipRegion=null,t._negAntiMerdianClipRegionMeters=null,t._geomFactory=new jsts.geom.GeometryFactory,t}(),ot=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return it(t,n),t.mapSize=function(n){return o.getMapSize(n)},t.groundResolution=function(n,t,i){var u=this.getEarthRadius(i);return Math.cos(r.degreesToRadians(n))*2*Math.PI*u/this.mapSize(t)},t.globalPixelToLocation=function(n,t){return o.pixelXYToLatLong(n,t)},t.locationToGlobalPixel=function(n,t){return o.latLongToPixelXY(n,t)},t.globalPixelToTile=function(n,t){return o.pixelXYToTile(n,t)},t.tileToGlobalPixel=function(n){return o.tileToPixelXY(n)},t.locationToTile=function(n,t){t=t||1;t=Math.round(t);var f=(n.longitude+180)/360,u=Math.sin(r.degreesToRadians(n.latitude)),e=.5-Math.log((1+u)/(1-u))/(4*Math.PI),i=this.mapSize(t),s=Math.floor(d._clamp(f*i+.5,0,i-1)/o.tileLength),h=Math.floor(d._clamp(e*i+.5,0,i-1)/o.tileLength);return new b(s,h,t,o.tileLength,o.tileLength,g.instance)},t.getTilesInBounds=function(n,t){var h,i,r;t=Math.round(t);var e=[],u=this.locationToTile(n.getNorthwest(),t),f=this.locationToTile(n.getSoutheast(),t),s=g.instance;if(u.x>f.x){for(h=Math.round(this.mapSize(t)/o.tileLength),i=0;i<=f.x;i++)for(r=u.y;r<=f.y;r++)e.push(new b(i,r,t,o.tileLength,o.tileLength,s));for(i=u.x;i<h;i++)for(r=u.y;r<=f.y;r++)e.push(new b(i,r,t,o.tileLength,o.tileLength,s))}else for(i=u.x;i<=f.x;i++)for(r=u.y;r<=f.y;r++)e.push(new b(i,r,t,o.tileLength,o.tileLength,s));return e},t.tileToLocationRect=function(n){var t=n.x*o.tileLength,i=n.y*o.tileLength,r=t+o.tileLength,u=i+o.tileLength;return p.fromCorners(this.globalPixelToLocation(new nt(t,i),n.zoom),this.globalPixelToLocation(new nt(r,u),n.zoom))},t}(c);e.SpatialMath=c;e.SpatialMath.Geometry=et;e.SpatialMath.Geometry.BufferEndCap=k;e.SpatialMath.DistanceUnits=i;e.SpatialMath.AreaUnits=s;e.SpatialMath.Tiles=ot}catch(rt){if(e.logger)e.logger.logCriticalError(rt);else throw rt;}}).call(window)